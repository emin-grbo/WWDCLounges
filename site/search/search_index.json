{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"index.html","text":"WWDCLounges An archive of questions asked during WWDC Lounges. \ud83d\ude4c You are welcome to contribute via GitHub","title":"Welcome"},{"location":"index.html#wwdclounges","text":"An archive of questions asked during WWDC Lounges. \ud83d\ude4c You are welcome to contribute via GitHub","title":"WWDCLounges"},{"location":"wwdc21/DevTools.html","text":"DevTools Lounge QAs by paul \ud83d\uddd3 Tuesday Hi, thank you for organizing this! I have a question about CI, in regards to Xcode Cloud. I remember having troubles (no \"std output\" was printed anywhere) running certain scripts in Pre-build and post-build actions in Scheme editor when I was using Xcode Server & Bots back in 2015. The question is shall we rely on pre-build action for, say, running things like pod install and other pre-build setup w/o which the project cannot be run? Xcode Cloud supports custom CI-specific build scripts that are distinct from pre-build action scripts in your Xcode scheme. The logging from these scripts is captured and made available in your workflow results. See some documentation about this here: https://developer.apple.com/documentation/xcode/writing-custom-build-scripts Will XCode Cloud allow you to work with a locally hosted (on my personal network) git repo? Xcode Cloud has first-class support and deep integration with both cloud-based source control providers \u2014 GitHub, Bitbucket, and GitLab \u2014 and on-premise source code providers; GitHub Enterprise, Bitbucket Server, and GitLab Self-managed. https://developer.apple.com/documentation/xcode/source-code-management-setup First thanks for creating Xcode Cloud it seems so promising! I watched all the videos so far, I was curious to know if there would be a way to retry particular failed test or not? Xcode Cloud will allow you to re-run a failed job. Which tests get run will depend on how you configured your test plan, and if you enabled a test repetition mode (New in Xcode 13!) in your test plans. Xcode Cloud always respects your test plan/scheme and workflow configuration Would it be possible to get the dSYM file from XCode Cloud builds? Download dSYM option is not available on App Store Connect if we build without bitcode enabled. It would be nice to have Testflight crash reports be symbolicated, and still have access to the dSYM file to use with other tools. What I found is that as long as Xcode outputs a dSYM, it will be included in the artifacts. For more advanced workflows, you could use Xcode Cloud\u2019s environment variables with a custom build script to extract symbols from an archive and upload them to a place of your choosing. More specifically, take a look at CI_ARCHIVE_PATH and ci_post_xcodebuild.sh . Will Xcode Cloud be available to teams enrolled in the Apple Developer Enterprise Program? No. Xcode Cloud is initially supported for Apple Developer Program teams. You can read more about requirements on this page: https://developer.apple.com/documentation/xcode/requirements-for-using-xcode-cloud Will there be webhooks available with XCode Cloud for build, test, and distribute status updates? You can find documentation about Xcode Cloud\u2019s available webhooks below: https://developer.apple.com/documentation/xcode/configuring-webhooks-in-xcode-cloud I have a question around testing - I was trying to figure out a way to test scenarios around IAP family sharing, either in the simulator using App Store Config files, or even in Sandbox on device. I can't seem to find a way to simulate something like having a purchase made available via a family purchase made by someone else, or to simulate having a purchase revoked via the head of family disabling family sharing (or someone leaving a family). Would testing in sandbox on two devices that were set up with family sharing be able to test these scenarios? Was also wondering about generating server to server notifications for those events as well, but even just being able to test in Xcode would be helpful. Have you been using StoreKit to test this? This documentation seems related to what you're asking for: https://developer.apple.com/documentation/storekit/original_api_for_in-app_purchase/supporting_family_sharing_in_your_app There's also a great session from WWDC2020 around StoreKit Testing with Xcode: https://developer.apple.com/videos/play/wwdc2020/10659/ Thanks, I've develop my code to handle the scenarios outlined in that document, I'm more wondering how I can trigger those in simulator testing... for example, if I'm running in the Xcode simulator, is there any StoreKit testing feature that would trigger the paymentQueue(_:didRevokeEntitlementsForProductIdentifiers:) method of SKPaymentTransactionObserver ? I'd like to be able to test my code to make sure my handling of that method works correctly. That document also mentions a REVOKE server to server notification, when testing in Sandbox is there any way to generate that event? Thanks for the followup. For the server to server notification, unfortunately not. Please file a feedback ticket for us to add that functionality (and add a followup here with the FB# if you have time to do so now). For the first case, yes! After a purchase is made, open the StoreKit Transaction Manager (Debug > StoreKit > Manage Transactions), you can select a transaction and refund it. This will cause paymentQueue(_:didRevokeEntitlementsForProductIdentifiers:) to be called within your app. Hi! Congrats for your work! Demo looks awesome can't wait to test it myself. Will Xcode Cloud allow us to use classic open source tools in the Swift ecosystem (like swiftlint or sourcery) in our workflows ? How will version dependency be managed ? Yes, Xcode Cloud has ways for you to use open source tools in your workflows, so you can do things like lint or statically generate code in the cloud if you wanted to. Check out this documentation on writing custom scripts for Xcode Cloud to see how to get started! As for how your versioned dependencies will be managed, that would be handled by whatever dependency manager your project uses. So if you use Swift Package Manager, then your build step would resolve the dependencies and versions according to how you wrote your Package.swift file. Will Xcode Cloud support building projects with third party dependencies and if so which dependency managers will be supported (Cocoapods, Carthage and Swift Package Manager)? I believe you can use dependency managers using custom build scripts. Here is some documentation for you! https://developer.apple.com/documentation/xcode/writing-custom-build-scripts See also: https://developer.apple.com/documentation/xcode/making-dependencies-available-to-xcode-cloud Could Xcode Cloud be used as a platform to eventually add distributed build/cache systems? We're very interested in the ability to do use this to speed up developer builds. Build systems like Bazel have powerful capabilities here, but with poor Xcode integration and increased complexity for developers. We would love to see this problem solved natively using Xcode and is a major pain point. Thank you for the feedback, please feel free to file this with Feedback Assistant as well. Can Xcode Cloud run UI-tests in parallel? Xcode Cloud can parallelize tests among all the test destinations configured in your workflow, so yes, it can run UI tests in parallel Will it be possible to quickly download all the screenshots from the UI tests? This can be useful for submitting screenshots to the App Store listing. Perhaps this can even be automated right from the flow. There are several ways to accomplish that: You can download the result bundle from Xcode Cloud and open the result bundle locally, or open it directly in Xcode. 1. From the familiar outline mode you can export the images you want by selecting them and clicking on the paperclip icon in that activity. 2. In gallery mode you can easily select multiple images and drag them to Finder or elsewhere. 3. You can automate this using xcresulttool. For an overview of xcresulttool see https://help.apple.com/xcode/mac/current/#/devc38fc7392 Will Xcode Cloud have the concept of permissions? I.e Restrictions on who can create, edit & trigger workflows. Depending on a user\u2019s role in App Store Connect, they may be able to put restrictions on Workflows. You can find the documentation about that here: https://developer.apple.com/documentation/xcode/developing-a-workflow-strategy-for-xcode-cloud Here is some information about App Store Connect role permissions: https://help.apple.com/app-store-connect/#/deve5f9a89d7 When I'm working directly on a Swift package without a project file, creating a new unit test case file always uses the ObjC template, and it appears this is still true in Xcode 13. Is this something I've done wrong, or should I file a feedback? Please do file a feedback about this issue on https://feedbackassistant.apple.com. Thank you for bringing this to our attention! One workaround is to create new test case files from the Test Navigator. Use the \u201c+\u201d button at the bottom-left corner of the Test Navigator, select \u201cNew Unit Test Class\u2026\u201c, and then select Swift from the Language selector dropdown. Another workaround would be to create the file in the Tests directory using the basic \u201cSwift File\u201d template, and then add the code for the new XCTestCase subclass yourself. Will Xcode Cloud integrate with Gitlab? Xcode Cloud has first-class support and deep integration with both cloud-based source control providers \u2014 GitHub, Bitbucket, and GitLab \u2014 and on-premise source code providers; GitHub Enterprise, Bitbucket Server, and GitLab Self-managed. https://developer.apple.com/documentation/xcode/source-code-management-setup First of all, Xcode Cloud looks very promising! Thanks for all the great work that has been done around it. I have one question that I couldn't resolve by going through the docs though (sorry if it's already answered there). Basically, I'd like to know if workflows can be triggered on demand through an API the same way it can be done with some App Store Connect actions. Yes, Xcode Cloud will be fully integrated into the App Store Connect public REST API. You will be able to start new builds programmatically. The public REST API integration is not immediately available today, but will be released during the summer. For context on one typical use case: apps that have not only a frontend component but also have backend server components require integration testing when the backend systems change. When the backend system has passed server side tests, you can set up programmatic triggers using the API to invoke Xcode Cloud builds and tests from an upstream pipeline using a specified staging server. Will a workflow be always tied to an App Store listing? Can a project be built (using REST API) without its app ID being registered in App Store Connect? Yes a workflow is always associated with an App listing in App Store Connect. Creating a workflow in Xcode streamlines the creation of App Store Connect records. If the App Store Connect record already exists, then these will be associated automatically, based on the bundle ID in your project. For XCode Cloud and releasing to TestFlight, how do you capture \"What to Test\" for what's released to the user? Once Xcode Cloud has successfully uploaded your build to TestFlight, you can go to the TestFlight tab in App Store Connect to enter that information Xcode 12.5 has a serious bug. When I run app via cmd+r, connecting debugger to a simulator takes about 1-2 minutes and debugserver process use 100% CPU. Do you plan to update Xcode 12.5 to 12.5.1 or 12.6 with fixing this issue? Xcode 13 doesn\u2019t have this issue but I am unable to use Xcode 13. Xcode 13 Beta should address this performance problem seen when running on recent versions of macOS Big Sur. My question is this: could you please share some of the best practices for CI/CD at Xcode projects? Im sure Xcode Cloud will be my best friend in a future, but if we imagine we don\u2019t have Xcode cloud : ) For general, self maintained CI/CD xcodebuild is your best friend. The \"Testing in Xcode\" session from WWDC19 hits on some best practices that may be useful to you: https://developer.apple.com/videos/play/wwdc2019/413/ Some points I'd like to highlight from the session: - The testing pyramid, to help strike the right balance between unit, integration, and UI tests - Using test plans efficiently for the variables you want to change between test runs - What configuration works best for your needs when planning CI/CD set up. At times it is useful to have a separate builder machine from test runner, in which case you'll break your executions into build-for-testing and test-without-building, but it really depends on your use case Will Xcode Cloud support some sort of secret management? i.e third-Party tokens, AWS creds Yes it does! See the Custom Environment Variables section on this page: https://developer.apple.com/documentation/xcode/xcode-cloud-workflow-reference You can add secret environment variables to a workflow. They are \"write-only\", meaning that once set, secret environment variables cannot be read again from the workflow editor. Secret environment variables are encrypted in transit and at rest, and used only on the ephemeral build environment. As such they are suitable for AWS keys, passwords, and API tokens. You can also add \"non-secret\" environment variables, which can be read and edited from the workflow editor. Does Xcode Cloud support custom build tools? for instance, to use Xcode Cloud workflow to run Bazel build of iOS project? That\u2019s not currently supported, but you may want to give it a try to see if you could get it to work. That\u2019s great feedback though so please file a report on feedbackassistant.apple.com! How long will builds take on Xcode Cloud compared to building locally, for example using an M1 Mac Mini? Build times will depend on a number of factors, like the size of your project, build settings, workflow settings, custom build scripts, and much more. I would recommend reading these articles: https://developer.apple.com/documentation/xcode/developing-a-workflow-strategy-for-xcode-cloud https://developer.apple.com/documentation/xcode/xcode-cloud-workflow-reference What type of machines will be available to run builds on? Will there be tiers in terms of performance? There are currently no performance based tiers. How to join Xcode Cloud beta program now? we can try it ASAP :-) You can join the waitlist here: https://developer.apple.com/xcode-cloud/beta/ Is there any tools within Xcode and Xcode Cloud that would allow for an easy monorepo setup? My team has two internal libraries that are used in a tvOS and two iOS applications so we are looking to move them all into an easy repo for ease of maintenance but we are unsure if there is anything available to help ease the transition. I don\u2019t believe Xcode nor Xcode Cloud have a way to merge multiple repos into a single repo, but there are a number of tools available to make dependencies between your projects easier to work with. I would highly recommend this talk from WWDC 2019 on Swift Packages and also this guide on managing dependencies in Xcode Cloud . xcodebuild often returns error 65 without clear explanation. Sometimes it seems that it could be the simulator failing to boot, sometimes the test results fail to be collected, but the error messages are always a source of frustration as it's very hard to understand the problem. Furthermore, these errors are often sporadic and often happen on CI, where it's even harder to fix. What can we do to tackle this issues? Are there plans to improve xcodebuild error reporting? If you encounter xcodebuild errors that are unclear, or indicate that the failure is a system error rather than a problem with your own project, please file feedback on https://feedbackassistant.apple.com and attach the .xcresult bundle from the test run for investigation. In many cases, additional helpful diagnostics can be captured by running xcrun simctl diagnose while the simulator you were targeting is still booted. We are always looking for ways to make the errors produced by xcodebuild clearer and more helpful, and feedback from developers is a very important part of that process! Will there be a separate cost for Xcode Cloud? It seems like there is a lot of resources available. I already pay $140/mo for my own cloud-based build server. There is no cost to join the beta program. You can sign up for that here https://developer.apple.com/xcode-cloud/beta/. More details on pricing and availability of Xcode Cloud will be announced this fall I see that Xcode Cloud supports custom scripts for bootstrapping the temporary environment, but is/will there be a mechanism for caching some of the dependencies? For example a Ruby version installed via rbenv, and bundler dependencies. These are things we typically would never check into Git but could do with caching somewhere like we can on other platforms Caching build dependencies is not currently supported, but you might be able to do that yourself in a custom build script. You may want to give it a try to see if you could get it to work. That\u2019s great feedback though so please file a report on feedbackassistant.apple.com Does Xcode cloud require the new Macos 12? Or will it also work with code 13 and macoa 11? Xcode Cloud is part of Xcode 13, which will be compatible with macOS 11.3 \ud83d\ude00 Will we be able to use an http API to upload/connect a repository to start a workflow, i.e. not using Xcode at all? No. You must use Xcode Cloud to configure your initial workflow and connect your source code repositories. Will Xcode Cloud support pipelines that don't target the app store or testflight? Would love to be able to build .apps or even .pkg for my macOS apps. Yes! You can use a custom build script to upload artifacts to your own destinations. Please see the ci_post_xcodebuild.sh document in that linked article for information about copying artifacts outside of Xcode Cloud. xcodebuild has a long-standing difference (FB5531332) from Xcode's testing behaviour: it ignores the LocationScenarioReference (Location Simulation in the Xcode Scheme Run Options) in a scheme. This limits the kind of integration testing we can do on CI and requires workarounds to mock Core Location which is crucial to our app's functionality. Has location simulation been considered for UI testing with Xcode Cloud? Thank you for the report and the feedback reference number! This is a bug with xcodebuild that we will bring to the attention of the engineering team. Are the Xcode Cloud configurations stored in the Xcode project file, or is there a manifest that can be built up outside of the project file? Many other CI platforms have yml configurations that are easily human-readable. (I can't wait to try out Xcode Cloud; thanks to all involved!) Xcode Cloud workflow configuration is not stored in the Xcode project file; the configuration is persisted only in the cloud services that support the service. Being centralized in the cloud, the configuration can be accessed through the Xcode UI itself, the App Store Connect web UI, and also programmatically through the App Store Connect public REST API (available this summer). The API uses JSON format. Whereas power users are comfortable with editing YAML, integrating the configuration into an intuitive user interface makes the service more broadly accessible initially. Does it mean that we can edit/create/delete Xcode Cloud workflows via App Store Connect REST API with JSON objects? Yes, that\u2019s correct. Will testflight be available without Xcode cloud? Yes, TestFlight will be available on Mac separate from Xcode Cloud \ud83d\ude00 This session can give you more information about it as well: https://developer.apple.com/videos/play/wwdc2021/10170/ Will Xcode Cloud support golden/snapshot testing? (take a screenshot of a view or scene so we can know how a view should look like, and then this screenshot can be used to compare to following runs and see if the UI was modified. I currently use for this snapshotpointfreeco/swift-snapshot-testing from github) Xcode Cloud will run any tests authored using XCTest, which can be combined with that library to write XCTest-based snapshot tests. Sorry if i missed it, is it possible to use Xcode Cloud as a remote build server, so the artefacts are redownloaded to my local machine and i can run it on a sim locally? Cheers Yes, you can download the artifacts with a \u201cci_post_xcodebuild.sh\u201d script. See the docs here: https://developer.apple.com/documentation/xcode/writing-custom-build-scripts Will there be support for fetching dependencies from other dependency managers that are not Swift Package Manager? I have currently a big legacy macOS project that uses git submodules, cocoapods and carthage. Yes, you can use Custom Build Scripts in Xcode Cloud to fetch dependencies from other systems which xcodebuild doesn\u2019t natively support such as those. See https://developer.apple.com/documentation/xcode/writing-custom-build-scripts There is additional documentation specifically about CocoaPods and Carthage available at https://developer.apple.com/documentation/xcode/making-dependencies-available-to-xcode-cloud Will Xcode Cloud support third-party static code analysis tools, like SonarQube? https://www.sonarqube.org You can integrate an Xcode Cloud workflow with services that are addressable through a custom script. Check out this documentation for specifics and how-to! I have several groups in TestFlight. Will Xcode Cloud have an option to automatically add specified Groups to a build or will it only add the 'AppStore Connect User' group? Yes, you can configure a workflow to select one or more TestFlight groups. Our macOS app targets pro users in the music industry, which isn't known for rapid adoption of OS updates\u2026 Will TestFlight for macOS be made available to testers on prior releases of macOS? Our internal QA tests all the way back to macOS 10.12, so it would be nice to (finally!) maintain the same kind of workflow that we have for our iPad and iPhone testing on prior releases. Mac TestFlight support begins with macOS 12.0, it cannot be used on older releases Are there any API requirements/limitations on the apps that are submitted to TestFlight? For example, it would make sense (given your response) that I would be required to build w/ Xcode 13 + macOS 12 SDKs to integrate with TestFlight for macOS, but will I be OK to continue using a deployment target of macOS 10.12 for my app binary? Yes, you can continue to use a deployment target older than macOS 12.0! The requirements are: - You must build and submit from Xcode 13 and use a provisioning profile - The TestFlight client supports macOS 12 and later, so builds aren't installable on older macOS versions. If we have our own build/test farm which use AWS mac instance, does Xcode Cloud support to use our own dedicated cloud infra? No, this is not supported. I'm concerned about the Homebrew aspect. Is there a chance that some dependency scripts could build and link with parts of Homebrew? Some of these open source libraries build with things like CMake and Ninja and can be very difficult to control include paths. Not having Homebrew installed, I don't have to worry about that, but I would with Xcode cloud. We include homebrew by default on the VMs in Xcode Cloud. You can read more about how dependencies can be made available to a workflow here. That said, if you're concerned about a supply-side attack, or dependencies in your application being bad actors, you can conceivably audit the environment in a post-clone script after Xcode Cloud clones your source code into its environment. I haven't tried removing homebrew from the VM, but theoretically you could remove it or prevent it from phoning home. Is TestFlight for Mac limited to just apps destined for the Mac App Store or does it also work with notarised apps outside of the store? Apps must be uploaded for distribution to App Store Connect to become eligible for Mac TestFlight. I'm incredibly excited to use async/await and actors. What OSes will those be limited to? On Apple platforms, we currently support iOS 15, macOS Monterey, etc. This is tied to runtime integration with improvements to Dispatch in those OS releases for better performance. We are exploring the possibility of backward deployment. Concurrency works on Linux. Still a WIP on Windows. On performance. I have a 4500-lines enum for emojis in Unicode, so I can order them and move them around. In the functions I declared (such as one providing the group, or subgroup), I'm damned either way: if I don't put a default: fatalError() at then end of it, I have a compiler too slow error. If I put it, I have a Default will never be executed. Best of all, I cannot disable the warning in the package, so I'm left with 4 warnings at all times. Anything I can do? Sorry you have to deal with that. When the compiler analyzes a switch statement for exhaustiveness, it has some heuristics for very large enums that are intended to keep compiler performance good even in the face of complex patterns with very large sets of enum cases, but it can lead to false-negative cases when that goes wrong. If you have a moment to try to extract some of your code into a test case, and submit an issue to bugs.swift.org, we might be able to use it to further refine these heuristics. Thanks for letting us know about the issue. I'm wondering if this enum might be better-represented as a struct, perhaps conforming to RawRepresentable if you need an underlying value? Will Swift Concurrency be available on iOS 14? I saw the following text in the Known Issues of Xcode 13 Release Notes \u2014 \"Swift Concurrency requires a deployment target of macOS 12, iOS 15, tvOS 15, and watchOS 8 or newer. (70738378)\" This question was answered earlier, but I'll answer it again. Right now the supported deployment target is iOS 15, macOS Monterey, etc., or later. This is because of enhancements to Dispatch to support Swift concurrency, of which the concurrency runtime uses. We are actively exploring the possibility of backward deployment, but are mindful of not compromising the future of concurrency performance by doing so. How lightweight are Actors? What should be considered when declaring an Actor in regard of overhead or cost? Creating an instance of an actor type is no more costly than creating an instance of a class type. It's only during the access of an actor's protected state that a task suspension may happen, to switch to that actor's executor. The implementation of that switching is lightweight, and is optimized by both the compiler and runtime system. You can find out more about how this works in Thursday's session Swift concurrency: Behind the scenes : https://developer.apple.com/wwdc21/10254 How to run async function from sync code on main thread? Do I need to use detached or there is something else? Yeah, you can launch either of the forms of unstructured task from sync code. In Xcode beta 1, there is async { } , which will start a new async task that runs on the same actor as the launching context (which can be important if that's the MainActor, for main-thread-bound UI work), and asyncDetached { } , which will start a completely independent task. If you've been following Swift open source, though, you may know that these names have been revised due to feedback from the open source community; they're known as Task and Task.detached currently. Are we likely to see Swift Argument Parser reach 1.0 in the near future? It's a really great package and I'm keen to use it more widely. As an open source project, probably the best place to ask this question is on the \"Related Projects\" section of the Swift Forums where you'll connect with the main authors of that package: https://forums.swift.org/c/related-projects/argumentparser/60 How async/await works under the hood? Could you give us some links? The \"Swift concurrency: Behind the scenes\" session on Thursday will provide a lot of details about this. What are recommended sessions for leveraging async/await? The main session is \"Meet async/await in Swift\", but you may also find tomorrow's \"Swift concurrency: Update a sample app\" session to be very helpful, since we go through an existing app and use async/await , and more, so it can leverage Swift Concurrency. How will async/await and SwiftNIO work together? If I understood it correctly, async/await works very similar to SwiftNIO\u2019s EventLoopFutures. Support for async/await is in the main branch for SwiftNIO, and will be available officially after 5.5 is released. How long do you expect things to live in standard library previewing before being considered fully baked? SE-0270 has lived there for quite some time and wants its turn in the limelight Based on my conversation with the proposal authors, some issues have turned up with the design during the preview period that we need to address before it graduates to the standard library. This will likely require a follow up review. For the long enum question, I created a github. https://github.com/Misoservices/MisoEmojiUnicode Will do the bugs asap. Ty for the answer! Thanks for the follow-up! This link is very helpful. I took a quick look and I think making this a struct would probably simplify things and eliminate the problems you're having with large switch statements. I'd recommend you sign up for one of our Swift labs later this week so you can get one-on-one support from our team. Will there be (or are there already) some \u201eguidelines\u201c on when to use Publishers (combine) and when to use async/await? E.g. for a network request, URLSession currently provides support for both but what\u2019s better/recommended? For URLSession the async/await API is preferred for single values and the AsyncSequence API is preferred for reading chunk-by-chunk. The language level support for structured concurrency is a great way to integrate URLSession downloads into your app. Will there be tools to help visualize task hierarchies in the future? Or \"cancellation reason\"s for debugging? Thanks for the suggestion, I think it's a good idea! Really like what I'm seeing on DocC - I've heard its possible to output HTML pages from a generated docset - will there be some kind of simplified mechanism to apply styling to those pages? Thinking about how an organization might want to apply their own brand coloring and such to published docs on web. Today there isn\u2019t any integrated affordance for theming the generated site. This is certainly something we can see as valuable, though. Also a great topic to bring up when we make the project open source later this year. The \"Host and Automate\" presentation mentions: \"DocC comes with a built-in clean design\". Will it be possible to theme DocC builds? Ah, already a popular request. Today, there is no integrated support for theming the generated site, but would love for you to file a feedback request so we can track your interest. Is there a detailed spec for the .doccarchive output, and/or alternative output formats? You can get details about how you can host a .doccarchive on your website in the following session: https://developer.apple.com/wwdc21/10236. We\u2019ll have more details about the structure of the .doccarchive when we open source. You can post a followup question with details if you have something specific you\u2019re looking to do. A member of my team is building a tool to create unified output from several disparate docs generators that we use across different language-specific SDKs. (Currently Jazzy, Javadoc, JSDoc, etc.) We're trying to unify the reference manual experience for devs who use our docs without disrupting the workflows of our SDK teams, so we're trying to integrate with existing docs generators. I'd love to use DocC for the in-Xcode documentation, if I could also then feed DocC's output into our custom tool to unify reference docs on our docs site for our users. Having a spec for DocC's output, or being able to theme it, would go a long way toward enabling that unified experience. I'll keep my eye out for more details about the structure of the .doccarchive when you open source. Thanks for this - it looks awesome! Interesting details, thanks for that! Yes, keep an eye out for the open source details. As you explore using DocC, if there is something that would help or that you can't accomplish, please do file Feedback Assistant requests with details. Are there any plans for DocC to support Objective-C documentation builds? My org currently uses a docs generator to build both Swift and Objective-C doc sets for our SDKs, and we would likely have to continue using that if DocC can't build Objective-C docs sets. We\u2019ve definitely heard about the importance of Objective-C, and feel it ourselves. It is indeed a priority. Thank you for the feedback! What\u2019s the best way (via CLI/CI) to generate a documentation archive from a library that\u2019s just Package.swift , no wrapping Xcode project? xcodebuild docbuild works with a Package.swift file. You'll need to add a -scheme argument to tell xcodebuild which target to build; you can run xcodebuild -list to see the list. For example, you can run xcodebuild docbuild -scheme MyPackage to build a DocC Archive for the MyPackage scheme. The archive bundle will appear in your Derived Data directory (for example, ~/Library/Developer/Xcode/DerivedData/MyPackage-[hash]/Build/Products/Debug/MyPackage.doccarchive ). Is there built-in integration with Xcode Cloud workflows? Or would we need to implement it via a script? You\u2019re correct, the best way to support documentation builds on Xcode Cloud would be via a script that invokes xcodebuild docbuild . There\u2019s a session here that is a great reference for a use case like that: https://developer.apple.com/videos/play/wwdc2021/10236/ Does the hosted webapp have a way to download the archive so devs can add the docs to Xcode on their local machines? The primary use case we\u2019ve focused on is for other developers to import your package into their project as a dependency. That lets them use Build Documentation to build the docs locally and view the docs in Xcode\u2019s Documentation window. For other workflows, you can make a .doccarchive downloadable from your website. For example, you could zip the archive and have it as a downloadable resource on your site. If you have a different workflow in mind, post a followup and we can look at that specifically, or if you have other feedback we\u2019d love to get your specific use case in a Feedback Assistant. Are there any versioning capabilities in DocC? For example, being able to view the documentation for older versions of a package for users that can't or don't want to update? If a developer imports a specific version of your package into their project as a dependency and uses Build Documentation, they\u2019ll be able to read the documentation for that version in Xcode\u2019s documentation window. If you have a different workflow in mind, please post a followup and we can look at that specifically, or if you have other feedback we\u2019d love to get your specific use case in a Feedback Assistant. The \"Host and Automate DocC Documentation\" presentation mentions: \"The main page groups important symbols into topics related to higher-level tasks. Each of those group related symbols into more specific topics.\" Can you talk more about how those groupings happen? Is that something we dictate by the way we organize and present content in the framework, or can we manually specify groupings? Organizing your pages into groups is a great way to improve your documentation! To do that, you create a Topics section with a second-level heading called \"Topics\", followed by a group title in a third-level heading, and then a bulleted list of links. We describe the syntax in more detail here https://developer.apple.com/documentation/xcode/adding-structure-to-your-documentation-pages, under \"Arrange Top-Level Symbols Using Topic Groups\". We also have a session tomorrow that shows how to do this: https://developer.apple.com/videos/play/wwdc2021/10167/ along with some other ways you can improve your documentation. Usually a problem of documentation is that it becomes obsolete with time. Is there any way to prevent this by using docC? Is there any validation in the code that can be autocompleted? We think so too! It's important to keep documentation up to date with the changes you make in your code. Like a code compiler, DocC can emit warnings and errors when it finds something that doesn't quite look right. For example, DocC checks all of the links in your documentation you've written using double-backtick syntax, like MyType . If you remove or change the name of an API in your code, Xcode will display a warning on the line containing the documentation letting you know that you should update your docs. If you're interested in other ways to validate the documentation, we'd be interested to hear more via Feedback Assistant. Is there any way to know the documentation coverage of the public symbols of a framework? It would help a lot with adoption and finding blind spots on huge code bases. Hi Mauro! DocC does not currently expose documentation coverage but this is great feedback. Could you please file a Feedback Assistant request with details about how you'd want this to work? These types of enhancement requests are super helpful. Wonderful work. Thank you! Thinking ahead, is there any limitation that would inhibit the ability to extract docs for symbols other than public or open? Seems like it would be useful for internal use, and as a way to collect data on undocumented symbols. Thanks for the feedback! This is something that a lot of people have been interested in over the last few days :). We built the DocC integration in Xcode first and foremost to support public-facing docs. We know that this is important for teams working on a framework and will keep this in mind in the future\u2014thanks again for the question! Will the DocC compiler run only over source code dependencies or will it also generate the docs for the public interfaces of consumed xcframeworks? DocC integrates with the Swift compiler to extract information about the public symbols and their documentation during the build. The author of an xcframework can build and export that framework\u2019s documentation and distribute it alongside the xcframework to enable consumers to read the framework's documentation in Xcode. Do you have any tips or references on how to best distribute them together with the xcframework so that they are detected by Xcode? Is there any SPM tooling around this or is your answer more about a context of a manual import? Thank you very much! That's a great question and something that we want to explore more. For now, this can be accomplished if the framework author exports and uploads a separate zip file of the DocC Archive. Consumers of the xcframework can then download the documentation archive, and double-click it to import that documentation into Xcode. If you have more questions or want to follow up, you can request a DocC Lab appointment. When building docs locally, does the archive get stored in derived data? i.e. are devs going to have to rebuild docs every time they clear derived data to fix weird issues? When you use the Build Documentation menu in Xcode, the doccarchive does go into the derived data directory, so if you clear that, you would have to rebuild the docs. If you want to keep a version of the built docs in the Documentation window, you can export the doccarchive, and then you can double click it which imports it back into the Documentation window. When you import a .doccarchive , Xcode puts it into an \u201cImported Documentation\u201d section of the Documentation window, and that doesn't get removed when cleaning the derived data. In some of our internal modules we have some utility methods in extensions of types that are part of another consumed frameworks (for example: Foundation). We're working towards removing the majority of them in favor of other solutions that avoid extensions. In the meantime though, I haven't seen them in our generated docs and would like to know if there's a way to include them so that they are discoverable while we deprecate/move them. Thanks! DocC in Xcode 13 supports documentation for APIs defined in your module, but we know that documenting extension symbols is also very important. This is something that would also be a great topic for us to discuss when we open source later this year. I\u2019m loving DocC, thanks for all the hard work! Is there a way to omit some public symbols from the generated docs? For example, my UIView subclass overrides a series of methods like layoutSubviews that I don\u2019t want to be documented but they currently show in the documentation archive. I had a scan through the docs but couldn\u2019t seem to see a way to opt out If you prefix a public symbol with an underscore, DocC will automatically hide it from the built documentation. In your particular case, because you can't change the name of the method, that won't work. We're interested to hear more about this scenario and how it impacts your documentation via Feedback Assistant. I've checked the session in which you cover linking to types or methods. What I'd like to know is if we reference between documentations/symbols of 2 different frameworks. For example referencing in a class of package A a public type of package B in which A depends and uses as an input. We built DocC with a focus on having a really great documentation experience for individual frameworks and we don\u2019t currently support linking across different frameworks. We know this use case is especially important for developers who ship a collection of frameworks (maybe in a single repo) that work together. It\u2019s good to know that you\u2019re interested in this and it\u2019s (another) really great topic for discussion when we open source later this year. Is it possible to use DocC for local Swift packages? We're writing a lot of documentation for local modules (mostly for services and core API), and it would be really helpful to use DocC for them too. Yes, DocC works with both local and remote Swift packages. If you open the Swift package in Xcode, and use the Product > Build Documentation menu item, Xcode will build documentation for both that package and its dependencies (both local and remote). Note: if you use a documentation catalog in your Swift package, make sure that the Package manifest\u2019s swift-tools-version is set to 5.5 For more information about documenting a Swift package, see https://developer.apple.com/documentation/xcode/documenting-a-swift-framework-or-package I noticed that the website that gets generated in the .doccarchive doesn't have search functionality. Is there any plan to add this feature? This is a great question, and a really good feature request. You\u2019re correct- Today, search is supported when viewing documentation archives in Xcode\u2019s documentation window and it would be great to have search available on the web as well. This is something we\u2019ll definitely be interested in discussing further with the community when we open source DocC later this year. \ud83d\uddd3 Wednesday Simulator Recordings were added in Xcode 12.5. Is it possible to record audio with Simulator recordings? You cannot record audio with Simulator right now. If this is a feature you would like, please file a Feedback Request. xcrun simctl allows recording a video from the Simulator within the terminal. Can we progressively read out the recorded video while the recording is still running? E.g., start converting the video to a different video size? Hi! You cannot do this with simctl . We begin recording right when the command is executed and when you press Control-C, that ends the recording. Throughout this process data is written to the file. We do not support \u201cpiping\u201d the video or performing operations on it at the present time. If this is something you would like to have, please file a feature request using Feedback Assistant. Is it possible yet to run a native iOS app from Xcode on an M1 mac, instead of launching in a simulator? Yes! You can learn more about how to run these apps from the WWDC 2020 session here: https://developer.apple.com/videos/play/wwdc2020/10114/ Hi. Do you plan to release simulators for older iOS versions (13, 12) compatible with Apple Silicon? The legacy iOS and tvOS simulator runtimes are compatible with Apple Silicon Macs via Rosetta. Older watchOS simulator runtimes are i386 and are thus not compatible with Apple Silicon macs. I'm noticing when I try to store an item in the keychain on the iOS simulator with whenPasscodeSetThisDeviceOnly and biometryCurrentSet that it is failing. Is there a way to make this work on the simulators now? Is there somewhere I can learn more about changes here? I believe Keychain requires the Secure Enclave which is a hardware feature on iOS devices and is not present in Simulators, so I don't believe Keychain testing on Simulator will work, sorry. Physical hardware will be necessary for testing Keychain features. In watchOS, when i try to activate the session it fails all the time, but succeeds in second attempt. (on device) Thanks for the question! I think we'll need some more information from you to help triage this further. Could you please submit a bug report via http://feedbackassistant.apple.com so that we can investigate this. Also, please run xcrun simctl diagnose and attach the output to the feedback issue you report. Thank you! Is it possible to use simctl to connect & disconnect the hardware keyboard? It is not possible to connect/disconnect the hardware keyboard using simctl currently. If you could file a Feedback request with details about your use case that would be really helpful. Similar question to video, Is it possible to record video with Simulator recordings? Hi there! If you are referring to recording audio, we do not support that at the present time. Please use Feedback Assistant to file this request with us if this is important to you. I mean to record a video? It is possible to record video both from the simctl command line tool and the Simulator app. Both features work the same way, but the simctl command line tool gives you a few more options. Is there a technical reason why Xcode may at times not be able to launch an app properly in the simulator? Quitting Xcode and the simulator and then trying again will resolve the issue. This has been a problem for many years. Thanks for the question! I think we'll need some more information from you to help triage this further. Could you please submit a bug report via http://feedbackassistant.apple.com so that we can investigate this. It'd be really helpful to get some diagnostics, captured after you've reproduced the issue: A sysdiagnose bundle from your host Mac (run sudo sysdiagnose and attach the resulting archive) A diagnostics bundle from the simulator. Please run xcrun simctl diagnose With the new announcement of WebAuthn and security key improvements in ASAuthorization, will the Simulator with Xcode 13 support hardware security keys (so developers won't need to build and debug their app to on physical devices)? Hardware security keys are not supported in the Simulator on iOS 15. It is important to test features on-device because they take advantage of functionality that's built into iPhone, but which is not always possible to simulate. If this is important for your workflow, I recommend you let us know via the Feedback Assistant at https://feedbackassistant.apple.com. Is there a way to test apps using GroupActivities framework on Simulators? What would be the easiest approach to test such apps? The Group Activities APIs (for SharePlay) requires FaceTime. Unfortunately, there is no FaceTime support in the simulator, so you will need to test this aspect of your app on device. Enterprise apps from multiple companies don't run in iOS 15 (but are fine on 14) and claim they need to be updated - can you shed some light on what's actually out of date here and what needs to be changed? -[IXSErrorPresenter presentErrorForBundleIDs:code:underlyingError:errorSource:]: Asked to present alert for error 17 source MobileInstallation underlying error Error Domain=MIInstallerErrorDomain Code=13 \"Failed to verify code signature of /var/installd/Library/Caches/com.apple.mobile.installd.staging/temp.0Ti39V/extracted/Payload/App.app : 0xe8008029 (The code signature version is no longer supported.)\" These applications use an older code signature type that is no longer supported. Apps from the App Store have been automatically re-signed, however enterprise applications cannot be automatically signed by Apple. Please contact the developers for these apps; they will need to re-sign their apps with an up-to-date certificate and profile. For more information, I recommend you visit the Security lab on Friday. What is the currently fastest recommend setup to deploy a debug build onto a watch device? Especially with regards to the file transfer time. iOS and watchOS device connected via BLE and both in the same 5 GHz hotspot? Mac (Xcode device) in the same wifi? Other influences like power connected? At present, the most reliable way to test on watch is to ensure you have a wired connection to your phone and to ensure that your phone and watch are in close proximity to eachother on the same wireless network. It is also best to limit interference from other wireless devices and ensure that you have a wireless access point close enough to maintain a constant strong signal with both devices. I have a set of test simulators that I frequently use. As part of their initial setup I will often install a network profile, and for another project I require to login to iCloud for CloudKit testing. I notice between Xcode upgrades these changes are always wiped. Is there a way to keep them in place between iOS/Xcode upgrades, or is their a quick way to script provisioning them so I don't have to login to iCloud or install a profile for each simulator? Thanks for the great question! I think this might be an excellent opportunity to request a lab appointment with one of our Simulator engineers. It would be good to have time to talk through what your use case is, what you're seeing go wrong and when, and what options we can come up with together to make this work better for you. Please visit https://developer.apple.com/wwdc21/labs , search for Simulator in the \"Search WWDC21 labs...\" field, and request an appointment. Thank you!! Why is the Xcode wireless connection to a device so unreliable? I basically have no idea when I will be able to use wireless debugging. We hear your concerns about the reliability of wireless debugging, especially around needing to maintain a persistent connection to the device for a debug session. While we don't have significant improvements in this area with Xcode 13, it is an issue that we are actively investigating as we look to improve the wireless development experience. I noticed that compiling to a simulator in M1 still uses x86_64 arch even in Xcode 13, is there any reason for that? why the simulators arent arm64? Or maybe I am missing some config, I tried with latest iOS 15 deployment target Hi, the architectures that get built depend on the simulator runtime that you are targeting. Which runtime are you targeting? Do you see the same behavior when targeting a newer simulator runtime? I am targeting iOS 15 in this case, xcrun simctl list gives me: == Runtimes == iOS 15.0 (15.0 - 19A5261u) - com.apple.CoreSimulator.SimRuntime.iOS-15-0 And this is the flag that the swift compiler is using: -sdk /Users/omarzunigalagunas/Downloads/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator15.0.sdk I tested with an empty project and it compiles to arm64 but in our project it doesn't Can you check whether your project's configuration is forcing x86 output by overriding the ARCHS or EXCLUDED_ARCHS build settings? Is there a way to hide the top bar on a simulator (that says \"iPad 8th generation etc\") so you only get the content, kind of like the QuickTime Player is \"all window\"? You can change the appearance of the Simulator window by opening the Window menu and selecting Show Device Bezels. Thank you, but what I'd like is no bezel and no top bar. Is that possible? There is no configuration option like that right now. If you're trying to record or screenshot content, you can crop your recording area in the Screenshot app before capturing the content. If that's not sufficient for your use case, I'd encourage you to let us know via the Feedback Assistant at https://feedbackassistant.apple.com. Is it possible to write to the app's Documents directory on the Simulator, outside of the app? For example if we want to set up a specific state, by writing data on the documents folder, before running UI Tests. You can get the path to an application\u2019s data container for a given device with simctl: xcrun simctl get_app_container <device-id> <app-bundle-id> data The data container will contain the Documents directory. If you only have one simulator booted, you can use the device alias \"booted\" instead of specifying the device's ID. Are there any Xcode 12.x versions that support device debugging when a device is running iOS 14.6? Hi Jared! Xcode 12.5 supports devices running iOS 14.6. For App Store screenshots, I would like to use the simulator tool to take a picture with the device bezels embedded with the image. But when I do this with 12.5, I only get an screenshot with a 'cutout' of the device shape. How should I enable it to capture both the screen and the device bezel together? Currently we do not support this. The screenshot tool in Simulator can create images which are suitable for a variety of media. If you are trying to capture screenshots of your app for marketing materials, I suggest that you speak to the fine people over at the App Store for advice on how to take screenshots of your app for the store. Is there any way to view the XML file of Info.plist in Xcode 13? Because it's no longer a separate file, and inside the project target instead. Hi Andrew! You should still be able to view your Info.plist file by opening it in the project navigator on the left-hand side of the Xcode window. If you want to view the Info.plist file as it appears after building your app, select your .app bundle, Control-click or right-click it, and select Show Package Contents. The Info.plist file should be in there. If this is a traditional macOS app, it may be under the Contents folder. Thanks! But when you create a new project in Xcode 13, for example in the SwiftUI App template, there's no more Info.plist in the project navigator. This is an intentional design change in Xcode 13. I know the Xcode team would love to hear what you think. Please let them know by using the Feedback Assistant at https://feedbackassistant.apple.com. Is there a recommended way to control simulator setup when running UI tests? For example, for ui testing I need to disable the hardware keyboard but for regular development, it\u2019s not practical to do that. It\u2019s a bit disruptive having to enable/disable it each time so I\u2019m wondering if i can control this kind of thing somehow? Thanks for the great question! We have a helpful command line tool for Simulators that you can run via xcrun simctl that can do a lot of useful automation and setup. Here's a video from a previous WWDC session for more information: https://developer.apple.com/videos/play/wwdc2019/418 . If you find functionality missing from simctl, please do submit feedback through Feedback Assistant!! Also, one thing that you might try if you're doing this often... You can run all of your setup steps on a Simulator device, shut it down, then make a clone of that device with xcrun simctl clone , and then use that cloned device for testing. This might also be a good question to discuss with one of our Simulator engineers in our labs, so if that sounds like it would be helpful to you, please visit https://developer.apple.com/wwdc21/labs , search for Simulator in the \"Search WWDC21 labs...\" field, and request an appointment. Thank you!! I'll try again - sorry for not being clear: In Xcode 13, will we be able to launch our iPhone/iOS apps natively on our M1 Macs, rather than selecting a simulator? I do not believe this is currently possible. I am asking if Xcode 13 will support it. Thank you! iOS and iPadOS apps can run natively on macOS 11.0 and later running on Apple Silicon. To run such an app from within Xcode 12.0 or later, select the scheme for your iOS or iPadOS app and choose the 'My Mac (Designed for iPad)' run destination. This run destination is suitable for all iOS and iPadOS apps. Is it possible to run the iOS 14/15 simulators under Rosetta while running Xcode natively on the M1 Mac? A Hi Michael! I'm sorry, but we don't support this configuration. If you need this for your workflow, please let us know via the Feedback Assistant at https://feedbackassistant.apple.com. Any recommendations on using simulator or writing tests for AR apps? I couldn't find a way to effectively test my app using simulators. We have both 2D UI written in SwiftUI and UIKit, as well as 3D UI in Scenekit. Would be nice to be able to still iterate on the 2D UI using simulators! thanks :) AR requires the use of specialized camera hardware that is not present in the simulator, so AR cannot be simulated. You will need to test your AR-based UI on-device. When we changed our CI to GitHub Actions we started having issues with some simulators while running tests. Apparently sometimes (it seemed at random) when launching the simulator this would try to do some kind of \"synchronisation\", and it would stay idle for a few minutes, this, before running tests. Is there a way to avoid this 'synchronisation' to happen? PS: apologies in advance if you think this is related to the CI provider and not the simulator itself. Hi there and thanks for the question! I think we'll need some more information from you to help triage this further. Could you please submit a bug report via http://feedbackassistant.apple.com so that we can investigate this. Please run xcrun simctl diagnose and attach the output to the feedback issue you report. Also, I think this might be an excellent opportunity to request a lab appointment with one of our Simulator engineers. It would be good to have time to go through what you're seeing go wrong and when, and what options we can come up with together to make this work better for you. Please visit https://developer.apple.com/wwdc21/labs , search for Simulator in the \"Search WWDC21 labs...\" field, and request an appointment. It would be really helpful if you mention the feedback number that you filed in the notes for the lab request. Thank you!! I believe issues like this occur in CI systems where \"fresh\" hosts are instantiated for each job. I've observed performance issues due to update_dyld_sim_shared_cache running after booting a simulator for the first time \u2014 which on CI tends to coincide when attempting to run a test suite. Thanks for the follow-up! I think it might still be helpful to request a lab appointment with one of our Simulator engineers to talk through the issues here. It\u2019s difficult to recommend a good solution without having a better understanding of all the issues. :) If the bottleneck you\u2019re seeing is resource constraints because the dyld shared cache is being built at the same time as your tests are running, you could try adding to your CI scripting to build the dyld shared cache first, allow that to complete, and then run your UI tests after. You can do this by running xcrun simctl runtime update_dyld_shared_cache . Please note that this command is not currently documented externally and is subject to change. If this command is helpful to you, please file a Feedback Report and ask for this functionality to be made more broadly available. If it would be helpful to have a flag for xcrun simctl boot which changed the behavior to wait until the shared cache is generated before booting the device, please file a Feedback Report for that as well. Again, it\u2019s hard to make a good recommendation without a full understanding of the problem you\u2019re trying to solve, and the best way to do that would be to request a lab appointment as mentioned above. Hope this helps!! The Simulator menu offers an entry to set a Custom Location (Features > Location > Custom Location\u2026) Is there an equivalent for this in simctl ? Unfortunately, there is not a way to do this via simctl at this time. Please file a feedback assistant report via http://bugreport.apple.com as this would be a great addition to make in the future. I remember from some past WWDC session that the Simulator uses macOS's version of Core Animation, not the same CA stack that runs on the device. Is this still true, and if so, are there any documented differences we should be aware of? All recent versions (definitely iOS 5+ but possibly back to iOS 4) of the iOS simulator runtime have provided a version of CoreAnimation built from the same sources as the corresponding version for devices. Prior to the introduction of Metal support in the simulator, CoreAnimation went down a software rendering codepath. Since the introduction of Metal in the Simulator, CoreAnimation now uses the Metal rendering codepath for improved performance. Any difference in behavior would be considered a bug, so if you notice anything unexpected, please file a report via Feedback Assistant at http://bugreport.apple.com I started playing with an M1 recently, I haven't try it but is it possible to compile the app for a device (arm64) and use that build to run it in a simulator (arm64)? This could give us some advantages as being able to distribute the app to devs iphones and at the same time run the tests in a simulator by building only once Thanks for the question! The answer is no; this isn\u2019t possible. Even though in your case both the device and the simulator have the same architecture, they are different platforms because Simulator runs in macOS. As a result the builds are not mutually compatible. Now that we have Apple Silicon, are the iOS binaries running on the Simulator (e.g. launchd, Springboard) the exact same binaries as on the device? No, applications built for the Simulator are built against the Simulator SDK, which does not support exactly the same set of features and functionality as our devices support. So apps built for Simulator can't run on a device, nor the other way around. I often get this error \"Could not find module 'RealmSwift' for target 'x86_64-apple-ios-simulator'; found: arm64, arm64-apple-ios-simulator\" whenever I use Cocoapods. I'm on an M1 mac. I've tried solutions like this one: (https://stackoverflow.com/a/58192079/14351818), but they sometimes work and sometimes don't. I've added arm64 under Excluded Architectures too, and added a script to the Podfile from here (https://stackoverflow.com/a/63955114/14351818). Any tips? It is likely the pods you're trying to use are not configured to work with the simulator you want to use, or the CocoaPods technology itself is not simulator-aware. I would recommend reaching out to the developers of the specific pods you want to use. Do we have any simulators for macOS testing? (to cover scenarios like touchID or clamshell for automation) No, the Simulator does not support simulating macOS or Mac hardware features. You may find that virtualization software from third parties can help you with your testing. So Xcode cloud also will use actual devices where we would run our CI? Xcode Cloud uses the same macOS build worker to run your tests as the build worker that builds your code Is Xcode Cloud built on the \"configuration as code\" principle? Meaning: Will we be able to have different configurations in different branches, akin to GitHub actions or Azure DevOps YAML-based approaches? Hi there - All of your workflow configuration is stored on the server and not checked into your repository. That being said, you can create workflows that will only start builds for specific branches or branch patterns and use specific settings (macOS & Xcode version, environment variables, etc.). What Xcode cloud uses, actual devices/simulator/virtual machines? Great question! Xcode Cloud runs your iOS, tvOS, and watchOS tests on simulators, and your macOS tests on the same build worker used to build your code. Hi, nice presentations all! Can you confirm that Xcode Cloud will ONLY support Bitbucket, GitHub, and GitLab, both in cloud and on prem, but nothing else? Specifically, I have a bare git repo on my local network that I would like to use as my source code repo for Xcode Cloud. Is this possible? Yes - Xcode Cloud only supports cloud and on premise instances of GitHub, Bitbucket, and GitLab. It doesn\u2019t support bare git repos on local networks. Hello! In our current CI we check what changes the pr is doing and analyze our dependecy tree to find out which test bundles should run, then we use -only-testing args in xcodebuild cmd to filter them, is it possible to do so with Xcode Cloud? Hi! You can probably get something like that working by using a combination of a post-clone script, which does the analysis of the changes in the git commit, and then generate a scheme/test plan that dynamically has only the tests you want to run Hey! Yesterday on a previous question I asked about API availability, Richie mentioned that we\u2019ll have a REST API during this summer :partying_face: I have a follow up question about this though, will we be able to trigger a certain workflow from an API call while this workflow doesn\u2019t run on any git event (pr, tag change, commit, scheduled event, etc.). Basically, we want to control part of our release process from our custom Jenkins orchestration (that we have today) and trigger some of the workflow tasks on demand from there. Thanks! While we can't commit to the shape of the API right now, I think it will be a pretty common use case and a valid expectation to have w.r.t Xcode Cloud's public API. Can Xcode Cloud provide any support for Developer ID workflows? Either complete products or re-signable ones? Hi! Xcode Cloud will code sign macOS builds with Developer ID, and for the Mac App Store When can we expect invites to Xcode Cloud after submitting a request? Thanks for the question Edward! We\u2019re all excited about Xcode Cloud and we want to make using it the best possible experience. We'll be gradually adding users throughout the summer and fall. Account holders will be notified by email when your team is accepted. Beyond the obvious fact that Apple is handling the server setup and maintenance, are there any features of Xcode Cloud not available on Xcode Server? Hi! Xcode Cloud is a totally different product from Xcode Server, with many differences and improvements over Xcode Server. I'd recommend looking at the documentation if you're interested in specific features. Does Xcode cloud also support dependencies from private repositories? I.e. the project having private Swift framework dependencies that are hosted on GitHub privately or even on a local GitHub server. Definitely! This is covered by today's session \"Customize your advanced Xcode Cloud workflows\": https://developer.apple.com/videos/play/wwdc2021/10269/ In our current CI we need to use internal metrics endpoints behind a vpn so our secops team exposed en external endpoint and ip whitelisted it so we can access it, is Xcode Cloud infra will have a fixed public ip range so we can do the same? Hello! Yes, there will be a fixed IP range for all egress from Xcode Cloud. Over the summer details will be published in the documentation. If your git repo is in GitLab self hosted, because you want the source code to be secure and not hosted in the cloud, what happens to the source code during the Xcode Cloud CI/CD a process - is it transmitted to your servers encrypted? How long is the source kept on your servers after compilation and deployment? Xcode Cloud will securely clone your repo from your GitLab instance. Your source code is kept on the build worker for the duration of the build, then the build worker (and your source code) is immediately discarded Hi! I love what I have seen so far. Thanks for the hard work. In our company we rely heavily on Artifatory for our mobile builds. Some of the interactions we have require authentication via .netrc file configuration. Is this something that we will be able to achieve in Xcode Cloud ? Thank you! Glad you like it! I'd recommend looking into the custom scripting and environment variables documentation (and the Advanced Skywagon session). You could generate a .netrc file in a script, populate an access token from a secure environment variable. We have precompiled binaries (XCFrameworks) that swift package manager downloads from an private server. The package manager authenticates using a .netrc file. Would I be able to securely provide a .netrc file with the proper credentials to Xcode Cloud so it can fetch these packages? Xcode Cloud will no generate .netrc files for you, but you can create your own as part of a custom build script. For example, you could create the file in a ci_postclone.sh file and use a secret environment variable to store the token you want to use. Both custom scripts and (secret) environment variables are covered in today's session: https://developer.apple.com/videos/play/wwdc2021/10269/ Will Xcode cloud require that we push the app including the framework dependencies added by swift package manager or cocoapods? Hi! Xcode Cloud requires the source of you app, and any non-binary dependencies to be available in the build environment. Xcode cloud is great for CI, would be eventually be able to avoid building locally and get the built products from the build servers? Xcode Cloud is built specifically with CI in mind. Having said that, you can download all artifacts produced from each build. We are currently building in our CI using Macstadium + ORKA, which adds a virtualisation layer. We can deploy VMs with different CPU configurations depending how time critical the task we need to perform is (e.g. PRs have faster machines for better developer feedback, release builds work in slower VMs because we are not in a rush). Will something similar be possible with Xcode Cloud? Great question! Xcode Cloud was designed so that developers no longer have to maintain a CI build environment configuration Is it possible to configure a workflow to skip certain commits (e.g. we use [NO-CI] prefix in the commit message to have our Jenkins ignore a it) That's not something that's supported right now but that's a great idea! Can you please file a feedback about this? We will able to select the stack? For example M1 over Intel computers, we noticed M1 has a huge impact in compilation time Xcode Cloud was designed so that developers no longer have to maintain a CI build environment configuration. In our CI we do commits (e.g. to bump the version and build number of the app) and push it to the repo. Will we be able to commit and push from Xcode Cloud from the scripts? Xcode Cloud will actually manage the build number (CFBundleVersion) automatically for you - so likely you won't need to do those kinds of pushes. However if you do need to, you can add a custom script that calls various git commands - which will then trigger another workflow I have a follow up question for this one. Will Xcode Cloud provide an option to somehow format the build number? That's not something that's supported right now but that's a great idea! Can you please file a feedback about this? Does Xcode Cloud run tests on devices or simulators? Thanks for your question. Xcode Cloud runs tests on simulators. Can we set baseline metrics for performance tests from Xcode cloud? You\u2019re not able to set baseline metrics for performance test, but please file a request through feedback assistant! Would Xcode Cloud support beta versions of Xcode ? Totally! You can configure a workflow to use a specific version of Xcode (including betas), or always use the latest version available (including betas). Does Xcode Cloud work for Enterprise Accounts? To use Xcode Cloud, you need to be enrolled in the Apple Developer Program. https://developer.apple.com/documentation/xcode/requirements-for-using-xcode-cloud Would Xcode cloud support build systems like bazel? Xcode Cloud supports custom build scripts, so you can run bazel commands if you need to build additional tools as part of your build process. Currently we create alpha builds for QA on a regularly basis using an Enterprise certificate. We distribute the alpha builds using Bitrise. On every alpha release we notify QA via a slack channel and they get a short description of the release, a download url as text and QR code (to ease installation from device). Would I be able to have the same flow using Xcode Cloud? And would I be able to distribute enterprise builds via TestFlight? Hi! You can definitely achieve this workflow with Xcode Cloud - in fact we expect it would be significantly easier. You can set up a workflow that deploys to an internal TestFlight group representing your QA team (and also notifies in slack). They can then install the build through the TestFlight app. You don't need to worry about Enterprise signing to do this Will app extensions be supported in any capacity when building apps on iPad? Swift Playgrounds 4 supports making apps for iPhone and iPad, in addition to the playgrounds and playground books already supported by Swift Playgrounds. Thanks! Specifically, I'm curious about whether any app extensions, action or intent extensions for example, might be available to include in the initial version of the new project type, or if it will be limited to just \u2018standard\u2019 apps without these kind of features for now? :slightly_smiling_face: Those are some awesome ideas! We don't have any specific plans to support that this year but we encourage you to file a Feedback to state your support for those features. When building on iPad, will it be possible to install apps to the iPad homescreen locally? Or might this require a baseline of submitting through Testflight? Great question! If you want to install the app you're making in Swift Playgrounds to your device, you can sign into your developer account and submit the app to TestFlight and then install it on your iPad or other devices using the TestFlight app. Is Swift Playgrounds expected to only support SwiftUI, or will it be open to other frameworks like UIKit and 3rd party frameworks? Swift Playgrounds supports both UIKit and SwiftUI. SwiftUI Previews requires a SwiftUI app, but you can always use UIViewRepresentable to show UIKit content in SwiftUI. Thank you! To follow up on this, what is the planned support for 3rd party frameworks? Will it be possible to use say, Snapkit? Playgrounds supports working with Swift Packages. SwiftUI Previews (which is in Swift Playground 4) allows you to preview SwiftUI content. To use something like SnapKit you'd have to use it with UIKit and use UIViewRepresentable I'm very excited for the upcoming features to enable building apps on iPad, but details in the main Keynote were very light. Is there anywhere I can learn more, and are you able to answer questions on it? At this moment, the available details are available at the State of The Union video https://developer.apple.com/wwdc21/102 at 0:33 I\u2019m sure you\u2019re getting this question a lot - any word on when a Swift Playgrounds 4 beta will be available? :smile: So excited to try it out! Swift Playgrounds 4 will be available later this year. Is it possible to import SPM packages into Swift Playgrounds? That would be really helpful in using Playgrounds as a tool to build more richly featured apps without having to traverse over to Xcode. Yes! The apps you build can depend on publicly-available Swift Packages. Hmm.. so I won't be able to use my internal (non-public) Swift packages when building on iPad? At this time, we do not plan to support packages that require authentication Will iPhone and iPad be the only devices supported in the next version of Swift Playgrounds when building Apps, or will developers be able to build for watchOS and macOS as well? Apps built using Swift Playgrounds are universal, so when they\u2019re distributed using TestFlight or the App Store, they\u2019ll run on iPhone, iPad, and Apple Silicon Macs. To build and deploy to the AppStore from iPadOS using Swift Playgrounds, do you need to be a subscriber of Xcode Cloud? Nope! Anyone with a developer account will be able to submit their apps to TestFlight and the App Store. Hi! Will Swift Playgrounds 4 for iPad have the ability to add dependencies on third party Swift Packages? Yes! The apps you build can depend on publicly-available Swift Packages. What does the workflow look like if you wanted to work from Mac to iPad or vice versa? Is it all iCloud synced or will it connect to Github/Gitlab/other Git syncing services? Swift Playgrounds already works great with iCloud Drive (or any other file provider extension) and will continue to do so. We don't have anything to announce at this time about other mechanisms. Will I be able to see what my app looks like on different device sizes and orientations from within Swift Playgrounds? Yes! You can take your app preview fullscreen, and put Swift Playgrounds into split-view multitasking to test a bunch of different configurations. You can also write custom Preview Providers to try even more layouts and configurations. Will folks be able to open existing Xcode projects in Swift Playgrounds 4, or will a project have to be migrated to some sort of .playgroundbook ? Swift Playgrounds 4 has a new project format based on the Swift Package format. Can you edit this format in Xcode without conversion? So you can start working on a app in Xcode and then continue on iPad and vice versa? Yes! App projects can be moved seamlessly between Swift Playgrounds and Xcode, so you can work on whichever device you prefer. It was mentioned I think that Playgrounds apps destined for the app store could be brought over to Xcode, can it go round trip back to Playgrounds? Especially wondering if you could use Xcode to define storyboards or data models to use, and bring those into Playgrounds. Thanks for the great question! You will be able to open Swift Playgrounds projects in Xcode since they're based on the Swift package format! Note that Xcode has more tools than Playgrounds will be able to support. If you end up editing the Playgrounds project in Xcode in such a way that won't be supported by Playgrounds, you'll see a warning in Xcode. Any plans for further playground books like Cipher? The existing content is brilliant, as were the sessions on Swan's Quest last year. The additions like Sensor Arcade and the accompanying templates are inspirational, especially in the classroom... We\u2019re so glad you like the content! We haven\u2019t announced anything about that. Stay tuned for future updates! Will Swift Playgrounds have any kind of simulator, or are SwiftUI projects running as previews? Howdy! Swift Playgrounds projects will allow you to make iOS apps with the SwiftUI lifecycle \u2014 you'll be able to see your app running in Playgrounds, and you'll be able to create preview providers to preview specific views. What frameworks are unavailable in Swift Playgrounds created apps? Howdy! While we can't go into details about what frameworks Swift Playgrounds will or will not support \u2014 I'm curious about what you're hoping to achieve! Feel free to respond in a followup or please send us feedback for your hopes, dreams, and expectations! Is the MacOS version of the Playgrounds app actively being maintained? Should we expect it to be able to build apps as well? For this year, we focused on bringing support for building apps to iPad. Does Swift Playgrounds 4 support multi-window/scenes? i.e. Can I have my editor as one full screen scene and use slide over for my preview? Additionally, does it have support for a secondary display (AirPlay/USB) to go along with multiple scenes/windows? We're excited to hear about the ways you want to use Swift Playgrounds! We'd love to have folks send us their desires and expectations via feedback! :) What are the requirements for Swift Playgrounds? Can you build apps on a 2018 (A12) iPad Pro for example? You'll be able to build apps in Swift Playgrounds on any iPad running iPadOS 15! Will it he possible for a xcode project to be opened in swift playgrounds? And for a swift playground in xcode? Projects in Swift Playgrounds 4 are built on top of the Swift Package format, and they work great in Xcode. If you make a change to your project in Xcode, and Xcode knows that it won\u2019t be compatible with Swift Playgrounds, it will show a warning. Are there any common app capabilities that I could create using SwiftUI & Swift on Xcode that I would not be able to create in Swift Playgrounds? Or Apple Frameworks that I could not use in Swift Playgrounds? Swift Playgrounds 4 will have wide support for Apple\u2019s SDKs. We believe some truly powerful apps will be built with Swift Playgrounds 4, and it will be easy to bring your projects into Xcode when you need more power. The State of the Union discussed moving an app project from Swift Playgrounds 4 on iPad over to Xcode on the Mac. Will this be possible in the reverse? Can I edit the project in Xcode and then bring it back to Swift Playgrounds? Hi Greg. Yes the new project format will allow for editing the project in Xcode and bringing it back into Swift Playgrounds! Can we release to the app store from playgrounds today? To adhoc distribution? Do we need to wait until something comes out of beta before this flow works? Thank you. Building apps, including submitting them to the App Store, is new in Swift Playgrounds 4. Swift Playgrounds 4 will be available later this year. What are some neat benefits of writing and running full iOS/iPadOS apps on iPad that may not be immediately obvious without having experienced using the app? This is an incredible question! Making iPadOS apps right on the iPad is an incredible experience. It's easy to get a feel for how your app will behave as a part of the amazing iPadOS system experience like when in fullscreen, a multitasking split size, and in slide over. You can test out how your app responds to a software keyboard present and how it changes when you attach a hardware keyboard. You can check how your UI responds to hover effects with the trackpad, and you can test out great gestures right in the canvas with your finger(s)! We're so excited to see what y'all come up with when working in Swift Playgrounds 4. If any of these things spark inspiration or excitement about Playgrounds, we'd love to hear your desires and expectations via feedback! Might external display support be considered for preview rendering at various device sizes, to reserve more screen space for code? That's an awesome idea! Please file an enhancement request through Feedback Assistant: https://developer.apple.com/bug-reporting/ Might the upcoming Playgrounds release include support for find & replace, or refactoring? Renaming variables, or indeed any declaration, can be quite painful without it. Or if you can't comment - are there any good workarounds for this currently? These are some awesome feature ideas! While we can't comment on plans for the future, we highly encourage you to submit an enhancement request through the Feedback Assistant: https://developer.apple.com/bug-reporting/ Will Swift Playgrounds support all the latest new technologies Swift 5.5 is introducing ? (Async/Away, Actors...etc) Yes! Swift Playgrounds 4 will ship with the Swift 5.5 compiler, including support for structured concurrency. Does Swift Playgrounds support using packages with Swift Package Manager? For example, using a networking library when building a SwiftUI app on the iPad. Yes! The apps you build can depend on any publicly-available Swift Package. You are specifically saying \u201cpublicly available\u201d. So I assume there will be no support for signing into a GitHub account for example, or to provide SSH credentials for a non-public repository at the beginning, right? That's correct\u2014at this time, we do not plan to support packages that require authentication. What kind of apps can be created and submitted to the App Store? iPad and iPhone only? Or macOS apps as well, even if only through Catalyst? Apps built using Swift Playgrounds are built universal against the iOS SDK, so when they\u2019re distributed using TestFlight or the App Store, they\u2019ll run on iPhone, iPad, and Apple Silicon Macs. \ud83d\uddd3 Thursday What are best practices for including and managing a lot of Swift Package dependencies in a project? Adding them to the project file doesn't scale well after more than a handful. I believe this WWDC talk is a great resource for Swift Package Management Best Practices: https://developer.apple.com/videos/play/wwdc2019/408/ So excited about the Vim keybindings (I have waited more than a decade for it!). Does the team have a plan for supporting a richer set (repeat command (.), replace command \u00ae, macros, \u2026) Good morning, and thanks for taking the time to ask this question! If there are suggestions or features your would like please submit them using the feedback assistant on https://developer.apple.com/bug-reporting/ I am seeing that sometimes Xcode 13 cant opt+Click on symbols can't find quick help. It works on some frameworks methods, but not on class properties and methods, and frameworks from cocoapods most of the time. The same click worked in Xcode 12. I can't attach a screenshot to the question haha. That sounds like an issue we'd like to investigate further. If you can reproduce it, would you mind filing a bug report using feedback assistant? If you can run Xcode with some logging enabled, it would help us understand it better. Try running Xcode from Terminal like this, env SOURCEKIT_LOGGING=3 /path/to/Xcode.app/Contents/MacOS/Xcode , and then reproduce the problem by opt+clicking the symbol. If you can also provide a screen recording demonstrating the problem, it would help. Are you taking xcodebuild questions? :) If I try to create an xcframework ( xcodebuild -create-xcframework ... ) that contains both Intel and ARM simulator frameworks I get the error Both ios-arm64-simulator and ios-x86_64-simulator represent two equivalent library definitions. Has this been fixed in Xcode 13? It sounds like you have two separate thin (single-architecture) binaries, one for each arch, but both for the simulator. XCFrameworks don't support that; there needs to be only a single multi-arch binary. You can use the lipo tool (which is what Xcode uses) to combine your binaries if you're not using Xcode to build the product already. Does the new Xcode PR review feature supports a strategy with forking? So far I can only create a PR that points my fork's main branch, not the original repo of my fork. Xcode\u2019s pull request feature doesn\u2019t work with forked repositories. It doesn't support submitting pull requests to an upstream repository. When you create a new project using the iOS App template, and select SwiftUI for the interface, there is no more Info.plist file. Instead, I can find it inside Project -> Targets -> Info. However, how can I access the file's XML source code? You should still be able to find the Info.plist file in the project directory under: <Project Root Directory>/<Project Name>/Info.plist . From there, it can be edited with your favorite editor, including Xcode. It can also be opened quickly in Xcode by using Cmd + Shift + O and searching for Info.plist. Our repo doesn't commit in the .xcodeproj but generates it locally on the fly. Does Xcode Cloud support a case when a project is generated or modified in the post-clone script? Yes. Bear in mind that creating your first workflow with Xcode Cloud happens from Xcode. It analyzes your project locally, suggests a configuration to quickly create you first workflow. In the scenario where you do not check in your Xcode project file, then these are the adjusted setup steps: You need to generate the Xcode project file locally. To exclude it from your repo, you could add a .gitignore rule. Add the add Xcode project generation to post-clone script. Create first workflow from Xcode. Create first workflow from Xcode: https://developer.apple.com/documentation/xcode/configuring-your-first-xcode-cloud-workflow Post clone script: https://developer.apple.com/documentation/xcode/writing-custom-build-scripts Is there a way to quickly mark a Swift (SPM) Package for editing in Xcode 13? (Similar to how you can swift package edit at the command-line), or is it still required that I separately clone the package, and drag it into my project? The workflow for this remains unchanged from previous versions of Xcode. How did the team prioritize which new features to build vs which features to work on later? One of the many considerations we take into account would be what we receive from Developers via the Feedback application. Please send us your suggestions \u2014you can send those with the Feedback Assistant. https://developer.apple.com/bug-reporting/ Creating a new project with Xcode 13 doesn't show up the Products directory in the Project Navigator, is it possible to add it back per project or globally? The Products directory will no longer be shown by default in newly created projects, as you noticed. You can still get to the directory with your build products by using the new Product -> Show Build Folder in Finder menu item. If there is a reason why you would want to always show the products directory in the project navigator, we'd love for you to file a Feedback via Feedback Assistant to explain your use case. https://developer.apple.com/bug-reporting/ What powers Xcode's new Swift syntax highlighting? It looks very similar to the semantic highlighting recently merged into sourcekit-lsp! If sourcekit-lsp is being used, will future improvements be available in Xcode too, and will Xcode's features (like live issues) be available in sourcekit-lsp at some point? Xcode 13 has a brand new syntax highlighting implementation for Swift, which is optimized for performance. This is unrelated to sourcekit-lsp. If you see any issues, please report feedback: https://developer.apple.com/bug-reporting/ What is recommended option of adding SPM dependency from private GitHub repo? Am I right, that for Xcode it is https:// url accompanied by Xcode GitHub account? Question: if I need to connect two private repos from GitHub, and one uses account1, another uses account2. How to specify, what account to use with what repository? You're correct that when using privately hosted packages in Xcode you'll want to be signed into your source control account(s) (in Preferences \u2192 Accounts). Authentication should be handled automatically and should choose the correct account for each package. If you run in to any issues, we'd really love to hear about it via Feedback Assistant. :bow: What is the simplest way to view a diff of changes to the documentation? Sometimes I'll find on Twitter from an Apple engineer or writer that particular docs have been updated, but I'm curious if there's a more consolidated and comprehensive way to find docs updates. I checked in with the documentation team on this \u2013 while it's possible to view a diff to see what changed for individual APIs, there is not currently an overarching view that would show all the diffs between two versions. If that's something you'd find useful, please do submit that feedback via feedbackassistant.apple.com for the documentation team to look into! Given that the legacy build system is deprecated, we're still noticing that the new build system is slower to run a build than the old one. We're very sensitive to build performance -- currently a roughly no-op build with the legacy build system is roughly 60s on a recent Mac Pro with our codebase and considerably less than that on legacy. Any optimization tips would be greatly appreciated! Also - a lot of this is spent in the build planning step -- are there plans to cache or reduce build graph evaluation in the future? Let me know if filing a radar/feedback is useful. Task planning should only re-run if something in the project structure has changed between builds; when doing (for example) an immediate no-op rebuild, this shouldn't happen. Please file a bug report. If you can attach a sample project which reproduces the problem, that would help, as I suspect there's something in the project structure which is triggering this. Do you have any general guidance for writing useful Feedback Assistant reports for Xcode? For example, is it a good idea to make bug reports isolated and minimal in an Xcode playground? We have some great tips for filing bug reports using Feedback Assistant here: https://developer.apple.com/news/?id=vvrgkboh Yes, it is an excellent idea to create a minimal scenario that shows your issue. Screenshots and a sysdiagnose also help us investigate the issue. We really do read every one of your bug reports too so as one of the folks that reads those, I just want to say thanks for asking this question! We really appreciate those reproducible, actionable bug reports! How is your experience using Xcode to work on Xcode? It\u2019s definitely a very \u201cmeta\u201d experience to write code for new functionality in the Source Editor \u2026 in the Source Editor. Or to debug Xcode using Xcode. Honestly, you sometimes loose track of which one you are working in and which one your are debugging. We can also profile Instruments with Instruments by the way. So it\u2019s definitely fun to build the tools you are working with every day. It\u2019s not as fun to break the tools you are working with every day. Luckily, we\u2019ve been using Xcode Cloud with the Xcode project to make this less likely! Why doesn't the new HTTP Traffic Instrument work with the simulator. Is this a limitation that might be fixed in a future beta? Thank you for your feedback; it's a known issue in Beta-1 that we are investigating, as the feature is is intended to work in simulator. How does the team decide if a particular subsystem of Xcode should be open source for community contributions? Also, do you have any tips for getting started contributing to aspects to tooling on Apple's GitHub (perhaps low-hanging fruit)? For the Swift project, we have some bugs tagged as \"starter bugs\". Suitable for new contributors, some even if you have no experience with compilers! https://bugs.swift.org/browse/TF-67?jql=status%20%3D%20Open%20AND%20labels%20%3D%20StarterBug%20AND%20assignee%20in%20(EMPTY) Is there any way to cache Swift Package Manager dependency builds? This is one of the longest steps in our current build, especially on CI. We cache the checkouts for them, but being able to cache SPM builds would save a lot of time! Adding clonedSourcePackagesDirPath to your xcodebuild flags should help you point CI systems to already downloaded packages. There are Swift Package Manager Office Hours starting today at 3pm and it might be a better forum for this question. What does ALLOW_TARGET_PLATFORM_SPECIALIZATION + SUPPORTED_PLATFORMS actually do? Can I build XCFramework fro macOS/iOS/tvOS with one xcodebuild call? SUPPORTED_PLATFORMS defines the platforms a target supports building for. For example a framework target which can be built for either iOS or watchOS. ALLOW_TARGET_PLATFORM_SPECIALIZATION allows a target to build for multiple platforms in a single build. For example, building an iOS app with an included watchOS app, both of which depend on that framework, so the framework can be built for both platforms. But XCFrameworks still need to be built with a separate xcodebuild invocation. Is there a way to create our own file templates for adding a new file to a Swift Package Manager module? The existing templates don't include substitution templates, so they require modification (i.e. replacing SwiftUIView in both the View and the PreviewProvider) before they're as useful as their standard Xcode New File equivalent templates. There's currently no way to customize new file templates (but, as ever, if you'd like to see this happen please file Feedback!). Generally, creating a new file in a package from within Xcode (e.g., \u2318n while your package is selected in the Project Navigator) should bring up the same New File template pane as you would see for a project. If you're seeing something else or if this doesn't meet your expectations, we'd love to hear about it. Is there some way to download Xcode using the App Store Connect API and the keys that it generates ? This would be super useful in automated workflows to setup CI machines with Xcode. While there are solutions like Configurator and Remote Desktop that allow you to install apps from the Mac App Store, including Xcode, there is not a way to install Xcode through the App Store Connect API. It sounds like the best solution for your situation would likely be to utilize Xcode available as a download in XIP format from developer.apple.com/download How does Xcode Cloud work for projects that make use of multiple developer accounts? For example, we have one enterprise account for development and beta builds, and then a separate developer account for our App Store builds. Would we be able to share configuration between these two accounts or will they have to be separate? You cannot share data between different Developer Program accounts, all accounts are private and secure as you would expect. Also Apple Developer Enterprise Program accounts are not supported in Xcode Cloud at this point in time. In ObjC projects where headers haven't changed, how can we debug unexpected full/near-full rebuilds for Debug? If you think this could be a bug and you can attach a reproducible case, please file a bug report. That said, you can set a user default: defaults write com.apple.dt.XCBuild EnableBuildDebugging -bool YES which will dump Intermediates.noindex/XCBuildData/BuildDebugging- directories containing trace files (which are text files despite the file extension) which have the low-level dependency analysis that the build performs. There is not tooling for processing these files, but they might provide some insight into your situation. Important: You should delete this user default when you've collected the data you want, as enabling build debugging can affect build times. It's not intended to be left enabled all the time. What was the reasoning behind having the HTTP Request monitoring in Instruments vs the Activity Monitor in Xcode? It would've been cool to not have to intentionally run and setup Instruments to have that working. I assume you are referring to the debug gauges in the Debug navigator. We do already show the \u201cNetwork\u201d activity. However, the HTTP Traffic instrument shows very detailed information that wouldn\u2019t all fit into the the existing debug gauges. There are many different ways to visualizes network activity and even the HTTP Traffic instruments provides several ways to visualize your activity. However, if a specific summary view about HTTP traffic would be really helpful to you in the Debug Navigator within Xcode, please file a Feedback to describe what you would like to see there. https://developer.apple.com/bug-reporting/ Has the team ever considered allowing Xcode to send macOS notifications - for example when tests pass / fail ? After tests finish, if Xcode is not the frontmost application, it posts a macOS notification describing whether testing succeeded or failed. Beyond testing, Xcode includes a flexible feature called Behaviors which allows you to opt-in to receiving notifications when various events occur during your development workflow. For more details, see https://developer.apple.com/library/archive/documentation/ToolsLanguages/Conceptual/Xcode_Overview/CustomizingYourWorkflow.html MacOS build worked on xcode cloud, are these Apple silicon devices or Intel based? or can we select? Xcode Cloud builds universal binaries, just as Xcode does on your local Mac, that are compatible with all Macs. For more information about Universal Binaries, please check the developer documentation here: https://developer.apple.com/documentation/apple-silicon/building-a-universal-macos-binary My team produces a number of software components, and we've recently switched from packaging them as static frameworks to XCFrameworks. Xcode doesn't have a target type for producing XCFrameworks (please tell me that I'm wrong!), so that packaging happens in a post-archive script. When we were just producing static frameworks, we could drop several of our projects into a common workspace and it was easy to debug right into each of those frameworks -- Xcode figures out that since the Foo project builds the Foo framework, other projects in the workspace should link against that. We'd really like to do the same thing with our XCFrameworks, but they don't seem to be supported as well. Is there something we can do to debug into our XCFrameworks when their respective projects are all in a workspace together? Thanks for reaching out! XCFrameworks are not intended to be used during development if you're a team that produces them. From your perspective, they should be used only for distribution. For development, you should use dynamic framework targets and then link them into your executable that you'd like to debug. For more information on multi-platform frameworks, we suggest to watch \"Explore advanced project configuration in Xcode\" WWDC Session, which is set to be released on Friday: https://developer.apple.com/wwdc21/10210 Please let us know if you have any follow up questions or thoughts! With Vim mode, can you support \u201cV\u201d to visual select lines? FB9145839 It looks like you already submitted the request via feedback assistant. Thanks for doing that, it's the best way to let us know of any enhancements you'd like to see. When are we going to see TestFlight beta user crash report with the user information? It helps a lot when we receive a bug report from the user and find the stacktrace of the crash. In Xcode 13, the Crashes Organizer will show you feedback from TestFlight users of your app, including user information like name and email address if the user chose to provide it. In addition, you can view feedback and download the crash log directly from App Store Connect. Xcode Cloud looks great. Has the team (or others in-channel) tested it with Fastlane-based CI workflows to date ? Xcode Cloud is designed to automatically build, test, and prepare your app for TestFlight and the App Store. And should you need to install additional third-party tools to accomplish other tasks, then this can be done using Custom Build Scripts. You can learn more about extending Xcode Cloud here: https://developer.apple.com/documentation/xcode/writing-custom-build-scripts We built SDK for our clients, not an app and have several semi-independent components. I want to understand what would be ideal way to distribute our SDK as XCFramework where it depends on our two other internal static libraries. But out of one we need to distribute one dependency as dynamic framework mainly as XCFramework moving forward. SDK is mix of Objc and Swift. Existing Structure SDK - Distribution as Dynamic FAT Framework. SDK has dependency on StaticLibrary1 and resources which are brought using cocoapods - whose public API needs to be available as part of SDK public interface. SDK contains StaticLibrary2 - whose public API needs to be available as part of SDK public interface. End goal is to distribute SDK as XCFramework. Should we distribute other dependency as XCFramework as well and integrator needs to bring all those three in order to utilize our SDK An XCFramework can be used to distribute a framework for multiple platforms in a single bundle, but XCFrameworks don\u2019t provide any support for distributing an SDK; you still need to distribute a single XCFramework for each framework you\u2019re distributing. Xcode doesn\u2019t provide support for constructing SDKs like you\u2019re distributing; you would need to provide guidance to your users to use the frameworks you're providing to them. Xcode Cloud: can it produce signed Developer ID Mac apps? Two answers in this channel conflict (one said only App Store, the other said yes Developer ID) Great question! Xcode Cloud does not support Developer ID-signed Mac apps. It supports Development and Mac App Store signing. I encourage you to submit a feedback request for any enhancements you'd like to see in the future! Will it be possible to be notified by email when a user submits a feedback(with a crash)? That is great feedback! Please submit an enhancement request with details about what you'd like to see via Feedback Assistant. In Xcode Organizer, is there anyway to: See watchdog crashes Search by the stack trace content of a crash See a version's all crashes and not only the top ones There is not a way to see individual watchdog crashes in the Xcode Organizer. However the new Terminations metric in Xcode 13 will show you aggregated data about all types of terminations that customers are experiencing in your app. Searching by the content of a stack trace is not available in the Organizer, but this would be a great enhancement to request via Feedback Assistant! In Xcode 13, you can see up to 1000 of your app's crashes for the past year, so you can view and investigate far more than the top 25 crashes. Do you think Xcode Cloud has value for individual developers, or just teams? Xcode Cloud can greatly add value, even for individual developers. It can easily help you validate the code you write by starting integration jobs that will also run your tests on multiple run destinations (i.e. iOS/iPadOS simulator, Mac Catalyst) in addition to building. This way, you will feel more confident about your work when shipping updates of your App (it also handles code-signing for you). With Xcode Cloud, your project is ready to accept outside contributions without needing to maintain a CI infrastructure. What are some of your favorite tips and tricks for triaging crashes? When I am looking at a new crash in an area I am not familiar with, one of the first things I do is try to understand why it is crashing. Asking yourself questions can also help you get a quick understanding of what kind of crash it is. \"Is it crashing because I made an assumption I shouldn't be?\" \"Is this framework I am using expecting something different than what I am giving it?\" \"Does this only happen sometimes?\" Answering those questions can get you started on understand the crash and then working towards a fix! Using the Organizer's inspector allows me to see how big of a problem it is. It can tell me all about how many devices this crash is happening on, what versions of the OS, and new this year,: where is it crashing (App Store or TestFlight) and which app versions? Our project has multiple build configurations, not just release and debug. Currently with Cocoapods we can have different dependencies for each build configuration. Last time we checked this was not possible with SPM. Has this changed? If not, do you expect this to change in the future? There is a proposal for conditional target dependencies (see https://github.com/apple/swift-evolution/blob/main/proposals/0273-swiftpm-conditional-target-dependencies.md) but this has not yet been fully implemented. Is there a way to only update a single package? If I have multiple packages specifying \"Up to next major\", Xcode will try to update all of them when I run \"Update to Latest Package Versions\" but sometimes I might only want to update a specific one. Not at the moment, but it is something we are looking to make available on both the CLI and Xcode. Hi, SPM is incredible! Does the presence of Playgrounds for iPad mean that we can replace xcodeproj-based projects with SPM-based projects even for non-console apps? Thanks! We're glad you like it! Because projects in Swift Playgrounds are built on top of the Swift Package format, they'll also work great in Xcode when making apps for iPadOS. What's the best method for simultaneously develop an app and its dependent Swift packages? (local development with submodule?) Check out https://developer.apple.com/documentation/swift_packages/editing_a_package_dependency_as_a_local_package If I've got private dependencies from, let's say GitHub via ssh. If they require different credentials, I can use ~/.ssh/config to tie ssh keys to specific configurations. SPM uses that perfectly. But if I put same Package.swift file into Xcode, it does not. Is it possible to make Xcode behave like swift package commands in this case? Thanks! You can configure Xcode to use the system git instead of the builtin one, which is what SwiftPM uses on the command line. See \"Use Your System\u2019s Git Tooling\" in https://developer.apple.com/documentation/swift_packages/building_swift_packages_or_apps_that_use_them_in_continuous_integration_workflows Have there been improvements to checkout times in Xcode 13? We've had to fork many of our dependencies and remove the git history to allow for reasonable checkout times. Starting Swift 5.4, Swift Package Manager caches package dependencies on a per-user basis, which reduces the amount of network traffic and increases performance of dependency resolution for subsequent uses of the same package. This means that while the initial clone may still be slow depending on the repository size, subsequent clones are much faster. This can also be used in CI by configuring the cache location. See https://swift.org/blog/swift-5-4-released/ Is there a way to check to see if there are updates available without installing them, equivalent to pod outdated ? There's not a convenient command to do this yet. As a workaround, you could perform an update, then revert your Package.resolved file to its prior state with your source control system to go back to your old dependency versions. \ud83d\uddd3 Friday What is the recommended practice to run a test case only on the specific OS version? Adding @available(iOS 14, *) directive on the top of class declarations seems not working somehow. The recommended way for this is to use one of the XCTest APIs to skip the test if the required APIs are not available. There is more information at https://developer.apple.com/documentation/xctest/methods_for_skipping_tests Maybe this has been asked, but with the new TestFlight crash logging in Xcode Organizer, will there be a way to integrate this with issue trackers like Jira? Sorry, we don't have the answer to your question in this lab, but, if you haven't already seen it, I would recommend checking out the Triage TestFlight crashes in Xcode Organizer video at https://developer.apple.com/wwdc21/10203 Are there any recommended workflows for using run scripts inside of a Package.swift file? There have definitely been a few times where I've wanted to have my Package.swift file generate things like compiled protobuf models. Thanks! SE-0303 defines new functionality in SwiftPM enabling the creation of structured plugins for code generation. Can Static Analyzer in Xcode 13 find dead code like unused variables and methods? Xcode provides compiler warnings for unused local variables and unused static functions and unused C++ private methods. There are no warnings for unused Objective-C methods because in Objective-C it's a fairly hard technical problem as it's a very dynamic language. The static analyzer provides additional warnings for problems that require deeper analysis such as unused initializations or assignments that get immediately overwritten (\"dead stores\") and redundant if-clauses and operands in expressions (new in this release! - off by default, see the \"Unused Code\" section in build settings). Do Static Analyzer works with Swift? The static analyzer can detect bugs in C/C++ and ObjC code. It doesn\u2019t detect bugs in Swift code. However, you can use the analyzer on mixed Swift-ObjC projects. We recommend running the analyzer on your project if it has C/C++ or ObjC code as some issues the analyzer can detect on ObjC code can manifest as hard-to-find bugs when used from Swift. How big would be the time impact on building with Xcode if I turn ON the \u201cAnalyze During build flag?\u201d Usually we expect 2-5x slowdown. You can set mode for analysis to \"Shallow\", which is generally faster (2-3x slowdown), but finds fewer bugs. Does the Static Analyzer, analyzes the full source code of my project including third party libraries and frameworks? If so, can I configure which frameworks to exclude? This is a great question! The static analyzer will analyze all third party code as long as it's getting compiled when you're building your app (i.e., binary frameworks aren't analyzed) and it's written in a language supported by the static analyzer (i.e. C/C++/Objective-C but not Swift). There is no way to exclude individual frameworks but given that the source code is available, you may have a chance to edit it to suppress unwanted warnings. Is there any point in running on the static analyzer on pure Swift code? If your app has only Swift code, the analyzer wouldn\u2019t find any issues. However, if your project has ObjC code as well, we recommend running the analyzer.","title":"DevTools"},{"location":"wwdc21/DevTools.html#devtools-lounge-qas","text":"","title":"DevTools Lounge QAs"},{"location":"wwdc21/DevTools.html#by-paul","text":"","title":"by paul"},{"location":"wwdc21/DevTools.html#tuesday","text":"","title":"\ud83d\uddd3 Tuesday"},{"location":"wwdc21/DevTools.html#hi-thank-you-for-organizing-this-i-have-a-question-about-ci-in-regards-to-xcode-cloud-i-remember-having-troubles-no-std-output-was-printed-anywhere-running-certain-scripts-in-pre-build-and-post-build-actions-in-scheme-editor-when-i-was-using-xcode-server-bots-back-in-2015-the-question-is-shall-we-rely-on-pre-build-action-for-say-running-things-like-pod-install-and-other-pre-build-setup-wo-which-the-project-cannot-be-run","text":"Xcode Cloud supports custom CI-specific build scripts that are distinct from pre-build action scripts in your Xcode scheme. The logging from these scripts is captured and made available in your workflow results. See some documentation about this here: https://developer.apple.com/documentation/xcode/writing-custom-build-scripts","title":"Hi, thank you for organizing this! I have a question about CI, in regards to Xcode Cloud. I remember having troubles (no \"std output\" was printed anywhere) running certain scripts in Pre-build and post-build actions in Scheme editor when I was using Xcode Server &amp; Bots back in 2015. The question is shall we rely on pre-build action for, say, running things like pod install and other pre-build setup w/o which the project cannot be run?"},{"location":"wwdc21/DevTools.html#will-xcode-cloud-allow-you-to-work-with-a-locally-hosted-on-my-personal-network-git-repo","text":"Xcode Cloud has first-class support and deep integration with both cloud-based source control providers \u2014 GitHub, Bitbucket, and GitLab \u2014 and on-premise source code providers; GitHub Enterprise, Bitbucket Server, and GitLab Self-managed. https://developer.apple.com/documentation/xcode/source-code-management-setup","title":"Will XCode Cloud allow you to work with a locally hosted (on my personal network) git repo?"},{"location":"wwdc21/DevTools.html#first-thanks-for-creating-xcode-cloud-it-seems-so-promising","text":"I watched all the videos so far, I was curious to know if there would be a way to retry particular failed test or not? Xcode Cloud will allow you to re-run a failed job. Which tests get run will depend on how you configured your test plan, and if you enabled a test repetition mode (New in Xcode 13!) in your test plans. Xcode Cloud always respects your test plan/scheme and workflow configuration","title":"First thanks for creating Xcode Cloud it seems so promising!"},{"location":"wwdc21/DevTools.html#would-it-be-possible-to-get-the-dsym-file-from-xcode-cloud-builds-download-dsym-option-is-not-available-on-app-store-connect-if-we-build-without-bitcode-enabled-it-would-be-nice-to-have-testflight-crash-reports-be-symbolicated-and-still-have-access-to-the-dsym-file-to-use-with-other-tools","text":"What I found is that as long as Xcode outputs a dSYM, it will be included in the artifacts. For more advanced workflows, you could use Xcode Cloud\u2019s environment variables with a custom build script to extract symbols from an archive and upload them to a place of your choosing. More specifically, take a look at CI_ARCHIVE_PATH and ci_post_xcodebuild.sh .","title":"Would it be possible to get the dSYM file from XCode Cloud builds? Download dSYM option is not available on App Store Connect if we build without bitcode enabled. It would be nice to have Testflight crash reports be symbolicated, and still have access to the dSYM file to use with other tools."},{"location":"wwdc21/DevTools.html#will-xcode-cloud-be-available-to-teams-enrolled-in-the-apple-developer-enterprise-program","text":"No. Xcode Cloud is initially supported for Apple Developer Program teams. You can read more about requirements on this page: https://developer.apple.com/documentation/xcode/requirements-for-using-xcode-cloud","title":"Will Xcode Cloud be available to teams enrolled in the Apple Developer Enterprise Program?"},{"location":"wwdc21/DevTools.html#will-there-be-webhooks-available-with-xcode-cloud-for-build-test-and-distribute-status-updates","text":"You can find documentation about Xcode Cloud\u2019s available webhooks below: https://developer.apple.com/documentation/xcode/configuring-webhooks-in-xcode-cloud","title":"Will there be webhooks available with XCode Cloud for build, test, and distribute status updates?"},{"location":"wwdc21/DevTools.html#i-have-a-question-around-testing-i-was-trying-to-figure-out-a-way-to-test-scenarios-around-iap-family-sharing-either-in-the-simulator-using-app-store-config-files-or-even-in-sandbox-on-device-i-cant-seem-to-find-a-way-to-simulate-something-like-having-a-purchase-made-available-via-a-family-purchase-made-by-someone-else-or-to-simulate-having-a-purchase-revoked-via-the-head-of-family-disabling-family-sharing-or-someone-leaving-a-family-would-testing-in-sandbox-on-two-devices-that-were-set-up-with-family-sharing-be-able-to-test-these-scenarios-was-also-wondering-about-generating-server-to-server-notifications-for-those-events-as-well-but-even-just-being-able-to-test-in-xcode-would-be-helpful","text":"Have you been using StoreKit to test this? This documentation seems related to what you're asking for: https://developer.apple.com/documentation/storekit/original_api_for_in-app_purchase/supporting_family_sharing_in_your_app There's also a great session from WWDC2020 around StoreKit Testing with Xcode: https://developer.apple.com/videos/play/wwdc2020/10659/ Thanks, I've develop my code to handle the scenarios outlined in that document, I'm more wondering how I can trigger those in simulator testing... for example, if I'm running in the Xcode simulator, is there any StoreKit testing feature that would trigger the paymentQueue(_:didRevokeEntitlementsForProductIdentifiers:) method of SKPaymentTransactionObserver ? I'd like to be able to test my code to make sure my handling of that method works correctly. That document also mentions a REVOKE server to server notification, when testing in Sandbox is there any way to generate that event? Thanks for the followup. For the server to server notification, unfortunately not. Please file a feedback ticket for us to add that functionality (and add a followup here with the FB# if you have time to do so now). For the first case, yes! After a purchase is made, open the StoreKit Transaction Manager (Debug > StoreKit > Manage Transactions), you can select a transaction and refund it. This will cause paymentQueue(_:didRevokeEntitlementsForProductIdentifiers:) to be called within your app.","title":"I have a question around testing - I was trying to figure out a way to test scenarios around IAP family sharing, either in the simulator using App Store Config files, or even in Sandbox on device.  I can't seem to find a way to simulate something like having a purchase made available via a family purchase made by someone else, or to simulate having a purchase revoked via the head of family disabling family sharing (or someone leaving a family).  Would testing in sandbox on two devices that were set up with family sharing be able to test these scenarios?  Was also wondering about generating server to server notifications for those events as well, but even just being able to test in Xcode would be helpful."},{"location":"wwdc21/DevTools.html#hi-congrats-for-your-work-demo-looks-awesome-cant-wait-to-test-it-myself","text":"Will Xcode Cloud allow us to use classic open source tools in the Swift ecosystem (like swiftlint or sourcery) in our workflows ? How will version dependency be managed ? Yes, Xcode Cloud has ways for you to use open source tools in your workflows, so you can do things like lint or statically generate code in the cloud if you wanted to. Check out this documentation on writing custom scripts for Xcode Cloud to see how to get started! As for how your versioned dependencies will be managed, that would be handled by whatever dependency manager your project uses. So if you use Swift Package Manager, then your build step would resolve the dependencies and versions according to how you wrote your Package.swift file.","title":"Hi! Congrats for your work! Demo looks awesome can't wait to test it myself."},{"location":"wwdc21/DevTools.html#will-xcode-cloud-support-building-projects-with-third-party-dependencies-and-if-so-which-dependency-managers-will-be-supported-cocoapods-carthage-and-swift-package-manager","text":"I believe you can use dependency managers using custom build scripts. Here is some documentation for you! https://developer.apple.com/documentation/xcode/writing-custom-build-scripts See also: https://developer.apple.com/documentation/xcode/making-dependencies-available-to-xcode-cloud","title":"Will Xcode Cloud support building projects with third party dependencies and if so which dependency managers will be supported (Cocoapods, Carthage and Swift Package Manager)?"},{"location":"wwdc21/DevTools.html#could-xcode-cloud-be-used-as-a-platform-to-eventually-add-distributed-buildcache-systems-were-very-interested-in-the-ability-to-do-use-this-to-speed-up-developer-builds-build-systems-like-bazel-have-powerful-capabilities-here-but-with-poor-xcode-integration-and-increased-complexity-for-developers-we-would-love-to-see-this-problem-solved-natively-using-xcode-and-is-a-major-pain-point","text":"Thank you for the feedback, please feel free to file this with Feedback Assistant as well.","title":"Could Xcode Cloud be used as a platform to eventually add distributed build/cache systems? We're very interested in the ability to do use this to speed up developer builds. Build systems like Bazel have powerful capabilities here, but with poor Xcode integration and increased complexity for developers. We would love to see this problem solved natively using Xcode and is a major pain point."},{"location":"wwdc21/DevTools.html#can-xcode-cloud-run-ui-tests-in-parallel","text":"Xcode Cloud can parallelize tests among all the test destinations configured in your workflow, so yes, it can run UI tests in parallel","title":"Can Xcode Cloud run UI-tests in parallel?"},{"location":"wwdc21/DevTools.html#will-it-be-possible-to-quickly-download-all-the-screenshots-from-the-ui-tests-this-can-be-useful-for-submitting-screenshots-to-the-app-store-listing-perhaps-this-can-even-be-automated-right-from-the-flow","text":"There are several ways to accomplish that: You can download the result bundle from Xcode Cloud and open the result bundle locally, or open it directly in Xcode. 1. From the familiar outline mode you can export the images you want by selecting them and clicking on the paperclip icon in that activity. 2. In gallery mode you can easily select multiple images and drag them to Finder or elsewhere. 3. You can automate this using xcresulttool. For an overview of xcresulttool see https://help.apple.com/xcode/mac/current/#/devc38fc7392","title":"Will it be possible to quickly download all the screenshots from the UI tests? This can be useful for submitting screenshots to the App Store listing. Perhaps this can even be automated right from the flow."},{"location":"wwdc21/DevTools.html#will-xcode-cloud-have-the-concept-of-permissions-ie-restrictions-on-who-can-create-edit-trigger-workflows","text":"Depending on a user\u2019s role in App Store Connect, they may be able to put restrictions on Workflows. You can find the documentation about that here: https://developer.apple.com/documentation/xcode/developing-a-workflow-strategy-for-xcode-cloud Here is some information about App Store Connect role permissions: https://help.apple.com/app-store-connect/#/deve5f9a89d7","title":"Will Xcode Cloud have the concept of permissions? I.e Restrictions on who can create, edit &amp; trigger workflows."},{"location":"wwdc21/DevTools.html#when-im-working-directly-on-a-swift-package-without-a-project-file-creating-a-new-unit-test-case-file-always-uses-the-objc-template-and-it-appears-this-is-still-true-in-xcode-13-is-this-something-ive-done-wrong-or-should-i-file-a-feedback","text":"Please do file a feedback about this issue on https://feedbackassistant.apple.com. Thank you for bringing this to our attention! One workaround is to create new test case files from the Test Navigator. Use the \u201c+\u201d button at the bottom-left corner of the Test Navigator, select \u201cNew Unit Test Class\u2026\u201c, and then select Swift from the Language selector dropdown. Another workaround would be to create the file in the Tests directory using the basic \u201cSwift File\u201d template, and then add the code for the new XCTestCase subclass yourself.","title":"When I'm working directly on a Swift package without a project file, creating a new unit test case file always uses the ObjC template, and it appears this is still true in Xcode 13. Is this something I've done wrong, or should I file a feedback?"},{"location":"wwdc21/DevTools.html#will-xcode-cloud-integrate-with-gitlab","text":"Xcode Cloud has first-class support and deep integration with both cloud-based source control providers \u2014 GitHub, Bitbucket, and GitLab \u2014 and on-premise source code providers; GitHub Enterprise, Bitbucket Server, and GitLab Self-managed. https://developer.apple.com/documentation/xcode/source-code-management-setup","title":"Will Xcode Cloud integrate with Gitlab?"},{"location":"wwdc21/DevTools.html#first-of-all-xcode-cloud-looks-very-promising-thanks-for-all-the-great-work-that-has-been-done-around-it","text":"I have one question that I couldn't resolve by going through the docs though (sorry if it's already answered there). Basically, I'd like to know if workflows can be triggered on demand through an API the same way it can be done with some App Store Connect actions. Yes, Xcode Cloud will be fully integrated into the App Store Connect public REST API. You will be able to start new builds programmatically. The public REST API integration is not immediately available today, but will be released during the summer. For context on one typical use case: apps that have not only a frontend component but also have backend server components require integration testing when the backend systems change. When the backend system has passed server side tests, you can set up programmatic triggers using the API to invoke Xcode Cloud builds and tests from an upstream pipeline using a specified staging server. Will a workflow be always tied to an App Store listing? Can a project be built (using REST API) without its app ID being registered in App Store Connect? Yes a workflow is always associated with an App listing in App Store Connect. Creating a workflow in Xcode streamlines the creation of App Store Connect records. If the App Store Connect record already exists, then these will be associated automatically, based on the bundle ID in your project.","title":"First of all, Xcode Cloud looks very promising! Thanks for all the great work that has been done around it."},{"location":"wwdc21/DevTools.html#for-xcode-cloud-and-releasing-to-testflight-how-do-you-capture-what-to-test-for-whats-released-to-the-user","text":"Once Xcode Cloud has successfully uploaded your build to TestFlight, you can go to the TestFlight tab in App Store Connect to enter that information Xcode 12.5 has a serious bug. When I run app via cmd+r, connecting debugger to a simulator takes about 1-2 minutes and debugserver process use 100% CPU. Do you plan to update Xcode 12.5 to 12.5.1 or 12.6 with fixing this issue? Xcode 13 doesn\u2019t have this issue but I am unable to use Xcode 13. Xcode 13 Beta should address this performance problem seen when running on recent versions of macOS Big Sur.","title":"For XCode Cloud and releasing to TestFlight, how do you capture \"What to Test\" for what's released to the user?"},{"location":"wwdc21/DevTools.html#my-question-is-this-could-you-please-share-some-of-the-best-practices-for-cicd-at-xcode-projects-im-sure-xcode-cloud-will-be-my-best-friend-in-a-future-but-if-we-imagine-we-dont-have-xcode-cloud","text":"For general, self maintained CI/CD xcodebuild is your best friend. The \"Testing in Xcode\" session from WWDC19 hits on some best practices that may be useful to you: https://developer.apple.com/videos/play/wwdc2019/413/ Some points I'd like to highlight from the session: - The testing pyramid, to help strike the right balance between unit, integration, and UI tests - Using test plans efficiently for the variables you want to change between test runs - What configuration works best for your needs when planning CI/CD set up. At times it is useful to have a separate builder machine from test runner, in which case you'll break your executions into build-for-testing and test-without-building, but it really depends on your use case","title":"My question is this: could you please share some of the best practices for CI/CD at Xcode projects? Im sure Xcode Cloud will be my best friend in a future, but if we imagine we don\u2019t have Xcode cloud : )"},{"location":"wwdc21/DevTools.html#will-xcode-cloud-support-some-sort-of-secret-management-ie-third-party-tokens-aws-creds","text":"Yes it does! See the Custom Environment Variables section on this page: https://developer.apple.com/documentation/xcode/xcode-cloud-workflow-reference You can add secret environment variables to a workflow. They are \"write-only\", meaning that once set, secret environment variables cannot be read again from the workflow editor. Secret environment variables are encrypted in transit and at rest, and used only on the ephemeral build environment. As such they are suitable for AWS keys, passwords, and API tokens. You can also add \"non-secret\" environment variables, which can be read and edited from the workflow editor.","title":"Will Xcode Cloud support some sort of secret management? i.e third-Party tokens, AWS creds"},{"location":"wwdc21/DevTools.html#does-xcode-cloud-support-custom-build-tools-for-instance-to-use-xcode-cloud-workflow-to-run-bazel-build-of-ios-project","text":"That\u2019s not currently supported, but you may want to give it a try to see if you could get it to work. That\u2019s great feedback though so please file a report on feedbackassistant.apple.com!","title":"Does Xcode Cloud support custom build tools? for instance, to use Xcode Cloud workflow to run Bazel build of iOS project?"},{"location":"wwdc21/DevTools.html#how-long-will-builds-take-on-xcode-cloud-compared-to-building-locally-for-example-using-an-m1-mac-mini","text":"Build times will depend on a number of factors, like the size of your project, build settings, workflow settings, custom build scripts, and much more. I would recommend reading these articles: https://developer.apple.com/documentation/xcode/developing-a-workflow-strategy-for-xcode-cloud https://developer.apple.com/documentation/xcode/xcode-cloud-workflow-reference What type of machines will be available to run builds on? Will there be tiers in terms of performance? There are currently no performance based tiers.","title":"How long will builds take on Xcode Cloud compared to building locally, for example using an M1 Mac Mini?"},{"location":"wwdc21/DevTools.html#how-to-join-xcode-cloud-beta-program-now-we-can-try-it-asap-","text":"You can join the waitlist here: https://developer.apple.com/xcode-cloud/beta/","title":"How to join Xcode Cloud beta program now? we can try it ASAP :-)"},{"location":"wwdc21/DevTools.html#is-there-any-tools-within-xcode-and-xcode-cloud-that-would-allow-for-an-easy-monorepo-setup-my-team-has-two-internal-libraries-that-are-used-in-a-tvos-and-two-ios-applications-so-we-are-looking-to-move-them-all-into-an-easy-repo-for-ease-of-maintenance-but-we-are-unsure-if-there-is-anything-available-to-help-ease-the-transition","text":"I don\u2019t believe Xcode nor Xcode Cloud have a way to merge multiple repos into a single repo, but there are a number of tools available to make dependencies between your projects easier to work with. I would highly recommend this talk from WWDC 2019 on Swift Packages and also this guide on managing dependencies in Xcode Cloud .","title":"Is there any tools within Xcode and Xcode Cloud that would allow for an easy monorepo setup? My team has two internal libraries that are used in a tvOS and two iOS applications so we are looking to move them all into an easy repo for ease of maintenance but we are unsure if there is anything available to help ease the transition."},{"location":"wwdc21/DevTools.html#xcodebuild-often-returns-error-65-without-clear-explanation-sometimes-it-seems-that-it-could-be-the-simulator-failing-to-boot-sometimes-the-test-results-fail-to-be-collected-but-the-error-messages-are-always-a-source-of-frustration-as-its-very-hard-to-understand-the-problem-furthermore-these-errors-are-often-sporadic-and-often-happen-on-ci-where-its-even-harder-to-fix-what-can-we-do-to-tackle-this-issues-are-there-plans-to-improve-xcodebuild-error-reporting","text":"If you encounter xcodebuild errors that are unclear, or indicate that the failure is a system error rather than a problem with your own project, please file feedback on https://feedbackassistant.apple.com and attach the .xcresult bundle from the test run for investigation. In many cases, additional helpful diagnostics can be captured by running xcrun simctl diagnose while the simulator you were targeting is still booted. We are always looking for ways to make the errors produced by xcodebuild clearer and more helpful, and feedback from developers is a very important part of that process!","title":"xcodebuild often returns error 65 without clear explanation. Sometimes it seems that it could be the simulator failing to boot, sometimes the test results fail to be collected, but the error messages are always a source of frustration as it's very hard to understand the problem. Furthermore, these errors are often sporadic and often happen on CI, where it's even harder to fix. What can we do to tackle this issues? Are there plans to improve xcodebuild error reporting?"},{"location":"wwdc21/DevTools.html#will-there-be-a-separate-cost-for-xcode-cloud-it-seems-like-there-is-a-lot-of-resources-available-i-already-pay-140mo-for-my-own-cloud-based-build-server","text":"There is no cost to join the beta program. You can sign up for that here https://developer.apple.com/xcode-cloud/beta/. More details on pricing and availability of Xcode Cloud will be announced this fall","title":"Will there be a separate cost for Xcode Cloud? It seems like there is a lot of resources available. I already pay $140/mo for my own cloud-based build server."},{"location":"wwdc21/DevTools.html#i-see-that-xcode-cloud-supports-custom-scripts-for-bootstrapping-the-temporary-environment-but-iswill-there-be-a-mechanism-for-caching-some-of-the-dependencies-for-example-a-ruby-version-installed-via-rbenv-and-bundler-dependencies-these-are-things-we-typically-would-never-check-into-git-but-could-do-with-caching-somewhere-like-we-can-on-other-platforms","text":"Caching build dependencies is not currently supported, but you might be able to do that yourself in a custom build script. You may want to give it a try to see if you could get it to work. That\u2019s great feedback though so please file a report on feedbackassistant.apple.com","title":"I see that Xcode Cloud supports custom scripts for bootstrapping the temporary environment, but is/will there be a mechanism for caching some of the dependencies? For example a Ruby version installed via rbenv, and bundler dependencies. These are things we typically would never check into Git but could do with caching somewhere like we can on other platforms"},{"location":"wwdc21/DevTools.html#does-xcode-cloud-require-the-new-macos-12-or-will-it-also-work-with-code-13-and-macoa-11","text":"Xcode Cloud is part of Xcode 13, which will be compatible with macOS 11.3 \ud83d\ude00","title":"Does Xcode cloud require the new Macos 12? Or will it also work with code 13 and macoa 11?"},{"location":"wwdc21/DevTools.html#will-we-be-able-to-use-an-http-api-to-uploadconnect-a-repository-to-start-a-workflow-ie-not-using-xcode-at-all","text":"No. You must use Xcode Cloud to configure your initial workflow and connect your source code repositories.","title":"Will we be able to use an http API to upload/connect a repository to start a workflow, i.e. not using Xcode at all?"},{"location":"wwdc21/DevTools.html#will-xcode-cloud-support-pipelines-that-dont-target-the-app-store-or-testflight-would-love-to-be-able-to-build-apps-or-even-pkg-for-my-macos-apps","text":"Yes! You can use a custom build script to upload artifacts to your own destinations. Please see the ci_post_xcodebuild.sh document in that linked article for information about copying artifacts outside of Xcode Cloud.","title":"Will Xcode Cloud support pipelines that don't target the app store or testflight? Would love to be able to build .apps or even .pkg for my macOS apps."},{"location":"wwdc21/DevTools.html#xcodebuild-has-a-long-standing-difference-fb5531332-from-xcodes-testing-behaviour-it-ignores-the-locationscenarioreference-location-simulation-in-the-xcode-scheme-run-options-in-a-scheme-this-limits-the-kind-of-integration-testing-we-can-do-on-ci-and-requires-workarounds-to-mock-core-location-which-is-crucial-to-our-apps-functionality-has-location-simulation-been-considered-for-ui-testing-with-xcode-cloud","text":"Thank you for the report and the feedback reference number! This is a bug with xcodebuild that we will bring to the attention of the engineering team.","title":"xcodebuild has a long-standing difference (FB5531332)  from Xcode's testing behaviour: it ignores the LocationScenarioReference (Location Simulation in the Xcode Scheme Run Options) in a scheme.  This limits the kind of integration testing we can do on CI and requires workarounds to mock Core Location which is crucial to our app's functionality.  Has location simulation been considered for UI testing with Xcode Cloud?"},{"location":"wwdc21/DevTools.html#are-the-xcode-cloud-configurations-stored-in-the-xcode-project-file-or-is-there-a-manifest-that-can-be-built-up-outside-of-the-project-file-many-other-ci-platforms-have-yml-configurations-that-are-easily-human-readable-i-cant-wait-to-try-out-xcode-cloud-thanks-to-all-involved","text":"Xcode Cloud workflow configuration is not stored in the Xcode project file; the configuration is persisted only in the cloud services that support the service. Being centralized in the cloud, the configuration can be accessed through the Xcode UI itself, the App Store Connect web UI, and also programmatically through the App Store Connect public REST API (available this summer). The API uses JSON format. Whereas power users are comfortable with editing YAML, integrating the configuration into an intuitive user interface makes the service more broadly accessible initially. Does it mean that we can edit/create/delete Xcode Cloud workflows via App Store Connect REST API with JSON objects? Yes, that\u2019s correct.","title":"Are the Xcode Cloud configurations stored in the Xcode project file, or is there a manifest that can be built up outside of the project file? Many other CI platforms have yml configurations that are easily human-readable. (I can't wait to try out Xcode Cloud; thanks to all involved!)"},{"location":"wwdc21/DevTools.html#will-testflight-be-available-without-xcode-cloud","text":"Yes, TestFlight will be available on Mac separate from Xcode Cloud \ud83d\ude00 This session can give you more information about it as well: https://developer.apple.com/videos/play/wwdc2021/10170/","title":"Will testflight be available without Xcode cloud?"},{"location":"wwdc21/DevTools.html#will-xcode-cloud-support-goldensnapshot-testing-take-a-screenshot-of-a-view-or-scene-so-we-can-know-how-a-view-should-look-like-and-then-this-screenshot-can-be-used-to-compare-to-following-runs-and-see-if-the-ui-was-modified-i-currently-use-for-this-snapshotpointfreecoswift-snapshot-testing-from-github","text":"Xcode Cloud will run any tests authored using XCTest, which can be combined with that library to write XCTest-based snapshot tests.","title":"Will Xcode Cloud support golden/snapshot testing? (take a screenshot of a view or scene so we can know how a view should look like, and then this screenshot can be used to compare to following runs and see if the UI was modified. I currently use for this snapshotpointfreeco/swift-snapshot-testing from github)"},{"location":"wwdc21/DevTools.html#sorry-if-i-missed-it-is-it-possible-to-use-xcode-cloud-as-a-remote-build-server-so-the-artefacts-are-redownloaded-to-my-local-machine-and-i-can-run-it-on-a-sim-locally-cheers","text":"Yes, you can download the artifacts with a \u201cci_post_xcodebuild.sh\u201d script. See the docs here: https://developer.apple.com/documentation/xcode/writing-custom-build-scripts","title":"Sorry if i missed it, is it possible to use Xcode Cloud as a remote build server, so the artefacts are redownloaded to my local machine and i can run it on a sim locally? Cheers"},{"location":"wwdc21/DevTools.html#will-there-be-support-for-fetching-dependencies-from-other-dependency-managers-that-are-not-swift-package-manager-i-have-currently-a-big-legacy-macos-project-that-uses-git-submodules-cocoapods-and-carthage","text":"Yes, you can use Custom Build Scripts in Xcode Cloud to fetch dependencies from other systems which xcodebuild doesn\u2019t natively support such as those. See https://developer.apple.com/documentation/xcode/writing-custom-build-scripts There is additional documentation specifically about CocoaPods and Carthage available at https://developer.apple.com/documentation/xcode/making-dependencies-available-to-xcode-cloud","title":"Will there be support for fetching dependencies from other dependency managers that are not Swift Package Manager? I have currently a big legacy macOS project that uses git submodules, cocoapods and carthage."},{"location":"wwdc21/DevTools.html#will-xcode-cloud-support-third-party-static-code-analysis-tools-like-sonarqube-httpswwwsonarqubeorg","text":"You can integrate an Xcode Cloud workflow with services that are addressable through a custom script. Check out this documentation for specifics and how-to!","title":"Will Xcode Cloud support third-party static code analysis tools, like SonarQube? https://www.sonarqube.org"},{"location":"wwdc21/DevTools.html#i-have-several-groups-in-testflight-will-xcode-cloud-have-an-option-to-automatically-add-specified-groups-to-a-build-or-will-it-only-add-the-appstore-connect-user-group","text":"Yes, you can configure a workflow to select one or more TestFlight groups.","title":"I have several groups in TestFlight. Will Xcode Cloud have an option to automatically add specified Groups to a build or will it only add the 'AppStore Connect User' group?"},{"location":"wwdc21/DevTools.html#our-macos-app-targets-pro-users-in-the-music-industry-which-isnt-known-for-rapid-adoption-of-os-updates","text":"Will TestFlight for macOS be made available to testers on prior releases of macOS? Our internal QA tests all the way back to macOS 10.12, so it would be nice to (finally!) maintain the same kind of workflow that we have for our iPad and iPhone testing on prior releases. Mac TestFlight support begins with macOS 12.0, it cannot be used on older releases Are there any API requirements/limitations on the apps that are submitted to TestFlight? For example, it would make sense (given your response) that I would be required to build w/ Xcode 13 + macOS 12 SDKs to integrate with TestFlight for macOS, but will I be OK to continue using a deployment target of macOS 10.12 for my app binary? Yes, you can continue to use a deployment target older than macOS 12.0! The requirements are: - You must build and submit from Xcode 13 and use a provisioning profile - The TestFlight client supports macOS 12 and later, so builds aren't installable on older macOS versions.","title":"Our macOS app targets pro users in the music industry, which isn't known for rapid adoption of OS updates\u2026"},{"location":"wwdc21/DevTools.html#if-we-have-our-own-buildtest-farm-which-use-aws-mac-instance-does-xcode-cloud-support-to-use-our-own-dedicated-cloud-infra","text":"No, this is not supported.","title":"If we have our own build/test farm which use AWS mac instance, does Xcode Cloud support to use our own dedicated cloud infra?"},{"location":"wwdc21/DevTools.html#im-concerned-about-the-homebrew-aspect-is-there-a-chance-that-some-dependency-scripts-could-build-and-link-with-parts-of-homebrew-some-of-these-open-source-libraries-build-with-things-like-cmake-and-ninja-and-can-be-very-difficult-to-control-include-paths-not-having-homebrew-installed-i-dont-have-to-worry-about-that-but-i-would-with-xcode-cloud","text":"We include homebrew by default on the VMs in Xcode Cloud. You can read more about how dependencies can be made available to a workflow here. That said, if you're concerned about a supply-side attack, or dependencies in your application being bad actors, you can conceivably audit the environment in a post-clone script after Xcode Cloud clones your source code into its environment. I haven't tried removing homebrew from the VM, but theoretically you could remove it or prevent it from phoning home.","title":"I'm concerned about the Homebrew aspect. Is there a chance that some dependency scripts could build and link with parts of Homebrew? Some of these open source libraries build with things like CMake and Ninja and can be very difficult to control include paths. Not having Homebrew installed, I don't have to worry about that, but I would with Xcode cloud."},{"location":"wwdc21/DevTools.html#is-testflight-for-mac-limited-to-just-apps-destined-for-the-mac-app-store-or-does-it-also-work-with-notarised-apps-outside-of-the-store","text":"Apps must be uploaded for distribution to App Store Connect to become eligible for Mac TestFlight.","title":"Is TestFlight for Mac limited to just apps destined for the Mac App Store or does it also work with notarised apps outside of the store?"},{"location":"wwdc21/DevTools.html#im-incredibly-excited-to-use-asyncawait-and-actors-what-oses-will-those-be-limited-to","text":"On Apple platforms, we currently support iOS 15, macOS Monterey, etc. This is tied to runtime integration with improvements to Dispatch in those OS releases for better performance. We are exploring the possibility of backward deployment. Concurrency works on Linux. Still a WIP on Windows.","title":"I'm incredibly excited to use async/await and actors. What OSes will those be limited to?"},{"location":"wwdc21/DevTools.html#on-performance-i-have-a-4500-lines-enum-for-emojis-in-unicode-so-i-can-order-them-and-move-them-around-in-the-functions-i-declared-such-as-one-providing-the-group-or-subgroup-im-damned-either-way-if-i-dont-put-a-default-fatalerror-at-then-end-of-it-i-have-a-compiler-too-slow-error-if-i-put-it-i-have-a-default-will-never-be-executed-best-of-all-i-cannot-disable-the-warning-in-the-package-so-im-left-with-4-warnings-at-all-times-anything-i-can-do","text":"Sorry you have to deal with that. When the compiler analyzes a switch statement for exhaustiveness, it has some heuristics for very large enums that are intended to keep compiler performance good even in the face of complex patterns with very large sets of enum cases, but it can lead to false-negative cases when that goes wrong. If you have a moment to try to extract some of your code into a test case, and submit an issue to bugs.swift.org, we might be able to use it to further refine these heuristics. Thanks for letting us know about the issue. I'm wondering if this enum might be better-represented as a struct, perhaps conforming to RawRepresentable if you need an underlying value?","title":"On performance. I have a 4500-lines enum for emojis in Unicode, so I can order them and move them around. In the functions I declared (such as one providing the group, or subgroup), I'm damned either way: if I don't put a default: fatalError() at then end of it, I have a compiler too slow error. If I put it, I have a Default will never be executed. Best of all, I cannot disable the warning in the package, so I'm left with 4 warnings at all times. Anything I can do?"},{"location":"wwdc21/DevTools.html#will-swift-concurrency-be-available-on-ios-14-i-saw-the-following-text-in-the-known-issues-of-xcode-13-release-notes-swift-concurrency-requires-a-deployment-target-of-macos-12-ios-15-tvos-15-and-watchos-8-or-newer-70738378","text":"This question was answered earlier, but I'll answer it again. Right now the supported deployment target is iOS 15, macOS Monterey, etc., or later. This is because of enhancements to Dispatch to support Swift concurrency, of which the concurrency runtime uses. We are actively exploring the possibility of backward deployment, but are mindful of not compromising the future of concurrency performance by doing so.","title":"Will Swift Concurrency be available on iOS 14? I saw the following text in the Known Issues of Xcode 13 Release Notes \u2014 \"Swift Concurrency requires a deployment target of macOS 12, iOS 15, tvOS 15, and watchOS 8 or newer. (70738378)\""},{"location":"wwdc21/DevTools.html#how-lightweight-are-actors-what-should-be-considered-when-declaring-an-actor-in-regard-of-overhead-or-cost","text":"Creating an instance of an actor type is no more costly than creating an instance of a class type. It's only during the access of an actor's protected state that a task suspension may happen, to switch to that actor's executor. The implementation of that switching is lightweight, and is optimized by both the compiler and runtime system. You can find out more about how this works in Thursday's session Swift concurrency: Behind the scenes : https://developer.apple.com/wwdc21/10254","title":"How lightweight are Actors? What should be considered when declaring an Actor in regard of overhead or cost?"},{"location":"wwdc21/DevTools.html#how-to-run-async-function-from-sync-code-on-main-thread-do-i-need-to-use-detached-or-there-is-something-else","text":"Yeah, you can launch either of the forms of unstructured task from sync code. In Xcode beta 1, there is async { } , which will start a new async task that runs on the same actor as the launching context (which can be important if that's the MainActor, for main-thread-bound UI work), and asyncDetached { } , which will start a completely independent task. If you've been following Swift open source, though, you may know that these names have been revised due to feedback from the open source community; they're known as Task and Task.detached currently.","title":"How to run async function from sync code on main thread? Do I need to use detached or there is something else?"},{"location":"wwdc21/DevTools.html#are-we-likely-to-see-swift-argument-parser-reach-10-in-the-near-future-its-a-really-great-package-and-im-keen-to-use-it-more-widely","text":"As an open source project, probably the best place to ask this question is on the \"Related Projects\" section of the Swift Forums where you'll connect with the main authors of that package: https://forums.swift.org/c/related-projects/argumentparser/60","title":"Are we likely to see Swift Argument Parser reach 1.0 in the near future? It's a really great package and I'm keen to use it more widely."},{"location":"wwdc21/DevTools.html#how-asyncawait-works-under-the-hood-could-you-give-us-some-links","text":"The \"Swift concurrency: Behind the scenes\" session on Thursday will provide a lot of details about this.","title":"How async/await works under the hood? Could you give us some links?"},{"location":"wwdc21/DevTools.html#what-are-recommended-sessions-for-leveraging-asyncawait","text":"The main session is \"Meet async/await in Swift\", but you may also find tomorrow's \"Swift concurrency: Update a sample app\" session to be very helpful, since we go through an existing app and use async/await , and more, so it can leverage Swift Concurrency.","title":"What are recommended sessions for leveraging async/await?"},{"location":"wwdc21/DevTools.html#how-will-asyncawait-and-swiftnio-work-together-if-i-understood-it-correctly-asyncawait-works-very-similar-to-swiftnios-eventloopfutures","text":"Support for async/await is in the main branch for SwiftNIO, and will be available officially after 5.5 is released.","title":"How will async/await and SwiftNIO work together? If I understood it correctly, async/await works very similar to SwiftNIO\u2019s EventLoopFutures."},{"location":"wwdc21/DevTools.html#how-long-do-you-expect-things-to-live-in-standard-library-previewing-before-being-considered-fully-baked-se-0270-has-lived-there-for-quite-some-time-and-wants-its-turn-in-the-limelight","text":"Based on my conversation with the proposal authors, some issues have turned up with the design during the preview period that we need to address before it graduates to the standard library. This will likely require a follow up review.","title":"How long do you expect things to live in standard library previewing before being considered fully baked? SE-0270 has lived there for quite some time and wants its turn in the limelight"},{"location":"wwdc21/DevTools.html#for-the-long-enum-question-i-created-a-github-httpsgithubcommisoservicesmisoemojiunicode","text":"Will do the bugs asap. Ty for the answer! Thanks for the follow-up! This link is very helpful. I took a quick look and I think making this a struct would probably simplify things and eliminate the problems you're having with large switch statements. I'd recommend you sign up for one of our Swift labs later this week so you can get one-on-one support from our team.","title":"For the long enum question, I created a github. https://github.com/Misoservices/MisoEmojiUnicode"},{"location":"wwdc21/DevTools.html#will-there-be-or-are-there-already-some-guidelines-on-when-to-use-publishers-combine-and-when-to-use-asyncawait-eg-for-a-network-request-urlsession-currently-provides-support-for-both-but-whats-betterrecommended","text":"For URLSession the async/await API is preferred for single values and the AsyncSequence API is preferred for reading chunk-by-chunk. The language level support for structured concurrency is a great way to integrate URLSession downloads into your app.","title":"Will there be (or are there already) some \u201eguidelines\u201c on when to use Publishers (combine) and when to use async/await? E.g. for a network request, URLSession currently provides support for both but what\u2019s better/recommended?"},{"location":"wwdc21/DevTools.html#will-there-be-tools-to-help-visualize-task-hierarchies-in-the-future-or-cancellation-reasons-for-debugging","text":"Thanks for the suggestion, I think it's a good idea!","title":"Will there be tools to help visualize task hierarchies in the future? Or \"cancellation reason\"s for debugging?"},{"location":"wwdc21/DevTools.html#really-like-what-im-seeing-on-docc-ive-heard-its-possible-to-output-html-pages-from-a-generated-docset-will-there-be-some-kind-of-simplified-mechanism-to-apply-styling-to-those-pages-thinking-about-how-an-organization-might-want-to-apply-their-own-brand-coloring-and-such-to-published-docs-on-web","text":"Today there isn\u2019t any integrated affordance for theming the generated site. This is certainly something we can see as valuable, though. Also a great topic to bring up when we make the project open source later this year.","title":"Really like what I'm seeing on DocC - I've heard its possible to output HTML pages from a generated docset - will there be some kind of simplified mechanism to apply styling to those pages? Thinking about how an organization might want to apply their own brand coloring and such to published docs on web."},{"location":"wwdc21/DevTools.html#the-host-and-automate-presentation-mentions-docc-comes-with-a-built-in-clean-design-will-it-be-possible-to-theme-docc-builds","text":"Ah, already a popular request. Today, there is no integrated support for theming the generated site, but would love for you to file a feedback request so we can track your interest.","title":"The \"Host and Automate\" presentation mentions: \"DocC comes with a built-in clean design\". Will it be possible to theme DocC builds?"},{"location":"wwdc21/DevTools.html#is-there-a-detailed-spec-for-the-doccarchive-output-andor-alternative-output-formats","text":"You can get details about how you can host a .doccarchive on your website in the following session: https://developer.apple.com/wwdc21/10236. We\u2019ll have more details about the structure of the .doccarchive when we open source. You can post a followup question with details if you have something specific you\u2019re looking to do. A member of my team is building a tool to create unified output from several disparate docs generators that we use across different language-specific SDKs. (Currently Jazzy, Javadoc, JSDoc, etc.) We're trying to unify the reference manual experience for devs who use our docs without disrupting the workflows of our SDK teams, so we're trying to integrate with existing docs generators. I'd love to use DocC for the in-Xcode documentation, if I could also then feed DocC's output into our custom tool to unify reference docs on our docs site for our users. Having a spec for DocC's output, or being able to theme it, would go a long way toward enabling that unified experience. I'll keep my eye out for more details about the structure of the .doccarchive when you open source. Thanks for this - it looks awesome! Interesting details, thanks for that! Yes, keep an eye out for the open source details. As you explore using DocC, if there is something that would help or that you can't accomplish, please do file Feedback Assistant requests with details.","title":"Is there a detailed spec for the .doccarchive output, and/or alternative output formats?"},{"location":"wwdc21/DevTools.html#are-there-any-plans-for-docc-to-support-objective-c-documentation-builds-my-org-currently-uses-a-docs-generator-to-build-both-swift-and-objective-c-doc-sets-for-our-sdks-and-we-would-likely-have-to-continue-using-that-if-docc-cant-build-objective-c-docs-sets","text":"We\u2019ve definitely heard about the importance of Objective-C, and feel it ourselves. It is indeed a priority. Thank you for the feedback!","title":"Are there any plans for DocC to support Objective-C documentation builds? My org currently uses a docs generator to build both Swift and Objective-C doc sets for our SDKs, and we would likely have to continue using that if DocC can't build Objective-C docs sets."},{"location":"wwdc21/DevTools.html#whats-the-best-way-via-clici-to-generate-a-documentation-archive-from-a-library-thats-just-packageswift-no-wrapping-xcode-project","text":"xcodebuild docbuild works with a Package.swift file. You'll need to add a -scheme argument to tell xcodebuild which target to build; you can run xcodebuild -list to see the list. For example, you can run xcodebuild docbuild -scheme MyPackage to build a DocC Archive for the MyPackage scheme. The archive bundle will appear in your Derived Data directory (for example, ~/Library/Developer/Xcode/DerivedData/MyPackage-[hash]/Build/Products/Debug/MyPackage.doccarchive ).","title":"What\u2019s the best way (via CLI/CI) to generate a documentation archive from a library that\u2019s just Package.swift, no wrapping Xcode project?"},{"location":"wwdc21/DevTools.html#is-there-built-in-integration-with-xcode-cloud-workflows-or-would-we-need-to-implement-it-via-a-script","text":"You\u2019re correct, the best way to support documentation builds on Xcode Cloud would be via a script that invokes xcodebuild docbuild . There\u2019s a session here that is a great reference for a use case like that: https://developer.apple.com/videos/play/wwdc2021/10236/","title":"Is there built-in integration with Xcode Cloud workflows? Or would we need to implement it via a script?"},{"location":"wwdc21/DevTools.html#does-the-hosted-webapp-have-a-way-to-download-the-archive-so-devs-can-add-the-docs-to-xcode-on-their-local-machines","text":"The primary use case we\u2019ve focused on is for other developers to import your package into their project as a dependency. That lets them use Build Documentation to build the docs locally and view the docs in Xcode\u2019s Documentation window. For other workflows, you can make a .doccarchive downloadable from your website. For example, you could zip the archive and have it as a downloadable resource on your site. If you have a different workflow in mind, post a followup and we can look at that specifically, or if you have other feedback we\u2019d love to get your specific use case in a Feedback Assistant.","title":"Does the hosted webapp have a way to download the archive so devs can add the docs to Xcode on their local machines?"},{"location":"wwdc21/DevTools.html#are-there-any-versioning-capabilities-in-docc-for-example-being-able-to-view-the-documentation-for-older-versions-of-a-package-for-users-that-cant-or-dont-want-to-update","text":"If a developer imports a specific version of your package into their project as a dependency and uses Build Documentation, they\u2019ll be able to read the documentation for that version in Xcode\u2019s documentation window. If you have a different workflow in mind, please post a followup and we can look at that specifically, or if you have other feedback we\u2019d love to get your specific use case in a Feedback Assistant.","title":"Are there any versioning capabilities in DocC? For example, being able to view the documentation for older versions of a package for users that can't or don't want to update?"},{"location":"wwdc21/DevTools.html#the-host-and-automate-docc-documentation-presentation-mentions-the-main-page-groups-important-symbols-into-topics-related-to-higher-level-tasks-each-of-those-group-related-symbols-into-more-specific-topics","text":"Can you talk more about how those groupings happen? Is that something we dictate by the way we organize and present content in the framework, or can we manually specify groupings? Organizing your pages into groups is a great way to improve your documentation! To do that, you create a Topics section with a second-level heading called \"Topics\", followed by a group title in a third-level heading, and then a bulleted list of links. We describe the syntax in more detail here https://developer.apple.com/documentation/xcode/adding-structure-to-your-documentation-pages, under \"Arrange Top-Level Symbols Using Topic Groups\". We also have a session tomorrow that shows how to do this: https://developer.apple.com/videos/play/wwdc2021/10167/ along with some other ways you can improve your documentation.","title":"The \"Host and Automate DocC Documentation\" presentation mentions: \"The main page groups important symbols into topics related to higher-level tasks. Each of those group related symbols into more specific topics.\""},{"location":"wwdc21/DevTools.html#usually-a-problem-of-documentation-is-that-it-becomes-obsolete-with-time-is-there-any-way-to-prevent-this-by-using-docc-is-there-any-validation-in-the-code-that-can-be-autocompleted","text":"We think so too! It's important to keep documentation up to date with the changes you make in your code. Like a code compiler, DocC can emit warnings and errors when it finds something that doesn't quite look right. For example, DocC checks all of the links in your documentation you've written using double-backtick syntax, like MyType . If you remove or change the name of an API in your code, Xcode will display a warning on the line containing the documentation letting you know that you should update your docs. If you're interested in other ways to validate the documentation, we'd be interested to hear more via Feedback Assistant.","title":"Usually a problem of documentation is that it becomes obsolete with time. Is there any way to prevent this by using docC? Is there any validation in the code that can be autocompleted?"},{"location":"wwdc21/DevTools.html#is-there-any-way-to-know-the-documentation-coverage-of-the-public-symbols-of-a-framework-it-would-help-a-lot-with-adoption-and-finding-blind-spots-on-huge-code-bases","text":"Hi Mauro! DocC does not currently expose documentation coverage but this is great feedback. Could you please file a Feedback Assistant request with details about how you'd want this to work? These types of enhancement requests are super helpful.","title":"Is there any way to know the documentation coverage of the public symbols of a framework? It would help a lot with adoption and finding blind spots on huge code bases."},{"location":"wwdc21/DevTools.html#wonderful-work-thank-you-thinking-ahead-is-there-any-limitation-that-would-inhibit-the-ability-to-extract-docs-for-symbols-other-than-public-or-open-seems-like-it-would-be-useful-for-internal-use-and-as-a-way-to-collect-data-on-undocumented-symbols","text":"Thanks for the feedback! This is something that a lot of people have been interested in over the last few days :). We built the DocC integration in Xcode first and foremost to support public-facing docs. We know that this is important for teams working on a framework and will keep this in mind in the future\u2014thanks again for the question!","title":"Wonderful work. Thank you! Thinking ahead, is there any limitation that would inhibit the ability to extract docs for symbols other than public or open? Seems like it would be useful for internal use, and as a way to collect data on undocumented symbols."},{"location":"wwdc21/DevTools.html#will-the-docc-compiler-run-only-over-source-code-dependencies-or-will-it-also-generate-the-docs-for-the-public-interfaces-of-consumed-xcframeworks","text":"DocC integrates with the Swift compiler to extract information about the public symbols and their documentation during the build. The author of an xcframework can build and export that framework\u2019s documentation and distribute it alongside the xcframework to enable consumers to read the framework's documentation in Xcode. Do you have any tips or references on how to best distribute them together with the xcframework so that they are detected by Xcode? Is there any SPM tooling around this or is your answer more about a context of a manual import? Thank you very much! That's a great question and something that we want to explore more. For now, this can be accomplished if the framework author exports and uploads a separate zip file of the DocC Archive. Consumers of the xcframework can then download the documentation archive, and double-click it to import that documentation into Xcode. If you have more questions or want to follow up, you can request a DocC Lab appointment.","title":"Will the DocC compiler run only over source code dependencies or will it also generate the docs for the public interfaces of consumed xcframeworks?"},{"location":"wwdc21/DevTools.html#when-building-docs-locally-does-the-archive-get-stored-in-derived-data-ie-are-devs-going-to-have-to-rebuild-docs-every-time-they-clear-derived-data-to-fix-weird-issues","text":"When you use the Build Documentation menu in Xcode, the doccarchive does go into the derived data directory, so if you clear that, you would have to rebuild the docs. If you want to keep a version of the built docs in the Documentation window, you can export the doccarchive, and then you can double click it which imports it back into the Documentation window. When you import a .doccarchive , Xcode puts it into an \u201cImported Documentation\u201d section of the Documentation window, and that doesn't get removed when cleaning the derived data.","title":"When building docs locally, does the archive get stored in derived data? i.e. are devs going to have to rebuild docs every time they clear derived data to fix weird issues?"},{"location":"wwdc21/DevTools.html#in-some-of-our-internal-modules-we-have-some-utility-methods-in-extensions-of-types-that-are-part-of-another-consumed-frameworks-for-example-foundation-were-working-towards-removing-the-majority-of-them-in-favor-of-other-solutions-that-avoid-extensions-in-the-meantime-though-i-havent-seen-them-in-our-generated-docs-and-would-like-to-know-if-theres-a-way-to-include-them-so-that-they-are-discoverable-while-we-deprecatemove-them-thanks","text":"DocC in Xcode 13 supports documentation for APIs defined in your module, but we know that documenting extension symbols is also very important. This is something that would also be a great topic for us to discuss when we open source later this year.","title":"In some of our internal modules we have some utility methods in extensions of types that are part of another consumed frameworks (for example: Foundation). We're working towards removing the majority of them in favor of other solutions that avoid extensions. In the meantime though, I haven't seen them in our generated docs and would like to know if there's a way to include them so that they are discoverable while we deprecate/move them. Thanks!"},{"location":"wwdc21/DevTools.html#im-loving-docc-thanks-for-all-the-hard-work","text":"Is there a way to omit some public symbols from the generated docs? For example, my UIView subclass overrides a series of methods like layoutSubviews that I don\u2019t want to be documented but they currently show in the documentation archive. I had a scan through the docs but couldn\u2019t seem to see a way to opt out If you prefix a public symbol with an underscore, DocC will automatically hide it from the built documentation. In your particular case, because you can't change the name of the method, that won't work. We're interested to hear more about this scenario and how it impacts your documentation via Feedback Assistant.","title":"I\u2019m loving DocC, thanks for all the hard work!"},{"location":"wwdc21/DevTools.html#ive-checked-the-session-in-which-you-cover-linking-to-types-or-methods-what-id-like-to-know-is-if-we-reference-between-documentationssymbols-of-2-different-frameworks-for-example-referencing-in-a-class-of-package-a-a-public-type-of-package-b-in-which-a-depends-and-uses-as-an-input","text":"We built DocC with a focus on having a really great documentation experience for individual frameworks and we don\u2019t currently support linking across different frameworks. We know this use case is especially important for developers who ship a collection of frameworks (maybe in a single repo) that work together. It\u2019s good to know that you\u2019re interested in this and it\u2019s (another) really great topic for discussion when we open source later this year.","title":"I've checked the session in which you cover linking to types or methods. What I'd like to know is if we reference between documentations/symbols of 2 different frameworks. For example referencing in a class of package A a public type of package B in which A depends and uses as an input."},{"location":"wwdc21/DevTools.html#is-it-possible-to-use-docc-for-local-swift-packages-were-writing-a-lot-of-documentation-for-local-modules-mostly-for-services-and-core-api-and-it-would-be-really-helpful-to-use-docc-for-them-too","text":"Yes, DocC works with both local and remote Swift packages. If you open the Swift package in Xcode, and use the Product > Build Documentation menu item, Xcode will build documentation for both that package and its dependencies (both local and remote). Note: if you use a documentation catalog in your Swift package, make sure that the Package manifest\u2019s swift-tools-version is set to 5.5 For more information about documenting a Swift package, see https://developer.apple.com/documentation/xcode/documenting-a-swift-framework-or-package","title":"Is it possible to use DocC for local Swift packages? We're writing a lot of documentation for local modules (mostly for services and core API), and it would be really helpful to use DocC for them too."},{"location":"wwdc21/DevTools.html#i-noticed-that-the-website-that-gets-generated-in-the-doccarchive-doesnt-have-search-functionality-is-there-any-plan-to-add-this-feature","text":"This is a great question, and a really good feature request. You\u2019re correct- Today, search is supported when viewing documentation archives in Xcode\u2019s documentation window and it would be great to have search available on the web as well. This is something we\u2019ll definitely be interested in discussing further with the community when we open source DocC later this year.","title":"I noticed that the website that gets generated in the .doccarchive doesn't have search functionality. Is there any plan to add this feature?"},{"location":"wwdc21/DevTools.html#wednesday","text":"Simulator Recordings were added in Xcode 12.5. Is it possible to record audio with Simulator recordings? You cannot record audio with Simulator right now. If this is a feature you would like, please file a Feedback Request.","title":"\ud83d\uddd3 Wednesday"},{"location":"wwdc21/DevTools.html#xcrun-simctl-allows-recording-a-video-from-the-simulator-within-the-terminal-can-we-progressively-read-out-the-recorded-video-while-the-recording-is-still-running-eg-start-converting-the-video-to-a-different-video-size","text":"Hi! You cannot do this with simctl . We begin recording right when the command is executed and when you press Control-C, that ends the recording. Throughout this process data is written to the file. We do not support \u201cpiping\u201d the video or performing operations on it at the present time. If this is something you would like to have, please file a feature request using Feedback Assistant.","title":"xcrun simctl allows recording a video from the Simulator within the terminal. Can we progressively read out the recorded video while the recording is still running? E.g., start converting the video to a different video size?"},{"location":"wwdc21/DevTools.html#is-it-possible-yet-to-run-a-native-ios-app-from-xcode-on-an-m1-mac-instead-of-launching-in-a-simulator","text":"Yes! You can learn more about how to run these apps from the WWDC 2020 session here: https://developer.apple.com/videos/play/wwdc2020/10114/","title":"Is it possible yet to run a native iOS app from Xcode on an M1 mac, instead of launching in a simulator?"},{"location":"wwdc21/DevTools.html#hi-do-you-plan-to-release-simulators-for-older-ios-versions-13-12-compatible-with-apple-silicon","text":"The legacy iOS and tvOS simulator runtimes are compatible with Apple Silicon Macs via Rosetta. Older watchOS simulator runtimes are i386 and are thus not compatible with Apple Silicon macs.","title":"Hi. Do you plan to release simulators for older iOS versions (13, 12) compatible with Apple Silicon?"},{"location":"wwdc21/DevTools.html#im-noticing-when-i-try-to-store-an-item-in-the-keychain-on-the-ios-simulator-with-whenpasscodesetthisdeviceonly-and-biometrycurrentset-that-it-is-failing-is-there-a-way-to-make-this-work-on-the-simulators-now-is-there-somewhere-i-can-learn-more-about-changes-here","text":"I believe Keychain requires the Secure Enclave which is a hardware feature on iOS devices and is not present in Simulators, so I don't believe Keychain testing on Simulator will work, sorry. Physical hardware will be necessary for testing Keychain features.","title":"I'm noticing when I try to store an item in the keychain on the iOS simulator with whenPasscodeSetThisDeviceOnly and biometryCurrentSet that it is failing. Is there a way to make this work on the simulators now? Is there somewhere I can learn more about changes here?"},{"location":"wwdc21/DevTools.html#in-watchos-when-i-try-to-activate-the-session-it-fails-all-the-time-but-succeeds-in-second-attempt-on-device","text":"Thanks for the question! I think we'll need some more information from you to help triage this further. Could you please submit a bug report via http://feedbackassistant.apple.com so that we can investigate this. Also, please run xcrun simctl diagnose and attach the output to the feedback issue you report. Thank you!","title":"In watchOS, when i try to activate the session it fails all the time, but succeeds in second attempt. (on device)"},{"location":"wwdc21/DevTools.html#is-it-possible-to-use-simctl-to-connect-disconnect-the-hardware-keyboard","text":"It is not possible to connect/disconnect the hardware keyboard using simctl currently. If you could file a Feedback request with details about your use case that would be really helpful.","title":"Is it possible to use simctl to connect &amp; disconnect the hardware keyboard?"},{"location":"wwdc21/DevTools.html#similar-question-to-video-is-it-possible-to-record-video-with-simulator-recordings","text":"Hi there! If you are referring to recording audio, we do not support that at the present time. Please use Feedback Assistant to file this request with us if this is important to you. I mean to record a video? It is possible to record video both from the simctl command line tool and the Simulator app. Both features work the same way, but the simctl command line tool gives you a few more options.","title":"Similar question to video,  Is it possible to record video with Simulator recordings?"},{"location":"wwdc21/DevTools.html#is-there-a-technical-reason-why-xcode-may-at-times-not-be-able-to-launch-an-app-properly-in-the-simulator-quitting-xcode-and-the-simulator-and-then-trying-again-will-resolve-the-issue-this-has-been-a-problem-for-many-years","text":"Thanks for the question! I think we'll need some more information from you to help triage this further. Could you please submit a bug report via http://feedbackassistant.apple.com so that we can investigate this. It'd be really helpful to get some diagnostics, captured after you've reproduced the issue: A sysdiagnose bundle from your host Mac (run sudo sysdiagnose and attach the resulting archive) A diagnostics bundle from the simulator. Please run xcrun simctl diagnose","title":"Is there a technical reason why Xcode may at times not be able to launch an app properly in the simulator? Quitting Xcode and the simulator and then trying again will resolve the issue. This has been a problem for many years."},{"location":"wwdc21/DevTools.html#with-the-new-announcement-of-webauthn-and-security-key-improvements-in-asauthorization-will-the-simulator-with-xcode-13-support-hardware-security-keys-so-developers-wont-need-to-build-and-debug-their-app-to-on-physical-devices","text":"Hardware security keys are not supported in the Simulator on iOS 15. It is important to test features on-device because they take advantage of functionality that's built into iPhone, but which is not always possible to simulate. If this is important for your workflow, I recommend you let us know via the Feedback Assistant at https://feedbackassistant.apple.com.","title":"With the new announcement of WebAuthn and security key improvements in ASAuthorization, will the Simulator with Xcode 13 support hardware security keys (so developers won't need to build and debug their app to on physical devices)?"},{"location":"wwdc21/DevTools.html#is-there-a-way-to-test-apps-using-groupactivities-framework-on-simulators-what-would-be-the-easiest-approach-to-test-such-apps","text":"The Group Activities APIs (for SharePlay) requires FaceTime. Unfortunately, there is no FaceTime support in the simulator, so you will need to test this aspect of your app on device.","title":"Is there a way to test apps using GroupActivities framework on Simulators? What would be the easiest approach to test such apps?"},{"location":"wwdc21/DevTools.html#enterprise-apps-from-multiple-companies-dont-run-in-ios-15-but-are-fine-on-14-and-claim-they-need-to-be-updated-can-you-shed-some-light-on-whats-actually-out-of-date-here-and-what-needs-to-be-changed","text":"-[IXSErrorPresenter presentErrorForBundleIDs:code:underlyingError:errorSource:]: Asked to present alert for error 17 source MobileInstallation underlying error Error Domain=MIInstallerErrorDomain Code=13 \"Failed to verify code signature of /var/installd/Library/Caches/com.apple.mobile.installd.staging/temp.0Ti39V/extracted/Payload/App.app : 0xe8008029 (The code signature version is no longer supported.)\" These applications use an older code signature type that is no longer supported. Apps from the App Store have been automatically re-signed, however enterprise applications cannot be automatically signed by Apple. Please contact the developers for these apps; they will need to re-sign their apps with an up-to-date certificate and profile. For more information, I recommend you visit the Security lab on Friday.","title":"Enterprise apps from multiple companies don't run in iOS 15 (but are fine on 14) and claim they need to be updated - can you shed some light on what's actually out of date here and what needs to be changed?"},{"location":"wwdc21/DevTools.html#what-is-the-currently-fastest-recommend-setup-to-deploy-a-debug-build-onto-a-watch-device-especially-with-regards-to-the-file-transfer-time-ios-and-watchos-device-connected-via-ble-and-both-in-the-same-5-ghz-hotspot-mac-xcode-device-in-the-same-wifi-other-influences-like-power-connected","text":"At present, the most reliable way to test on watch is to ensure you have a wired connection to your phone and to ensure that your phone and watch are in close proximity to eachother on the same wireless network. It is also best to limit interference from other wireless devices and ensure that you have a wireless access point close enough to maintain a constant strong signal with both devices.","title":"What is the currently fastest recommend setup to deploy a debug build onto a watch device? Especially with regards to the file transfer time. iOS and watchOS device connected via BLE and both in the same 5 GHz hotspot? Mac (Xcode device) in the same wifi? Other influences like power connected?"},{"location":"wwdc21/DevTools.html#i-have-a-set-of-test-simulators-that-i-frequently-use-as-part-of-their-initial-setup-i-will-often-install-a-network-profile-and-for-another-project-i-require-to-login-to-icloud-for-cloudkit-testing-i-notice-between-xcode-upgrades-these-changes-are-always-wiped-is-there-a-way-to-keep-them-in-place-between-iosxcode-upgrades-or-is-their-a-quick-way-to-script-provisioning-them-so-i-dont-have-to-login-to-icloud-or-install-a-profile-for-each-simulator","text":"Thanks for the great question! I think this might be an excellent opportunity to request a lab appointment with one of our Simulator engineers. It would be good to have time to talk through what your use case is, what you're seeing go wrong and when, and what options we can come up with together to make this work better for you. Please visit https://developer.apple.com/wwdc21/labs , search for Simulator in the \"Search WWDC21 labs...\" field, and request an appointment. Thank you!!","title":"I have a set of test simulators that I frequently use. As part of their initial setup I will often install a network profile, and for another project I require to login to iCloud for CloudKit testing. I notice between Xcode upgrades these changes are always wiped. Is there a way to keep them in place between iOS/Xcode upgrades, or is their a quick way to script provisioning them so I don't have to login to iCloud or install a profile for each simulator?"},{"location":"wwdc21/DevTools.html#why-is-the-xcode-wireless-connection-to-a-device-so-unreliable-i-basically-have-no-idea-when-i-will-be-able-to-use-wireless-debugging","text":"We hear your concerns about the reliability of wireless debugging, especially around needing to maintain a persistent connection to the device for a debug session. While we don't have significant improvements in this area with Xcode 13, it is an issue that we are actively investigating as we look to improve the wireless development experience.","title":"Why is the Xcode wireless connection to a device so unreliable? I basically have no idea when I will be able to use wireless debugging."},{"location":"wwdc21/DevTools.html#i-noticed-that-compiling-to-a-simulator-in-m1-still-uses-x86_64-arch-even-in-xcode-13-is-there-any-reason-for-that-why-the-simulators-arent-arm64-or-maybe-i-am-missing-some-config-i-tried-with-latest-ios-15-deployment-target","text":"Hi, the architectures that get built depend on the simulator runtime that you are targeting. Which runtime are you targeting? Do you see the same behavior when targeting a newer simulator runtime? I am targeting iOS 15 in this case, xcrun simctl list gives me: == Runtimes == iOS 15.0 (15.0 - 19A5261u) - com.apple.CoreSimulator.SimRuntime.iOS-15-0 And this is the flag that the swift compiler is using: -sdk /Users/omarzunigalagunas/Downloads/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator15.0.sdk I tested with an empty project and it compiles to arm64 but in our project it doesn't Can you check whether your project's configuration is forcing x86 output by overriding the ARCHS or EXCLUDED_ARCHS build settings?","title":"I noticed that compiling to a simulator in M1 still uses x86_64 arch even in Xcode 13, is there any reason for that? why the simulators arent arm64? Or maybe I am missing some config, I tried with latest iOS 15 deployment target"},{"location":"wwdc21/DevTools.html#is-there-a-way-to-hide-the-top-bar-on-a-simulator-that-says-ipad-8th-generation-etc-so-you-only-get-the-content-kind-of-like-the-quicktime-player-is-all-window","text":"You can change the appearance of the Simulator window by opening the Window menu and selecting Show Device Bezels. Thank you, but what I'd like is no bezel and no top bar. Is that possible? There is no configuration option like that right now. If you're trying to record or screenshot content, you can crop your recording area in the Screenshot app before capturing the content. If that's not sufficient for your use case, I'd encourage you to let us know via the Feedback Assistant at https://feedbackassistant.apple.com.","title":"Is there a way to hide the top bar on a simulator (that says \"iPad 8th generation etc\") so you only get the content, kind of like the QuickTime Player is \"all window\"?"},{"location":"wwdc21/DevTools.html#is-it-possible-to-write-to-the-apps-documents-directory-on-the-simulator-outside-of-the-app","text":"For example if we want to set up a specific state, by writing data on the documents folder, before running UI Tests. You can get the path to an application\u2019s data container for a given device with simctl: xcrun simctl get_app_container <device-id> <app-bundle-id> data The data container will contain the Documents directory. If you only have one simulator booted, you can use the device alias \"booted\" instead of specifying the device's ID.","title":"Is it possible to write to the app's Documents directory on the Simulator, outside of the app?"},{"location":"wwdc21/DevTools.html#are-there-any-xcode-12x-versions-that-support-device-debugging-when-a-device-is-running-ios-146","text":"Hi Jared! Xcode 12.5 supports devices running iOS 14.6.","title":"Are there any Xcode 12.x versions that support device debugging when a device is running iOS 14.6?"},{"location":"wwdc21/DevTools.html#for-app-store-screenshots-i-would-like-to-use-the-simulator-tool-to-take-a-picture-with-the-device-bezels-embedded-with-the-image-but-when-i-do-this-with-125-i-only-get-an-screenshot-with-a-cutout-of-the-device-shape-how-should-i-enable-it-to-capture-both-the-screen-and-the-device-bezel-together","text":"Currently we do not support this. The screenshot tool in Simulator can create images which are suitable for a variety of media. If you are trying to capture screenshots of your app for marketing materials, I suggest that you speak to the fine people over at the App Store for advice on how to take screenshots of your app for the store.","title":"For App Store screenshots, I would like to use the simulator tool to take a picture with the device bezels embedded with the image. But when I do this with 12.5, I only get an screenshot with a 'cutout' of the device shape. How should I enable it to capture both the screen and the device bezel together?"},{"location":"wwdc21/DevTools.html#is-there-any-way-to-view-the-xml-file-of-infoplist-in-xcode-13-because-its-no-longer-a-separate-file-and-inside-the-project-target-instead","text":"Hi Andrew! You should still be able to view your Info.plist file by opening it in the project navigator on the left-hand side of the Xcode window. If you want to view the Info.plist file as it appears after building your app, select your .app bundle, Control-click or right-click it, and select Show Package Contents. The Info.plist file should be in there. If this is a traditional macOS app, it may be under the Contents folder. Thanks! But when you create a new project in Xcode 13, for example in the SwiftUI App template, there's no more Info.plist in the project navigator. This is an intentional design change in Xcode 13. I know the Xcode team would love to hear what you think. Please let them know by using the Feedback Assistant at https://feedbackassistant.apple.com.","title":"Is there any way to view the XML file of Info.plist in Xcode 13? Because it's no longer a separate file, and inside the project target instead."},{"location":"wwdc21/DevTools.html#is-there-a-recommended-way-to-control-simulator-setup-when-running-ui-tests-for-example-for-ui-testing-i-need-to-disable-the-hardware-keyboard-but-for-regular-development-its-not-practical-to-do-that","text":"It\u2019s a bit disruptive having to enable/disable it each time so I\u2019m wondering if i can control this kind of thing somehow? Thanks for the great question! We have a helpful command line tool for Simulators that you can run via xcrun simctl that can do a lot of useful automation and setup. Here's a video from a previous WWDC session for more information: https://developer.apple.com/videos/play/wwdc2019/418 . If you find functionality missing from simctl, please do submit feedback through Feedback Assistant!! Also, one thing that you might try if you're doing this often... You can run all of your setup steps on a Simulator device, shut it down, then make a clone of that device with xcrun simctl clone , and then use that cloned device for testing. This might also be a good question to discuss with one of our Simulator engineers in our labs, so if that sounds like it would be helpful to you, please visit https://developer.apple.com/wwdc21/labs , search for Simulator in the \"Search WWDC21 labs...\" field, and request an appointment. Thank you!!","title":"Is there a recommended way to control simulator setup when running UI tests? For example, for ui testing I need to disable the hardware keyboard but for regular development, it\u2019s not practical to do that."},{"location":"wwdc21/DevTools.html#ill-try-again-sorry-for-not-being-clear","text":"In Xcode 13, will we be able to launch our iPhone/iOS apps natively on our M1 Macs, rather than selecting a simulator? I do not believe this is currently possible. I am asking if Xcode 13 will support it. Thank you! iOS and iPadOS apps can run natively on macOS 11.0 and later running on Apple Silicon. To run such an app from within Xcode 12.0 or later, select the scheme for your iOS or iPadOS app and choose the 'My Mac (Designed for iPad)' run destination. This run destination is suitable for all iOS and iPadOS apps.","title":"I'll try again - sorry for not being clear:"},{"location":"wwdc21/DevTools.html#is-it-possible-to-run-the-ios-1415-simulators-under-rosetta-while-running-xcode-natively-on-the-m1-mac","text":"","title":"Is it possible to run the iOS 14/15 simulators under Rosetta while running Xcode natively on the M1 Mac?"},{"location":"wwdc21/DevTools.html#a","text":"Hi Michael! I'm sorry, but we don't support this configuration. If you need this for your workflow, please let us know via the Feedback Assistant at https://feedbackassistant.apple.com.","title":"A"},{"location":"wwdc21/DevTools.html#any-recommendations-on-using-simulator-or-writing-tests-for-ar-apps-i-couldnt-find-a-way-to-effectively-test-my-app-using-simulators-we-have-both-2d-ui-written-in-swiftui-and-uikit-as-well-as-3d-ui-in-scenekit-would-be-nice-to-be-able-to-still-iterate-on-the-2d-ui-using-simulators-thanks","text":"AR requires the use of specialized camera hardware that is not present in the simulator, so AR cannot be simulated. You will need to test your AR-based UI on-device.","title":"Any recommendations on using simulator or writing tests for AR apps? I couldn't find a way to effectively test my app using simulators. We have both 2D UI written in SwiftUI and UIKit, as well as 3D UI in Scenekit. Would be nice to be able to still iterate on the 2D UI using simulators! thanks :)"},{"location":"wwdc21/DevTools.html#when-we-changed-our-ci-to-github-actions-we-started-having-issues-with-some-simulators-while-running-tests-apparently-sometimes-it-seemed-at-random-when-launching-the-simulator-this-would-try-to-do-some-kind-of-synchronisation-and-it-would-stay-idle-for-a-few-minutes-this-before-running-tests","text":"Is there a way to avoid this 'synchronisation' to happen? PS: apologies in advance if you think this is related to the CI provider and not the simulator itself. Hi there and thanks for the question! I think we'll need some more information from you to help triage this further. Could you please submit a bug report via http://feedbackassistant.apple.com so that we can investigate this. Please run xcrun simctl diagnose and attach the output to the feedback issue you report. Also, I think this might be an excellent opportunity to request a lab appointment with one of our Simulator engineers. It would be good to have time to go through what you're seeing go wrong and when, and what options we can come up with together to make this work better for you. Please visit https://developer.apple.com/wwdc21/labs , search for Simulator in the \"Search WWDC21 labs...\" field, and request an appointment. It would be really helpful if you mention the feedback number that you filed in the notes for the lab request. Thank you!! I believe issues like this occur in CI systems where \"fresh\" hosts are instantiated for each job. I've observed performance issues due to update_dyld_sim_shared_cache running after booting a simulator for the first time \u2014 which on CI tends to coincide when attempting to run a test suite. Thanks for the follow-up! I think it might still be helpful to request a lab appointment with one of our Simulator engineers to talk through the issues here. It\u2019s difficult to recommend a good solution without having a better understanding of all the issues. :) If the bottleneck you\u2019re seeing is resource constraints because the dyld shared cache is being built at the same time as your tests are running, you could try adding to your CI scripting to build the dyld shared cache first, allow that to complete, and then run your UI tests after. You can do this by running xcrun simctl runtime update_dyld_shared_cache . Please note that this command is not currently documented externally and is subject to change. If this command is helpful to you, please file a Feedback Report and ask for this functionality to be made more broadly available. If it would be helpful to have a flag for xcrun simctl boot which changed the behavior to wait until the shared cache is generated before booting the device, please file a Feedback Report for that as well. Again, it\u2019s hard to make a good recommendation without a full understanding of the problem you\u2019re trying to solve, and the best way to do that would be to request a lab appointment as mentioned above. Hope this helps!!","title":"When we changed our CI to GitHub Actions we started having issues with some simulators while running tests. Apparently sometimes (it seemed at random) when launching the simulator this would try to do some kind of \"synchronisation\", and it would stay idle for a few minutes, this, before running tests."},{"location":"wwdc21/DevTools.html#the-simulator-menu-offers-an-entry-to-set-a-custom-location-features-location-custom-location","text":"Is there an equivalent for this in simctl ? Unfortunately, there is not a way to do this via simctl at this time. Please file a feedback assistant report via http://bugreport.apple.com as this would be a great addition to make in the future.","title":"The Simulator menu offers an entry to set a Custom Location (Features &gt; Location &gt; Custom Location\u2026)"},{"location":"wwdc21/DevTools.html#i-remember-from-some-past-wwdc-session-that-the-simulator-uses-macoss-version-of-core-animation-not-the-same-ca-stack-that-runs-on-the-device-is-this-still-true-and-if-so-are-there-any-documented-differences-we-should-be-aware-of","text":"All recent versions (definitely iOS 5+ but possibly back to iOS 4) of the iOS simulator runtime have provided a version of CoreAnimation built from the same sources as the corresponding version for devices. Prior to the introduction of Metal support in the simulator, CoreAnimation went down a software rendering codepath. Since the introduction of Metal in the Simulator, CoreAnimation now uses the Metal rendering codepath for improved performance. Any difference in behavior would be considered a bug, so if you notice anything unexpected, please file a report via Feedback Assistant at http://bugreport.apple.com","title":"I remember from some past WWDC session that the Simulator uses macOS's version of Core Animation, not the same CA stack that runs on the device. Is this still true, and if so, are there any documented differences we should be aware of?"},{"location":"wwdc21/DevTools.html#i-started-playing-with-an-m1-recently-i-havent-try-it-but-is-it-possible-to-compile-the-app-for-a-device-arm64-and-use-that-build-to-run-it-in-a-simulator-arm64-this-could-give-us-some-advantages-as-being-able-to-distribute-the-app-to-devs-iphones-and-at-the-same-time-run-the-tests-in-a-simulator-by-building-only-once","text":"Thanks for the question! The answer is no; this isn\u2019t possible. Even though in your case both the device and the simulator have the same architecture, they are different platforms because Simulator runs in macOS. As a result the builds are not mutually compatible.","title":"I started playing with an M1 recently, I haven't try it but is it possible to compile the app for a device (arm64) and use that build to run it in a simulator (arm64)? This could give us some advantages as being able to distribute the app to devs iphones and at the same time run the tests in a simulator by building only once"},{"location":"wwdc21/DevTools.html#now-that-we-have-apple-silicon-are-the-ios-binaries-running-on-the-simulator-eg-launchd-springboard-the-exact-same-binaries-as-on-the-device","text":"No, applications built for the Simulator are built against the Simulator SDK, which does not support exactly the same set of features and functionality as our devices support. So apps built for Simulator can't run on a device, nor the other way around.","title":"Now that we have Apple Silicon, are the iOS binaries running on the Simulator (e.g. launchd, Springboard) the exact same binaries as on the device?"},{"location":"wwdc21/DevTools.html#i-often-get-this-error-could-not-find-module-realmswift-for-target-x86_64-apple-ios-simulator-found-arm64-arm64-apple-ios-simulator-whenever-i-use-cocoapods-im-on-an-m1-mac","text":"I've tried solutions like this one: (https://stackoverflow.com/a/58192079/14351818), but they sometimes work and sometimes don't. I've added arm64 under Excluded Architectures too, and added a script to the Podfile from here (https://stackoverflow.com/a/63955114/14351818). Any tips? It is likely the pods you're trying to use are not configured to work with the simulator you want to use, or the CocoaPods technology itself is not simulator-aware. I would recommend reaching out to the developers of the specific pods you want to use.","title":"I often get this error \"Could not find module 'RealmSwift' for target 'x86_64-apple-ios-simulator'; found: arm64, arm64-apple-ios-simulator\" whenever I use Cocoapods. I'm on an M1 mac."},{"location":"wwdc21/DevTools.html#do-we-have-any-simulators-for-macos-testing-to-cover-scenarios-like-touchid-or-clamshell-for-automation","text":"No, the Simulator does not support simulating macOS or Mac hardware features. You may find that virtualization software from third parties can help you with your testing. So Xcode cloud also will use actual devices where we would run our CI? Xcode Cloud uses the same macOS build worker to run your tests as the build worker that builds your code","title":"Do we have any simulators for macOS testing? (to cover scenarios like touchID or clamshell for automation)"},{"location":"wwdc21/DevTools.html#is-xcode-cloud-built-on-the-configuration-as-code-principle-meaning-will-we-be-able-to-have-different-configurations-in-different-branches-akin-to-github-actions-or-azure-devops-yaml-based-approaches","text":"Hi there - All of your workflow configuration is stored on the server and not checked into your repository. That being said, you can create workflows that will only start builds for specific branches or branch patterns and use specific settings (macOS & Xcode version, environment variables, etc.).","title":"Is Xcode Cloud built on the \"configuration as code\" principle? Meaning: Will we be able to have different configurations in different branches, akin to GitHub actions or Azure DevOps YAML-based approaches?"},{"location":"wwdc21/DevTools.html#what-xcode-cloud-uses-actual-devicessimulatorvirtual-machines","text":"Great question! Xcode Cloud runs your iOS, tvOS, and watchOS tests on simulators, and your macOS tests on the same build worker used to build your code.","title":"What Xcode cloud uses, actual devices/simulator/virtual machines?"},{"location":"wwdc21/DevTools.html#hi-nice-presentations-all-can-you-confirm-that-xcode-cloud-will-only-support-bitbucket-github-and-gitlab-both-in-cloud-and-on-prem-but-nothing-else-specifically-i-have-a-bare-git-repo-on-my-local-network-that-i-would-like-to-use-as-my-source-code-repo-for-xcode-cloud-is-this-possible","text":"Yes - Xcode Cloud only supports cloud and on premise instances of GitHub, Bitbucket, and GitLab. It doesn\u2019t support bare git repos on local networks.","title":"Hi, nice presentations all!  Can you confirm that Xcode Cloud will ONLY support Bitbucket, GitHub, and GitLab, both in cloud and on prem, but nothing else?  Specifically, I have a bare git repo on my local network that I would like to use as my source code repo for Xcode Cloud.  Is this possible?"},{"location":"wwdc21/DevTools.html#hello-in-our-current-ci-we-check-what-changes-the-pr-is-doing-and-analyze-our-dependecy-tree-to-find-out-which-test-bundles-should-run-then-we-use-only-testing-args-in-xcodebuild-cmd-to-filter-them-is-it-possible-to-do-so-with-xcode-cloud","text":"Hi! You can probably get something like that working by using a combination of a post-clone script, which does the analysis of the changes in the git commit, and then generate a scheme/test plan that dynamically has only the tests you want to run","title":"Hello! In our current CI we check what changes the pr is doing and analyze our dependecy tree to find out which test bundles should run, then we use -only-testing args in xcodebuild cmd to filter them, is it possible to do so with Xcode Cloud?"},{"location":"wwdc21/DevTools.html#hey-yesterday-on-a-previous-question-i-asked-about-api-availability-richie-mentioned-that-well-have-a-rest-api-during-this-summer-partying_face","text":"I have a follow up question about this though, will we be able to trigger a certain workflow from an API call while this workflow doesn\u2019t run on any git event (pr, tag change, commit, scheduled event, etc.). Basically, we want to control part of our release process from our custom Jenkins orchestration (that we have today) and trigger some of the workflow tasks on demand from there. Thanks! While we can't commit to the shape of the API right now, I think it will be a pretty common use case and a valid expectation to have w.r.t Xcode Cloud's public API.","title":"Hey! Yesterday on a previous question I asked about API availability, Richie mentioned that we\u2019ll have a REST API during this summer :partying_face:"},{"location":"wwdc21/DevTools.html#can-xcode-cloud-provide-any-support-for-developer-id-workflows-either-complete-products-or-re-signable-ones","text":"Hi! Xcode Cloud will code sign macOS builds with Developer ID, and for the Mac App Store","title":"Can Xcode Cloud provide any support for Developer ID workflows? Either complete products or re-signable ones?"},{"location":"wwdc21/DevTools.html#when-can-we-expect-invites-to-xcode-cloud-after-submitting-a-request","text":"Thanks for the question Edward! We\u2019re all excited about Xcode Cloud and we want to make using it the best possible experience. We'll be gradually adding users throughout the summer and fall. Account holders will be notified by email when your team is accepted.","title":"When can we expect invites to Xcode Cloud after submitting a request?"},{"location":"wwdc21/DevTools.html#beyond-the-obvious-fact-that-apple-is-handling-the-server-setup-and-maintenance-are-there-any-features-of-xcode-cloud-not-available-on-xcode-server","text":"Hi! Xcode Cloud is a totally different product from Xcode Server, with many differences and improvements over Xcode Server. I'd recommend looking at the documentation if you're interested in specific features.","title":"Beyond the obvious fact that Apple is handling the server setup and maintenance, are there any features of Xcode Cloud not available on Xcode Server?"},{"location":"wwdc21/DevTools.html#does-xcode-cloud-also-support-dependencies-from-private-repositories-ie-the-project-having-private-swift-framework-dependencies-that-are-hosted-on-github-privately-or-even-on-a-local-github-server","text":"Definitely! This is covered by today's session \"Customize your advanced Xcode Cloud workflows\": https://developer.apple.com/videos/play/wwdc2021/10269/","title":"Does Xcode cloud also support dependencies from private repositories? I.e. the project having private Swift framework dependencies that are hosted on GitHub privately or even on a local GitHub server."},{"location":"wwdc21/DevTools.html#in-our-current-ci-we-need-to-use-internal-metrics-endpoints-behind-a-vpn-so-our-secops-team-exposed-en-external-endpoint-and-ip-whitelisted-it-so-we-can-access-it-is-xcode-cloud-infra-will-have-a-fixed-public-ip-range-so-we-can-do-the-same","text":"Hello! Yes, there will be a fixed IP range for all egress from Xcode Cloud. Over the summer details will be published in the documentation.","title":"In our current CI we need to use internal metrics endpoints behind a vpn so our secops team exposed en external endpoint and ip whitelisted it so we can access it, is Xcode Cloud infra will have a fixed public ip range so we can do the same?"},{"location":"wwdc21/DevTools.html#if-your-git-repo-is-in-gitlab-self-hosted-because-you-want-the-source-code-to-be-secure-and-not-hosted-in-the-cloud-what-happens-to-the-source-code-during-the-xcode-cloud-cicd-a-process-is-it-transmitted-to-your-servers-encrypted-how-long-is-the-source-kept-on-your-servers-after-compilation-and-deployment","text":"Xcode Cloud will securely clone your repo from your GitLab instance. Your source code is kept on the build worker for the duration of the build, then the build worker (and your source code) is immediately discarded","title":"If your git repo is in GitLab self hosted, because you want the source code to be secure and not hosted in the cloud, what happens to the source code during the Xcode Cloud CI/CD a process - is it transmitted to your servers encrypted?  How long is the source kept on your servers after compilation and deployment?"},{"location":"wwdc21/DevTools.html#hi-i-love-what-i-have-seen-so-far-thanks-for-the-hard-work-in-our-company-we-rely-heavily-on-artifatory-for-our-mobile-builds-some-of-the-interactions-we-have-require-authentication-via-netrc-file-configuration-is-this-something-that-we-will-be-able-to-achieve-in-xcode-cloud","text":"Thank you! Glad you like it! I'd recommend looking into the custom scripting and environment variables documentation (and the Advanced Skywagon session). You could generate a .netrc file in a script, populate an access token from a secure environment variable.","title":"Hi! I love what I have seen so far. Thanks for the hard work. In our company we rely heavily on Artifatory for our mobile builds. Some of the interactions we have require authentication via .netrc file configuration. Is this something that we will be able to achieve in Xcode Cloud ?"},{"location":"wwdc21/DevTools.html#we-have-precompiled-binaries-xcframeworks-that-swift-package-manager-downloads-from-an-private-server-the-package-manager-authenticates-using-a-netrc-file-would-i-be-able-to-securely-provide-a-netrc-file-with-the-proper-credentials-to-xcode-cloud-so-it-can-fetch-these-packages","text":"Xcode Cloud will no generate .netrc files for you, but you can create your own as part of a custom build script. For example, you could create the file in a ci_postclone.sh file and use a secret environment variable to store the token you want to use. Both custom scripts and (secret) environment variables are covered in today's session: https://developer.apple.com/videos/play/wwdc2021/10269/","title":"We have precompiled binaries (XCFrameworks) that swift package manager downloads from an private server. The package manager authenticates using a .netrc file. Would I be able to securely provide a .netrc file with the proper credentials to Xcode Cloud so it can fetch these packages?"},{"location":"wwdc21/DevTools.html#will-xcode-cloud-require-that-we-push-the-app-including-the-framework-dependencies-added-by-swift-package-manager-or-cocoapods","text":"Hi! Xcode Cloud requires the source of you app, and any non-binary dependencies to be available in the build environment.","title":"Will Xcode cloud require that we push the app including the framework dependencies added by swift package manager or cocoapods?"},{"location":"wwdc21/DevTools.html#xcode-cloud-is-great-for-ci-would-be-eventually-be-able-to-avoid-building-locally-and-get-the-built-products-from-the-build-servers","text":"Xcode Cloud is built specifically with CI in mind. Having said that, you can download all artifacts produced from each build.","title":"Xcode cloud is great for CI, would be eventually be able to avoid building locally and get the built products from the build servers?"},{"location":"wwdc21/DevTools.html#we-are-currently-building-in-our-ci-using-macstadium-orka-which-adds-a-virtualisation-layer-we-can-deploy-vms-with-different-cpu-configurations-depending-how-time-critical-the-task-we-need-to-perform-is-eg-prs-have-faster-machines-for-better-developer-feedback-release-builds-work-in-slower-vms-because-we-are-not-in-a-rush-will-something-similar-be-possible-with-xcode-cloud","text":"Great question! Xcode Cloud was designed so that developers no longer have to maintain a CI build environment configuration","title":"We are currently building in our CI using Macstadium + ORKA, which adds a virtualisation layer. We can deploy VMs with different CPU configurations depending how time critical the task we need to perform is (e.g. PRs have faster machines for better developer feedback, release builds work in slower VMs because we are not in a rush). Will something similar be possible with Xcode Cloud?"},{"location":"wwdc21/DevTools.html#is-it-possible-to-configure-a-workflow-to-skip-certain-commits-eg-we-use-no-ci-prefix-in-the-commit-message-to-have-our-jenkins-ignore-a-it","text":"That's not something that's supported right now but that's a great idea! Can you please file a feedback about this?","title":"Is it possible to configure a workflow to skip certain commits (e.g. we use [NO-CI] prefix in the commit message to have our Jenkins ignore a it)"},{"location":"wwdc21/DevTools.html#we-will-able-to-select-the-stack-for-example-m1-over-intel-computers-we-noticed-m1-has-a-huge-impact-in-compilation-time","text":"Xcode Cloud was designed so that developers no longer have to maintain a CI build environment configuration.","title":"We will able to select the stack? For example M1 over Intel computers, we noticed M1 has a huge impact in compilation time"},{"location":"wwdc21/DevTools.html#in-our-ci-we-do-commits-eg-to-bump-the-version-and-build-number-of-the-app-and-push-it-to-the-repo-will-we-be-able-to-commit-and-push-from-xcode-cloud-from-the-scripts","text":"Xcode Cloud will actually manage the build number (CFBundleVersion) automatically for you - so likely you won't need to do those kinds of pushes. However if you do need to, you can add a custom script that calls various git commands - which will then trigger another workflow I have a follow up question for this one. Will Xcode Cloud provide an option to somehow format the build number? That's not something that's supported right now but that's a great idea! Can you please file a feedback about this?","title":"In our CI we do commits (e.g. to bump the version and build number of the app) and push it to the repo. Will we be able to commit and push from Xcode Cloud from the scripts?"},{"location":"wwdc21/DevTools.html#does-xcode-cloud-run-tests-on-devices-or-simulators","text":"Thanks for your question. Xcode Cloud runs tests on simulators.","title":"Does Xcode Cloud run tests on devices or simulators?"},{"location":"wwdc21/DevTools.html#can-we-set-baseline-metrics-for-performance-tests-from-xcode-cloud","text":"You\u2019re not able to set baseline metrics for performance test, but please file a request through feedback assistant!","title":"Can we set baseline metrics for performance tests from Xcode cloud?"},{"location":"wwdc21/DevTools.html#would-xcode-cloud-support-beta-versions-of-xcode","text":"Totally! You can configure a workflow to use a specific version of Xcode (including betas), or always use the latest version available (including betas).","title":"Would Xcode Cloud support beta versions of Xcode ?"},{"location":"wwdc21/DevTools.html#does-xcode-cloud-work-for-enterprise-accounts","text":"To use Xcode Cloud, you need to be enrolled in the Apple Developer Program. https://developer.apple.com/documentation/xcode/requirements-for-using-xcode-cloud","title":"Does Xcode Cloud work for Enterprise Accounts?"},{"location":"wwdc21/DevTools.html#would-xcode-cloud-support-build-systems-like-bazel","text":"Xcode Cloud supports custom build scripts, so you can run bazel commands if you need to build additional tools as part of your build process.","title":"Would Xcode cloud support build systems like bazel?"},{"location":"wwdc21/DevTools.html#currently-we-create-alpha-builds-for-qa-on-a-regularly-basis-using-an-enterprise-certificate-we-distribute-the-alpha-builds-using-bitrise-on-every-alpha-release-we-notify-qa-via-a-slack-channel-and-they-get-a-short-description-of-the-release-a-download-url-as-text-and-qr-code-to-ease-installation-from-device-would-i-be-able-to-have-the-same-flow-using-xcode-cloud-and-would-i-be-able-to-distribute-enterprise-builds-via-testflight","text":"Hi! You can definitely achieve this workflow with Xcode Cloud - in fact we expect it would be significantly easier. You can set up a workflow that deploys to an internal TestFlight group representing your QA team (and also notifies in slack). They can then install the build through the TestFlight app. You don't need to worry about Enterprise signing to do this","title":"Currently we create alpha builds for QA on a regularly basis using an Enterprise certificate. We distribute the alpha builds using Bitrise. On every alpha release we notify QA via a slack channel and they get a short description of the release, a download url as text and QR code (to ease installation from device). Would I be able to have the same flow using Xcode Cloud? And would I be able to distribute enterprise builds via TestFlight?"},{"location":"wwdc21/DevTools.html#will-app-extensions-be-supported-in-any-capacity-when-building-apps-on-ipad","text":"Swift Playgrounds 4 supports making apps for iPhone and iPad, in addition to the playgrounds and playground books already supported by Swift Playgrounds. Thanks! Specifically, I'm curious about whether any app extensions, action or intent extensions for example, might be available to include in the initial version of the new project type, or if it will be limited to just \u2018standard\u2019 apps without these kind of features for now? :slightly_smiling_face: Those are some awesome ideas! We don't have any specific plans to support that this year but we encourage you to file a Feedback to state your support for those features.","title":"Will app extensions be supported in any capacity when building apps on iPad?"},{"location":"wwdc21/DevTools.html#when-building-on-ipad-will-it-be-possible-to-install-apps-to-the-ipad-homescreen-locally-or-might-this-require-a-baseline-of-submitting-through-testflight","text":"Great question! If you want to install the app you're making in Swift Playgrounds to your device, you can sign into your developer account and submit the app to TestFlight and then install it on your iPad or other devices using the TestFlight app.","title":"When building on iPad, will it be possible to install apps to the iPad homescreen locally? Or might this require a baseline of submitting through Testflight?"},{"location":"wwdc21/DevTools.html#is-swift-playgrounds-expected-to-only-support-swiftui-or-will-it-be-open-to-other-frameworks-like-uikit-and-3rd-party-frameworks","text":"Swift Playgrounds supports both UIKit and SwiftUI. SwiftUI Previews requires a SwiftUI app, but you can always use UIViewRepresentable to show UIKit content in SwiftUI. Thank you! To follow up on this, what is the planned support for 3rd party frameworks? Will it be possible to use say, Snapkit? Playgrounds supports working with Swift Packages. SwiftUI Previews (which is in Swift Playground 4) allows you to preview SwiftUI content. To use something like SnapKit you'd have to use it with UIKit and use UIViewRepresentable","title":"Is Swift Playgrounds expected to only support SwiftUI, or will it be open to other frameworks like UIKit and 3rd party frameworks?"},{"location":"wwdc21/DevTools.html#im-very-excited-for-the-upcoming-features-to-enable-building-apps-on-ipad-but-details-in-the-main-keynote-were-very-light-is-there-anywhere-i-can-learn-more-and-are-you-able-to-answer-questions-on-it","text":"At this moment, the available details are available at the State of The Union video https://developer.apple.com/wwdc21/102 at 0:33","title":"I'm very excited for the upcoming features to enable building apps on iPad, but details in the main Keynote were very light. Is there anywhere I can learn more, and are you able to answer questions on it?"},{"location":"wwdc21/DevTools.html#im-sure-youre-getting-this-question-a-lot-any-word-on-when-a-swift-playgrounds-4-beta-will-be-available-smile-so-excited-to-try-it-out","text":"Swift Playgrounds 4 will be available later this year.","title":"I\u2019m sure you\u2019re getting this question a lot - any word on when a Swift Playgrounds 4 beta will be available? :smile: So excited to try it out!"},{"location":"wwdc21/DevTools.html#is-it-possible-to-import-spm-packages-into-swift-playgrounds-that-would-be-really-helpful-in-using-playgrounds-as-a-tool-to-build-more-richly-featured-apps-without-having-to-traverse-over-to-xcode","text":"Yes! The apps you build can depend on publicly-available Swift Packages. Hmm.. so I won't be able to use my internal (non-public) Swift packages when building on iPad? At this time, we do not plan to support packages that require authentication","title":"Is it possible to import SPM packages into Swift Playgrounds?  That would be really helpful in using Playgrounds as a tool to build more richly featured apps without having to traverse over to Xcode."},{"location":"wwdc21/DevTools.html#will-iphone-and-ipad-be-the-only-devices-supported-in-the-next-version-of-swift-playgrounds-when-building-apps-or-will-developers-be-able-to-build-for-watchos-and-macos-as-well","text":"Apps built using Swift Playgrounds are universal, so when they\u2019re distributed using TestFlight or the App Store, they\u2019ll run on iPhone, iPad, and Apple Silicon Macs.","title":"Will iPhone and iPad be the only devices supported in the next version of Swift Playgrounds when building Apps, or will developers be able to build for watchOS and macOS as well?"},{"location":"wwdc21/DevTools.html#to-build-and-deploy-to-the-appstore-from-ipados-using-swift-playgrounds-do-you-need-to-be-a-subscriber-of-xcode-cloud","text":"Nope! Anyone with a developer account will be able to submit their apps to TestFlight and the App Store.","title":"To build and deploy to the AppStore from iPadOS using Swift Playgrounds, do you need to be a subscriber of Xcode Cloud?"},{"location":"wwdc21/DevTools.html#hi-will-swift-playgrounds-4-for-ipad-have-the-ability-to-add-dependencies-on-third-party-swift-packages","text":"Yes! The apps you build can depend on publicly-available Swift Packages.","title":"Hi! Will Swift Playgrounds 4 for iPad have the ability to add dependencies on third party Swift Packages?"},{"location":"wwdc21/DevTools.html#what-does-the-workflow-look-like-if-you-wanted-to-work-from-mac-to-ipad-or-vice-versa-is-it-all-icloud-synced-or-will-it-connect-to-githubgitlabother-git-syncing-services","text":"Swift Playgrounds already works great with iCloud Drive (or any other file provider extension) and will continue to do so. We don't have anything to announce at this time about other mechanisms.","title":"What does the workflow look like if you wanted to work from Mac to iPad or vice versa? Is it all iCloud synced or will it connect to Github/Gitlab/other Git syncing services?"},{"location":"wwdc21/DevTools.html#will-i-be-able-to-see-what-my-app-looks-like-on-different-device-sizes-and-orientations-from-within-swift-playgrounds","text":"Yes! You can take your app preview fullscreen, and put Swift Playgrounds into split-view multitasking to test a bunch of different configurations. You can also write custom Preview Providers to try even more layouts and configurations.","title":"Will I be able to see what my app looks like on different device sizes and orientations from within Swift Playgrounds?"},{"location":"wwdc21/DevTools.html#will-folks-be-able-to-open-existing-xcode-projects-in-swift-playgrounds-4-or-will-a-project-have-to-be-migrated-to-some-sort-of-playgroundbook","text":"Swift Playgrounds 4 has a new project format based on the Swift Package format. Can you edit this format in Xcode without conversion? So you can start working on a app in Xcode and then continue on iPad and vice versa? Yes! App projects can be moved seamlessly between Swift Playgrounds and Xcode, so you can work on whichever device you prefer.","title":"Will folks be able to open existing Xcode projects in Swift Playgrounds 4, or will a project have to be migrated to some sort of .playgroundbook?"},{"location":"wwdc21/DevTools.html#it-was-mentioned-i-think-that-playgrounds-apps-destined-for-the-app-store-could-be-brought-over-to-xcode-can-it-go-round-trip-back-to-playgrounds-especially-wondering-if-you-could-use-xcode-to-define-storyboards-or-data-models-to-use-and-bring-those-into-playgrounds","text":"Thanks for the great question! You will be able to open Swift Playgrounds projects in Xcode since they're based on the Swift package format! Note that Xcode has more tools than Playgrounds will be able to support. If you end up editing the Playgrounds project in Xcode in such a way that won't be supported by Playgrounds, you'll see a warning in Xcode.","title":"It was mentioned I think that Playgrounds apps destined for the app store could be brought over to Xcode, can it go round trip back to Playgrounds?  Especially wondering if you could use Xcode to define storyboards or data models to use, and bring those into Playgrounds."},{"location":"wwdc21/DevTools.html#any-plans-for-further-playground-books-like-cipher-the-existing-content-is-brilliant-as-were-the-sessions-on-swans-quest-last-year-the-additions-like-sensor-arcade-and-the-accompanying-templates-are-inspirational-especially-in-the-classroom","text":"We\u2019re so glad you like the content! We haven\u2019t announced anything about that. Stay tuned for future updates!","title":"Any plans for further playground books like Cipher? The existing content is brilliant, as were the sessions on Swan's Quest last year. The additions like Sensor Arcade and the accompanying templates are inspirational, especially in the classroom..."},{"location":"wwdc21/DevTools.html#will-swift-playgrounds-have-any-kind-of-simulator-or-are-swiftui-projects-running-as-previews","text":"Howdy! Swift Playgrounds projects will allow you to make iOS apps with the SwiftUI lifecycle \u2014 you'll be able to see your app running in Playgrounds, and you'll be able to create preview providers to preview specific views.","title":"Will Swift Playgrounds have any kind of simulator, or are SwiftUI projects running as previews?"},{"location":"wwdc21/DevTools.html#what-frameworks-are-unavailable-in-swift-playgrounds-created-apps","text":"Howdy! While we can't go into details about what frameworks Swift Playgrounds will or will not support \u2014 I'm curious about what you're hoping to achieve! Feel free to respond in a followup or please send us feedback for your hopes, dreams, and expectations!","title":"What frameworks are unavailable in Swift Playgrounds created apps?"},{"location":"wwdc21/DevTools.html#is-the-macos-version-of-the-playgrounds-app-actively-being-maintained-should-we-expect-it-to-be-able-to-build-apps-as-well","text":"For this year, we focused on bringing support for building apps to iPad.","title":"Is the MacOS version of the Playgrounds app actively being maintained? Should we expect it to be able to build apps as well?"},{"location":"wwdc21/DevTools.html#does-swift-playgrounds-4-support-multi-windowscenes-ie-can-i-have-my-editor-as-one-full-screen-scene-and-use-slide-over-for-my-preview-additionally-does-it-have-support-for-a-secondary-display-airplayusb-to-go-along-with-multiple-sceneswindows","text":"We're excited to hear about the ways you want to use Swift Playgrounds! We'd love to have folks send us their desires and expectations via feedback! :)","title":"Does Swift Playgrounds 4 support multi-window/scenes? i.e. Can I have my editor as one full screen scene and use slide over for my preview? Additionally, does it have support for a secondary display (AirPlay/USB) to go along with multiple scenes/windows?"},{"location":"wwdc21/DevTools.html#what-are-the-requirements-for-swift-playgrounds-can-you-build-apps-on-a-2018-a12-ipad-pro-for-example","text":"You'll be able to build apps in Swift Playgrounds on any iPad running iPadOS 15!","title":"What are the requirements for Swift Playgrounds? Can you build apps on a 2018 (A12) iPad Pro for example?"},{"location":"wwdc21/DevTools.html#will-it-he-possible-for-a-xcode-project-to-be-opened-in-swift-playgrounds-and-for-a-swift-playground-in-xcode","text":"Projects in Swift Playgrounds 4 are built on top of the Swift Package format, and they work great in Xcode. If you make a change to your project in Xcode, and Xcode knows that it won\u2019t be compatible with Swift Playgrounds, it will show a warning.","title":"Will it he possible for a xcode project to be opened in swift playgrounds? And for a swift playground in xcode?"},{"location":"wwdc21/DevTools.html#are-there-any-common-app-capabilities-that-i-could-create-using-swiftui-swift-on-xcode-that-i-would-not-be-able-to-create-in-swift-playgrounds-or-apple-frameworks-that-i-could-not-use-in-swift-playgrounds","text":"Swift Playgrounds 4 will have wide support for Apple\u2019s SDKs. We believe some truly powerful apps will be built with Swift Playgrounds 4, and it will be easy to bring your projects into Xcode when you need more power.","title":"Are there any common app capabilities that I could create using SwiftUI &amp; Swift on Xcode that I would not be able to create in Swift Playgrounds? Or Apple Frameworks that I could not use in Swift Playgrounds?"},{"location":"wwdc21/DevTools.html#the-state-of-the-union-discussed-moving-an-app-project-from-swift-playgrounds-4-on-ipad-over-to-xcode-on-the-mac-will-this-be-possible-in-the-reverse-can-i-edit-the-project-in-xcode-and-then-bring-it-back-to-swift-playgrounds","text":"Hi Greg. Yes the new project format will allow for editing the project in Xcode and bringing it back into Swift Playgrounds!","title":"The State of the Union discussed moving an app project from Swift Playgrounds 4 on iPad over to Xcode on the Mac. Will this be possible in the reverse? Can I edit the project in Xcode and then bring it back to Swift Playgrounds?"},{"location":"wwdc21/DevTools.html#can-we-release-to-the-app-store-from-playgrounds-today-to-adhoc-distribution-do-we-need-to-wait-until-something-comes-out-of-beta-before-this-flow-works-thank-you","text":"Building apps, including submitting them to the App Store, is new in Swift Playgrounds 4. Swift Playgrounds 4 will be available later this year.","title":"Can we release to the app store from playgrounds today? To adhoc distribution? Do we need to wait until something comes out of beta before this flow works? Thank you."},{"location":"wwdc21/DevTools.html#_1","text":"What are some neat benefits of writing and running full iOS/iPadOS apps on iPad that may not be immediately obvious without having experienced using the app? This is an incredible question! Making iPadOS apps right on the iPad is an incredible experience. It's easy to get a feel for how your app will behave as a part of the amazing iPadOS system experience like when in fullscreen, a multitasking split size, and in slide over. You can test out how your app responds to a software keyboard present and how it changes when you attach a hardware keyboard. You can check how your UI responds to hover effects with the trackpad, and you can test out great gestures right in the canvas with your finger(s)! We're so excited to see what y'all come up with when working in Swift Playgrounds 4. If any of these things spark inspiration or excitement about Playgrounds, we'd love to hear your desires and expectations via feedback!","title":""},{"location":"wwdc21/DevTools.html#might-external-display-support-be-considered-for-preview-rendering-at-various-device-sizes-to-reserve-more-screen-space-for-code","text":"That's an awesome idea! Please file an enhancement request through Feedback Assistant: https://developer.apple.com/bug-reporting/","title":"Might external display support be considered for preview rendering at various device sizes, to reserve more screen space for code?"},{"location":"wwdc21/DevTools.html#might-the-upcoming-playgrounds-release-include-support-for-find-replace-or-refactoring-renaming-variables-or-indeed-any-declaration-can-be-quite-painful-without-it-or-if-you-cant-comment-are-there-any-good-workarounds-for-this-currently","text":"These are some awesome feature ideas! While we can't comment on plans for the future, we highly encourage you to submit an enhancement request through the Feedback Assistant: https://developer.apple.com/bug-reporting/","title":"Might the upcoming Playgrounds release include support for find &amp; replace, or refactoring? Renaming variables, or indeed any declaration, can be quite painful without it. Or if you can't comment - are there any good workarounds for this currently?"},{"location":"wwdc21/DevTools.html#will-swift-playgrounds-support-all-the-latest-new-technologies-swift-55-is-introducing-asyncaway-actorsetc","text":"Yes! Swift Playgrounds 4 will ship with the Swift 5.5 compiler, including support for structured concurrency.","title":"Will Swift Playgrounds support all the latest new technologies Swift 5.5 is introducing ? (Async/Away, Actors...etc)"},{"location":"wwdc21/DevTools.html#does-swift-playgrounds-support-using-packages-with-swift-package-manager-for-example-using-a-networking-library-when-building-a-swiftui-app-on-the-ipad","text":"Yes! The apps you build can depend on any publicly-available Swift Package. You are specifically saying \u201cpublicly available\u201d. So I assume there will be no support for signing into a GitHub account for example, or to provide SSH credentials for a non-public repository at the beginning, right? That's correct\u2014at this time, we do not plan to support packages that require authentication.","title":"Does Swift Playgrounds support using packages with Swift Package Manager? For example, using a networking library when building a SwiftUI app on the iPad."},{"location":"wwdc21/DevTools.html#what-kind-of-apps-can-be-created-and-submitted-to-the-app-store-ipad-and-iphone-only-or-macos-apps-as-well-even-if-only-through-catalyst","text":"Apps built using Swift Playgrounds are built universal against the iOS SDK, so when they\u2019re distributed using TestFlight or the App Store, they\u2019ll run on iPhone, iPad, and Apple Silicon Macs.","title":"What kind of apps can be created and submitted to the App Store? iPad and iPhone only? Or macOS apps as well, even if only through Catalyst?"},{"location":"wwdc21/DevTools.html#thursday","text":"What are best practices for including and managing a lot of Swift Package dependencies in a project? Adding them to the project file doesn't scale well after more than a handful. I believe this WWDC talk is a great resource for Swift Package Management Best Practices: https://developer.apple.com/videos/play/wwdc2019/408/","title":"\ud83d\uddd3 Thursday"},{"location":"wwdc21/DevTools.html#so-excited-about-the-vim-keybindings-i-have-waited-more-than-a-decade-for-it","text":"Does the team have a plan for supporting a richer set (repeat command (.), replace command \u00ae, macros, \u2026) Good morning, and thanks for taking the time to ask this question! If there are suggestions or features your would like please submit them using the feedback assistant on https://developer.apple.com/bug-reporting/","title":"So excited about the Vim keybindings (I have waited more than a decade for it!)."},{"location":"wwdc21/DevTools.html#i-am-seeing-that-sometimes-xcode-13-cant-optclick-on-symbols-cant-find-quick-help-it-works-on-some-frameworks-methods-but-not-on-class-properties-and-methods-and-frameworks-from-cocoapods-most-of-the-time-the-same-click-worked-in-xcode-12-i-cant-attach-a-screenshot-to-the-question-haha","text":"That sounds like an issue we'd like to investigate further. If you can reproduce it, would you mind filing a bug report using feedback assistant? If you can run Xcode with some logging enabled, it would help us understand it better. Try running Xcode from Terminal like this, env SOURCEKIT_LOGGING=3 /path/to/Xcode.app/Contents/MacOS/Xcode , and then reproduce the problem by opt+clicking the symbol. If you can also provide a screen recording demonstrating the problem, it would help.","title":"I am seeing that sometimes Xcode 13 cant opt+Click on symbols can't find quick help. It works on some frameworks methods, but not on class properties and methods, and frameworks from cocoapods most of the time. The same click worked in Xcode 12. I can't attach a screenshot to the question haha."},{"location":"wwdc21/DevTools.html#are-you-taking-xcodebuild-questions","text":"If I try to create an xcframework ( xcodebuild -create-xcframework ... ) that contains both Intel and ARM simulator frameworks I get the error Both ios-arm64-simulator and ios-x86_64-simulator represent two equivalent library definitions. Has this been fixed in Xcode 13? It sounds like you have two separate thin (single-architecture) binaries, one for each arch, but both for the simulator. XCFrameworks don't support that; there needs to be only a single multi-arch binary. You can use the lipo tool (which is what Xcode uses) to combine your binaries if you're not using Xcode to build the product already.","title":"Are you taking xcodebuild questions? :)"},{"location":"wwdc21/DevTools.html#does-the-new-xcode-pr-review-feature-supports-a-strategy-with-forking-so-far-i-can-only-create-a-pr-that-points-my-forks-main-branch-not-the-original-repo-of-my-fork","text":"Xcode\u2019s pull request feature doesn\u2019t work with forked repositories. It doesn't support submitting pull requests to an upstream repository.","title":"Does the new Xcode PR review feature supports a strategy with forking? So far I can only create a PR that points my fork's main branch, not the original repo of my fork."},{"location":"wwdc21/DevTools.html#when-you-create-a-new-project-using-the-ios-app-template-and-select-swiftui-for-the-interface-there-is-no-more-infoplist-file-instead-i-can-find-it-inside-project-targets-info-however-how-can-i-access-the-files-xml-source-code","text":"You should still be able to find the Info.plist file in the project directory under: <Project Root Directory>/<Project Name>/Info.plist . From there, it can be edited with your favorite editor, including Xcode. It can also be opened quickly in Xcode by using Cmd + Shift + O and searching for Info.plist.","title":"When you create a new project using the iOS App template, and select SwiftUI for the interface, there is no more Info.plist file. Instead, I can find it inside Project -&gt; Targets -&gt; Info. However, how can I access the file's XML source code?"},{"location":"wwdc21/DevTools.html#our-repo-doesnt-commit-in-the-xcodeproj-but-generates-it-locally-on-the-fly-does-xcode-cloud-support-a-case-when-a-project-is-generated-or-modified-in-the-post-clone-script","text":"Yes. Bear in mind that creating your first workflow with Xcode Cloud happens from Xcode. It analyzes your project locally, suggests a configuration to quickly create you first workflow. In the scenario where you do not check in your Xcode project file, then these are the adjusted setup steps: You need to generate the Xcode project file locally. To exclude it from your repo, you could add a .gitignore rule. Add the add Xcode project generation to post-clone script. Create first workflow from Xcode. Create first workflow from Xcode: https://developer.apple.com/documentation/xcode/configuring-your-first-xcode-cloud-workflow Post clone script: https://developer.apple.com/documentation/xcode/writing-custom-build-scripts","title":"Our repo doesn't commit in the .xcodeproj but generates it locally on the fly. Does Xcode Cloud support a case when a project is generated or modified in the post-clone script?"},{"location":"wwdc21/DevTools.html#is-there-a-way-to-quickly-mark-a-swift-spm-package-for-editing-in-xcode-13-similar-to-how-you-can-swift-package-edit-at-the-command-line-or-is-it-still-required-that-i-separately-clone-the-package-and-drag-it-into-my-project","text":"The workflow for this remains unchanged from previous versions of Xcode.","title":"Is there a way to quickly mark a Swift (SPM) Package for editing in Xcode 13? (Similar to how you can swift package edit at the command-line), or is it still required that I separately clone the package, and drag it into my project?"},{"location":"wwdc21/DevTools.html#how-did-the-team-prioritize-which-new-features-to-build-vs-which-features-to-work-on-later","text":"One of the many considerations we take into account would be what we receive from Developers via the Feedback application. Please send us your suggestions \u2014you can send those with the Feedback Assistant. https://developer.apple.com/bug-reporting/","title":"How did the team prioritize which new features to build vs which features to work on later?"},{"location":"wwdc21/DevTools.html#creating-a-new-project-with-xcode-13-doesnt-show-up-the-products-directory-in-the-project-navigator-is-it-possible-to-add-it-back-per-project-or-globally","text":"The Products directory will no longer be shown by default in newly created projects, as you noticed. You can still get to the directory with your build products by using the new Product -> Show Build Folder in Finder menu item. If there is a reason why you would want to always show the products directory in the project navigator, we'd love for you to file a Feedback via Feedback Assistant to explain your use case. https://developer.apple.com/bug-reporting/","title":"Creating a new project with Xcode 13 doesn't show up the Products directory in the Project Navigator, is it possible to add it back per project or globally?"},{"location":"wwdc21/DevTools.html#what-powers-xcodes-new-swift-syntax-highlighting-it-looks-very-similar-to-the-semantic-highlighting-recently-merged-into-sourcekit-lsp","text":"If sourcekit-lsp is being used, will future improvements be available in Xcode too, and will Xcode's features (like live issues) be available in sourcekit-lsp at some point? Xcode 13 has a brand new syntax highlighting implementation for Swift, which is optimized for performance. This is unrelated to sourcekit-lsp. If you see any issues, please report feedback: https://developer.apple.com/bug-reporting/","title":"What powers Xcode's new Swift syntax highlighting? It looks very similar to the semantic highlighting recently merged into sourcekit-lsp!"},{"location":"wwdc21/DevTools.html#what-is-recommended-option-of-adding-spm-dependency-from-private-github-repo-am-i-right-that-for-xcode-it-is-https-url-accompanied-by-xcode-github-account-question-if-i-need-to-connect-two-private-repos-from-github-and-one-uses-account1-another-uses-account2-how-to-specify-what-account-to-use-with-what-repository","text":"You're correct that when using privately hosted packages in Xcode you'll want to be signed into your source control account(s) (in Preferences \u2192 Accounts). Authentication should be handled automatically and should choose the correct account for each package. If you run in to any issues, we'd really love to hear about it via Feedback Assistant. :bow:","title":"What is recommended option of adding SPM dependency from private GitHub repo? Am I right, that for Xcode it is https:// url accompanied by Xcode GitHub account? Question: if I need to connect two private repos from GitHub, and one uses account1, another uses account2. How to specify, what account to use with what repository?"},{"location":"wwdc21/DevTools.html#what-is-the-simplest-way-to-view-a-diff-of-changes-to-the-documentation-sometimes-ill-find-on-twitter-from-an-apple-engineer-or-writer-that-particular-docs-have-been-updated-but-im-curious-if-theres-a-more-consolidated-and-comprehensive-way-to-find-docs-updates","text":"I checked in with the documentation team on this \u2013 while it's possible to view a diff to see what changed for individual APIs, there is not currently an overarching view that would show all the diffs between two versions. If that's something you'd find useful, please do submit that feedback via feedbackassistant.apple.com for the documentation team to look into!","title":"What is the simplest way to view a diff of changes to the documentation? Sometimes I'll find on Twitter from an Apple engineer or writer that particular docs have been updated, but I'm curious if there's a more consolidated and comprehensive way to find docs updates."},{"location":"wwdc21/DevTools.html#given-that-the-legacy-build-system-is-deprecated-were-still-noticing-that-the-new-build-system-is-slower-to-run-a-build-than-the-old-one-were-very-sensitive-to-build-performance-currently-a-roughly-no-op-build-with-the-legacy-build-system-is-roughly-60s-on-a-recent-mac-pro-with-our-codebase-and-considerably-less-than-that-on-legacy-any-optimization-tips-would-be-greatly-appreciated","text":"Also - a lot of this is spent in the build planning step -- are there plans to cache or reduce build graph evaluation in the future? Let me know if filing a radar/feedback is useful. Task planning should only re-run if something in the project structure has changed between builds; when doing (for example) an immediate no-op rebuild, this shouldn't happen. Please file a bug report. If you can attach a sample project which reproduces the problem, that would help, as I suspect there's something in the project structure which is triggering this.","title":"Given that the legacy build system is deprecated, we're still noticing that the new build system is slower to run a build than the old one. We're very sensitive to build performance -- currently a roughly no-op build with the legacy build system is roughly 60s on a recent Mac Pro with our codebase and considerably less than that on legacy. Any optimization tips would be greatly appreciated!"},{"location":"wwdc21/DevTools.html#do-you-have-any-general-guidance-for-writing-useful-feedback-assistant-reports-for-xcode-for-example-is-it-a-good-idea-to-make-bug-reports-isolated-and-minimal-in-an-xcode-playground","text":"We have some great tips for filing bug reports using Feedback Assistant here: https://developer.apple.com/news/?id=vvrgkboh Yes, it is an excellent idea to create a minimal scenario that shows your issue. Screenshots and a sysdiagnose also help us investigate the issue. We really do read every one of your bug reports too so as one of the folks that reads those, I just want to say thanks for asking this question! We really appreciate those reproducible, actionable bug reports!","title":"Do you have any general guidance for writing useful Feedback Assistant reports for Xcode? For example, is it a good idea to make bug reports isolated and minimal in an Xcode playground?"},{"location":"wwdc21/DevTools.html#how-is-your-experience-using-xcode-to-work-on-xcode","text":"It\u2019s definitely a very \u201cmeta\u201d experience to write code for new functionality in the Source Editor \u2026 in the Source Editor. Or to debug Xcode using Xcode. Honestly, you sometimes loose track of which one you are working in and which one your are debugging. We can also profile Instruments with Instruments by the way. So it\u2019s definitely fun to build the tools you are working with every day. It\u2019s not as fun to break the tools you are working with every day. Luckily, we\u2019ve been using Xcode Cloud with the Xcode project to make this less likely!","title":"How is your experience using Xcode to work on Xcode?"},{"location":"wwdc21/DevTools.html#why-doesnt-the-new-http-traffic-instrument-work-with-the-simulator-is-this-a-limitation-that-might-be-fixed-in-a-future-beta","text":"Thank you for your feedback; it's a known issue in Beta-1 that we are investigating, as the feature is is intended to work in simulator.","title":"Why doesn't the new HTTP Traffic Instrument work with the simulator. Is this a limitation that might be fixed in a future beta?"},{"location":"wwdc21/DevTools.html#how-does-the-team-decide-if-a-particular-subsystem-of-xcode-should-be-open-source-for-community-contributions-also-do-you-have-any-tips-for-getting-started-contributing-to-aspects-to-tooling-on-apples-github-perhaps-low-hanging-fruit","text":"For the Swift project, we have some bugs tagged as \"starter bugs\". Suitable for new contributors, some even if you have no experience with compilers! https://bugs.swift.org/browse/TF-67?jql=status%20%3D%20Open%20AND%20labels%20%3D%20StarterBug%20AND%20assignee%20in%20(EMPTY)","title":"How does the team decide if a particular subsystem of Xcode should be open source for community contributions? Also, do you have any tips for getting started contributing to aspects to tooling on Apple's GitHub (perhaps low-hanging fruit)?"},{"location":"wwdc21/DevTools.html#is-there-any-way-to-cache-swift-package-manager-dependency-builds-this-is-one-of-the-longest-steps-in-our-current-build-especially-on-ci-we-cache-the-checkouts-for-them-but-being-able-to-cache-spm-builds-would-save-a-lot-of-time","text":"Adding clonedSourcePackagesDirPath to your xcodebuild flags should help you point CI systems to already downloaded packages. There are Swift Package Manager Office Hours starting today at 3pm and it might be a better forum for this question.","title":"Is there any way to cache Swift Package Manager dependency builds? This is one of the longest steps in our current build, especially on CI. We cache the checkouts for them, but being able to cache SPM builds would save a lot of time!"},{"location":"wwdc21/DevTools.html#what-does-allow_target_platform_specialization-supported_platforms-actually-do-can-i-build-xcframework-fro-macosiostvos-with-one-xcodebuild-call","text":"SUPPORTED_PLATFORMS defines the platforms a target supports building for. For example a framework target which can be built for either iOS or watchOS. ALLOW_TARGET_PLATFORM_SPECIALIZATION allows a target to build for multiple platforms in a single build. For example, building an iOS app with an included watchOS app, both of which depend on that framework, so the framework can be built for both platforms. But XCFrameworks still need to be built with a separate xcodebuild invocation.","title":"What does ALLOW_TARGET_PLATFORM_SPECIALIZATION + SUPPORTED_PLATFORMS actually do? Can I build XCFramework fro macOS/iOS/tvOS with one xcodebuild call?"},{"location":"wwdc21/DevTools.html#is-there-a-way-to-create-our-own-file-templates-for-adding-a-new-file-to-a-swift-package-manager-module-the-existing-templates-dont-include-substitution-templates-so-they-require-modification-ie-replacing-swiftuiview-in-both-the-view-and-the-previewprovider-before-theyre-as-useful-as-their-standard-xcode-new-file-equivalent-templates","text":"There's currently no way to customize new file templates (but, as ever, if you'd like to see this happen please file Feedback!). Generally, creating a new file in a package from within Xcode (e.g., \u2318n while your package is selected in the Project Navigator) should bring up the same New File template pane as you would see for a project. If you're seeing something else or if this doesn't meet your expectations, we'd love to hear about it.","title":"Is there a way to create our own file templates for adding a new file to a Swift Package Manager module? The existing templates don't include substitution templates, so they require modification (i.e. replacing SwiftUIView in both the View and the PreviewProvider) before they're as useful as their standard Xcode New File equivalent templates."},{"location":"wwdc21/DevTools.html#is-there-some-way-to-download-xcode-using-the-app-store-connect-api-and-the-keys-that-it-generates-this-would-be-super-useful-in-automated-workflows-to-setup-ci-machines-with-xcode","text":"While there are solutions like Configurator and Remote Desktop that allow you to install apps from the Mac App Store, including Xcode, there is not a way to install Xcode through the App Store Connect API. It sounds like the best solution for your situation would likely be to utilize Xcode available as a download in XIP format from developer.apple.com/download","title":"Is there some way to download Xcode using the App Store Connect API and the keys that it generates ? This would be super useful in automated workflows to setup CI machines with Xcode."},{"location":"wwdc21/DevTools.html#how-does-xcode-cloud-work-for-projects-that-make-use-of-multiple-developer-accounts-for-example-we-have-one-enterprise-account-for-development-and-beta-builds-and-then-a-separate-developer-account-for-our-app-store-builds-would-we-be-able-to-share-configuration-between-these-two-accounts-or-will-they-have-to-be-separate","text":"You cannot share data between different Developer Program accounts, all accounts are private and secure as you would expect. Also Apple Developer Enterprise Program accounts are not supported in Xcode Cloud at this point in time.","title":"How does Xcode Cloud work for projects that make use of multiple developer accounts? For example, we have one enterprise account for development and beta builds, and then a separate developer account for our App Store builds. Would we be able to share configuration between these two accounts or will they have to be separate?"},{"location":"wwdc21/DevTools.html#in-objc-projects-where-headers-havent-changed-how-can-we-debug-unexpected-fullnear-full-rebuilds-for-debug","text":"If you think this could be a bug and you can attach a reproducible case, please file a bug report. That said, you can set a user default: defaults write com.apple.dt.XCBuild EnableBuildDebugging -bool YES which will dump Intermediates.noindex/XCBuildData/BuildDebugging- directories containing trace files (which are text files despite the file extension) which have the low-level dependency analysis that the build performs. There is not tooling for processing these files, but they might provide some insight into your situation. Important: You should delete this user default when you've collected the data you want, as enabling build debugging can affect build times. It's not intended to be left enabled all the time.","title":"In ObjC projects where headers haven't changed, how can we debug unexpected full/near-full rebuilds for Debug?"},{"location":"wwdc21/DevTools.html#what-was-the-reasoning-behind-having-the-http-request-monitoring-in-instruments-vs-the-activity-monitor-in-xcode-it-wouldve-been-cool-to-not-have-to-intentionally-run-and-setup-instruments-to-have-that-working","text":"I assume you are referring to the debug gauges in the Debug navigator. We do already show the \u201cNetwork\u201d activity. However, the HTTP Traffic instrument shows very detailed information that wouldn\u2019t all fit into the the existing debug gauges. There are many different ways to visualizes network activity and even the HTTP Traffic instruments provides several ways to visualize your activity. However, if a specific summary view about HTTP traffic would be really helpful to you in the Debug Navigator within Xcode, please file a Feedback to describe what you would like to see there. https://developer.apple.com/bug-reporting/","title":"What was the reasoning behind having the HTTP Request monitoring in Instruments vs the Activity Monitor in Xcode? It would've been cool to not have to intentionally run and setup Instruments to have that working."},{"location":"wwdc21/DevTools.html#has-the-team-ever-considered-allowing-xcode-to-send-macos-notifications-for-example-when-tests-pass-fail","text":"After tests finish, if Xcode is not the frontmost application, it posts a macOS notification describing whether testing succeeded or failed. Beyond testing, Xcode includes a flexible feature called Behaviors which allows you to opt-in to receiving notifications when various events occur during your development workflow. For more details, see https://developer.apple.com/library/archive/documentation/ToolsLanguages/Conceptual/Xcode_Overview/CustomizingYourWorkflow.html","title":"Has the team ever considered allowing Xcode to send macOS notifications - for example when tests pass / fail ?"},{"location":"wwdc21/DevTools.html#macos-build-worked-on-xcode-cloud-are-these-apple-silicon-devices-or-intel-based-or-can-we-select","text":"Xcode Cloud builds universal binaries, just as Xcode does on your local Mac, that are compatible with all Macs. For more information about Universal Binaries, please check the developer documentation here: https://developer.apple.com/documentation/apple-silicon/building-a-universal-macos-binary","title":"MacOS build worked on xcode cloud, are these Apple silicon devices or Intel based? or can we select?"},{"location":"wwdc21/DevTools.html#my-team-produces-a-number-of-software-components-and-weve-recently-switched-from-packaging-them-as-static-frameworks-to-xcframeworks-xcode-doesnt-have-a-target-type-for-producing-xcframeworks-please-tell-me-that-im-wrong-so-that-packaging-happens-in-a-post-archive-script-when-we-were-just-producing-static-frameworks-we-could-drop-several-of-our-projects-into-a-common-workspace-and-it-was-easy-to-debug-right-into-each-of-those-frameworks-xcode-figures-out-that-since-the-foo-project-builds-the-foo-framework-other-projects-in-the-workspace-should-link-against-that-wed-really-like-to-do-the-same-thing-with-our-xcframeworks-but-they-dont-seem-to-be-supported-as-well-is-there-something-we-can-do-to-debug-into-our-xcframeworks-when-their-respective-projects-are-all-in-a-workspace-together","text":"Thanks for reaching out! XCFrameworks are not intended to be used during development if you're a team that produces them. From your perspective, they should be used only for distribution. For development, you should use dynamic framework targets and then link them into your executable that you'd like to debug. For more information on multi-platform frameworks, we suggest to watch \"Explore advanced project configuration in Xcode\" WWDC Session, which is set to be released on Friday: https://developer.apple.com/wwdc21/10210 Please let us know if you have any follow up questions or thoughts!","title":"My team produces a number of software components, and we've recently switched from packaging them as static frameworks to XCFrameworks. Xcode doesn't have a target type for producing XCFrameworks (please tell me that I'm wrong!), so that packaging happens in a post-archive script. When we were just producing static frameworks, we could drop several of our projects into a common workspace and it was easy to debug right into each of those frameworks -- Xcode figures out that since the Foo project builds the Foo framework, other projects in the workspace should link against that. We'd really like to do the same thing with our XCFrameworks, but they don't seem to be supported as well. Is there something we can do to debug into our XCFrameworks when their respective projects are all in a workspace together?"},{"location":"wwdc21/DevTools.html#with-vim-mode-can-you-support-v-to-visual-select-lines-fb9145839","text":"It looks like you already submitted the request via feedback assistant. Thanks for doing that, it's the best way to let us know of any enhancements you'd like to see.","title":"With Vim mode, can you support \u201cV\u201d to visual select lines? FB9145839"},{"location":"wwdc21/DevTools.html#when-are-we-going-to-see-testflight-beta-user-crash-report-with-the-user-information-it-helps-a-lot-when-we-receive-a-bug-report-from-the-user-and-find-the-stacktrace-of-the-crash","text":"In Xcode 13, the Crashes Organizer will show you feedback from TestFlight users of your app, including user information like name and email address if the user chose to provide it. In addition, you can view feedback and download the crash log directly from App Store Connect.","title":"When are we going to see TestFlight beta user crash report with the user information? It helps a lot when we receive a bug report from the user and find the stacktrace of the crash."},{"location":"wwdc21/DevTools.html#xcode-cloud-looks-great-has-the-team-or-others-in-channel-tested-it-with-fastlane-based-ci-workflows-to-date","text":"Xcode Cloud is designed to automatically build, test, and prepare your app for TestFlight and the App Store. And should you need to install additional third-party tools to accomplish other tasks, then this can be done using Custom Build Scripts. You can learn more about extending Xcode Cloud here: https://developer.apple.com/documentation/xcode/writing-custom-build-scripts","title":"Xcode Cloud looks great. Has the team (or others in-channel) tested it with Fastlane-based CI workflows to date ?"},{"location":"wwdc21/DevTools.html#we-built-sdk-for-our-clients-not-an-app-and-have-several-semi-independent-components","text":"I want to understand what would be ideal way to distribute our SDK as XCFramework where it depends on our two other internal static libraries. But out of one we need to distribute one dependency as dynamic framework mainly as XCFramework moving forward. SDK is mix of Objc and Swift. Existing Structure SDK - Distribution as Dynamic FAT Framework. SDK has dependency on StaticLibrary1 and resources which are brought using cocoapods - whose public API needs to be available as part of SDK public interface. SDK contains StaticLibrary2 - whose public API needs to be available as part of SDK public interface. End goal is to distribute SDK as XCFramework. Should we distribute other dependency as XCFramework as well and integrator needs to bring all those three in order to utilize our SDK An XCFramework can be used to distribute a framework for multiple platforms in a single bundle, but XCFrameworks don\u2019t provide any support for distributing an SDK; you still need to distribute a single XCFramework for each framework you\u2019re distributing. Xcode doesn\u2019t provide support for constructing SDKs like you\u2019re distributing; you would need to provide guidance to your users to use the frameworks you're providing to them.","title":"We built SDK for our clients, not an app and have several semi-independent components."},{"location":"wwdc21/DevTools.html#xcode-cloud-can-it-produce-signed-developer-id-mac-apps-two-answers-in-this-channel-conflict-one-said-only-app-store-the-other-said-yes-developer-id","text":"Great question! Xcode Cloud does not support Developer ID-signed Mac apps. It supports Development and Mac App Store signing. I encourage you to submit a feedback request for any enhancements you'd like to see in the future!","title":"Xcode Cloud: can it produce signed Developer ID Mac apps? Two answers in this channel conflict (one said only App Store, the other said yes Developer ID)"},{"location":"wwdc21/DevTools.html#will-it-be-possible-to-be-notified-by-email-when-a-user-submits-a-feedbackwith-a-crash","text":"That is great feedback! Please submit an enhancement request with details about what you'd like to see via Feedback Assistant.","title":"Will it be possible to be notified by email when a user submits a feedback(with a crash)?"},{"location":"wwdc21/DevTools.html#in-xcode-organizer-is-there-anyway-to","text":"See watchdog crashes Search by the stack trace content of a crash See a version's all crashes and not only the top ones There is not a way to see individual watchdog crashes in the Xcode Organizer. However the new Terminations metric in Xcode 13 will show you aggregated data about all types of terminations that customers are experiencing in your app. Searching by the content of a stack trace is not available in the Organizer, but this would be a great enhancement to request via Feedback Assistant! In Xcode 13, you can see up to 1000 of your app's crashes for the past year, so you can view and investigate far more than the top 25 crashes.","title":"In Xcode Organizer, is there anyway to:"},{"location":"wwdc21/DevTools.html#do-you-think-xcode-cloud-has-value-for-individual-developers-or-just-teams","text":"Xcode Cloud can greatly add value, even for individual developers. It can easily help you validate the code you write by starting integration jobs that will also run your tests on multiple run destinations (i.e. iOS/iPadOS simulator, Mac Catalyst) in addition to building. This way, you will feel more confident about your work when shipping updates of your App (it also handles code-signing for you). With Xcode Cloud, your project is ready to accept outside contributions without needing to maintain a CI infrastructure.","title":"Do you think Xcode Cloud has value for individual developers, or just teams?"},{"location":"wwdc21/DevTools.html#what-are-some-of-your-favorite-tips-and-tricks-for-triaging-crashes","text":"When I am looking at a new crash in an area I am not familiar with, one of the first things I do is try to understand why it is crashing. Asking yourself questions can also help you get a quick understanding of what kind of crash it is. \"Is it crashing because I made an assumption I shouldn't be?\" \"Is this framework I am using expecting something different than what I am giving it?\" \"Does this only happen sometimes?\" Answering those questions can get you started on understand the crash and then working towards a fix! Using the Organizer's inspector allows me to see how big of a problem it is. It can tell me all about how many devices this crash is happening on, what versions of the OS, and new this year,: where is it crashing (App Store or TestFlight) and which app versions?","title":"What are some of your favorite tips and tricks for triaging crashes?"},{"location":"wwdc21/DevTools.html#our-project-has-multiple-build-configurations-not-just-release-and-debug-currently-with-cocoapods-we-can-have-different-dependencies-for-each-build-configuration-last-time-we-checked-this-was-not-possible-with-spm-has-this-changed-if-not-do-you-expect-this-to-change-in-the-future","text":"There is a proposal for conditional target dependencies (see https://github.com/apple/swift-evolution/blob/main/proposals/0273-swiftpm-conditional-target-dependencies.md) but this has not yet been fully implemented.","title":"Our project has multiple build configurations, not just release and debug. Currently with Cocoapods we can have different dependencies for each build configuration. Last time we checked this was not possible with SPM. Has this changed? If not, do you expect this to change in the future?"},{"location":"wwdc21/DevTools.html#is-there-a-way-to-only-update-a-single-package-if-i-have-multiple-packages-specifying-up-to-next-major-xcode-will-try-to-update-all-of-them-when-i-run-update-to-latest-package-versions-but-sometimes-i-might-only-want-to-update-a-specific-one","text":"Not at the moment, but it is something we are looking to make available on both the CLI and Xcode.","title":"Is there a way to only update a single package? If I have multiple packages specifying \"Up to next major\", Xcode will try to update all of them when I run \"Update to Latest Package Versions\" but sometimes I might only want to update a specific one."},{"location":"wwdc21/DevTools.html#hi-spm-is-incredible-does-the-presence-of-playgrounds-for-ipad-mean-that-we-can-replace-xcodeproj-based-projects-with-spm-based-projects-even-for-non-console-apps-thanks","text":"We're glad you like it! Because projects in Swift Playgrounds are built on top of the Swift Package format, they'll also work great in Xcode when making apps for iPadOS.","title":"Hi, SPM is incredible! Does the presence of Playgrounds for iPad mean that we can replace xcodeproj-based projects with SPM-based projects even for non-console apps? Thanks!"},{"location":"wwdc21/DevTools.html#whats-the-best-method-for-simultaneously-develop-an-app-and-its-dependent-swift-packages-local-development-with-submodule","text":"Check out https://developer.apple.com/documentation/swift_packages/editing_a_package_dependency_as_a_local_package","title":"What's the best method for simultaneously develop an app and its dependent Swift packages? (local development with submodule?)"},{"location":"wwdc21/DevTools.html#if-ive-got-private-dependencies-from-lets-say-github-via-ssh-if-they-require-different-credentials-i-can-use-sshconfig-to-tie-ssh-keys-to-specific-configurations-spm-uses-that-perfectly-but-if-i-put-same-packageswift-file-into-xcode-it-does-not-is-it-possible-to-make-xcode-behave-like-swift-package-commands-in-this-case-thanks","text":"You can configure Xcode to use the system git instead of the builtin one, which is what SwiftPM uses on the command line. See \"Use Your System\u2019s Git Tooling\" in https://developer.apple.com/documentation/swift_packages/building_swift_packages_or_apps_that_use_them_in_continuous_integration_workflows","title":"If I've got private dependencies from, let's say GitHub via ssh. If they require different credentials, I can use ~/.ssh/config to tie ssh keys to specific configurations. SPM uses that perfectly. But if I put same Package.swift file into Xcode, it does not. Is it possible to make Xcode behave like swift package commands in this case? Thanks!"},{"location":"wwdc21/DevTools.html#have-there-been-improvements-to-checkout-times-in-xcode-13-weve-had-to-fork-many-of-our-dependencies-and-remove-the-git-history-to-allow-for-reasonable-checkout-times","text":"Starting Swift 5.4, Swift Package Manager caches package dependencies on a per-user basis, which reduces the amount of network traffic and increases performance of dependency resolution for subsequent uses of the same package. This means that while the initial clone may still be slow depending on the repository size, subsequent clones are much faster. This can also be used in CI by configuring the cache location. See https://swift.org/blog/swift-5-4-released/","title":"Have there been improvements to checkout times in Xcode 13? We've had to fork many of our dependencies and remove the git history to allow for reasonable checkout times."},{"location":"wwdc21/DevTools.html#is-there-a-way-to-check-to-see-if-there-are-updates-available-without-installing-them-equivalent-to-pod-outdated","text":"There's not a convenient command to do this yet. As a workaround, you could perform an update, then revert your Package.resolved file to its prior state with your source control system to go back to your old dependency versions.","title":"Is there a way to check to see if there are updates available without installing them, equivalent to pod outdated?"},{"location":"wwdc21/DevTools.html#friday","text":"What is the recommended practice to run a test case only on the specific OS version? Adding @available(iOS 14, *) directive on the top of class declarations seems not working somehow. The recommended way for this is to use one of the XCTest APIs to skip the test if the required APIs are not available. There is more information at https://developer.apple.com/documentation/xctest/methods_for_skipping_tests","title":"\ud83d\uddd3 Friday"},{"location":"wwdc21/DevTools.html#maybe-this-has-been-asked-but-with-the-new-testflight-crash-logging-in-xcode-organizer-will-there-be-a-way-to-integrate-this-with-issue-trackers-like-jira","text":"Sorry, we don't have the answer to your question in this lab, but, if you haven't already seen it, I would recommend checking out the Triage TestFlight crashes in Xcode Organizer video at https://developer.apple.com/wwdc21/10203","title":"Maybe this has been asked, but with the new TestFlight crash logging in Xcode Organizer, will there be a way to integrate this with issue trackers like Jira?"},{"location":"wwdc21/DevTools.html#are-there-any-recommended-workflows-for-using-run-scripts-inside-of-a-packageswift-file-there-have-definitely-been-a-few-times-where-ive-wanted-to-have-my-packageswift-file-generate-things-like-compiled-protobuf-models-thanks","text":"SE-0303 defines new functionality in SwiftPM enabling the creation of structured plugins for code generation.","title":"Are there any recommended workflows for using run scripts inside of a Package.swift file? There have definitely been a few times where I've wanted to have my Package.swift file generate things like compiled protobuf models. Thanks!"},{"location":"wwdc21/DevTools.html#can-static-analyzer-in-xcode-13-find-dead-code-like-unused-variables-and-methods","text":"Xcode provides compiler warnings for unused local variables and unused static functions and unused C++ private methods. There are no warnings for unused Objective-C methods because in Objective-C it's a fairly hard technical problem as it's a very dynamic language. The static analyzer provides additional warnings for problems that require deeper analysis such as unused initializations or assignments that get immediately overwritten (\"dead stores\") and redundant if-clauses and operands in expressions (new in this release! - off by default, see the \"Unused Code\" section in build settings). Do Static Analyzer works with Swift? The static analyzer can detect bugs in C/C++ and ObjC code. It doesn\u2019t detect bugs in Swift code. However, you can use the analyzer on mixed Swift-ObjC projects. We recommend running the analyzer on your project if it has C/C++ or ObjC code as some issues the analyzer can detect on ObjC code can manifest as hard-to-find bugs when used from Swift.","title":"Can Static Analyzer in Xcode 13 find dead code like unused variables and methods?"},{"location":"wwdc21/DevTools.html#how-big-would-be-the-time-impact-on-building-with-xcode-if-i-turn-on-the-analyze-during-build-flag","text":"Usually we expect 2-5x slowdown. You can set mode for analysis to \"Shallow\", which is generally faster (2-3x slowdown), but finds fewer bugs.","title":"How big would be the time impact on building with Xcode if I turn ON the \u201cAnalyze During build flag?\u201d"},{"location":"wwdc21/DevTools.html#does-the-static-analyzer-analyzes-the-full-source-code-of-my-project-including-third-party-libraries-and-frameworks-if-so-can-i-configure-which-frameworks-to-exclude","text":"This is a great question! The static analyzer will analyze all third party code as long as it's getting compiled when you're building your app (i.e., binary frameworks aren't analyzed) and it's written in a language supported by the static analyzer (i.e. C/C++/Objective-C but not Swift). There is no way to exclude individual frameworks but given that the source code is available, you may have a chance to edit it to suppress unwanted warnings.","title":"Does the Static Analyzer, analyzes the full source code of my project including third party libraries and frameworks? If so, can I configure which frameworks to exclude?"},{"location":"wwdc21/DevTools.html#is-there-any-point-in-running-on-the-static-analyzer-on-pure-swift-code","text":"If your app has only Swift code, the analyzer wouldn\u2019t find any issues. However, if your project has ObjC code as well, we recommend running the analyzer.","title":"Is there any point in running on the static analyzer on pure Swift code?"},{"location":"wwdc21/SwiftUI.html","text":"SwiftUI Lounge QAs by emin \ud83d\uddd3 Tuesday What's your recommended approach to displaying a new macOS window? Not a new document or a confirmation dialog, just \"here is some information that makes sense to show right now\", such as unlocking an IAP. I've seen hacks with handlesExternalEvents() but it's not very pleasant. We don\u2019t have much API in this area. A NavigationLink when used within a commands context will open a new window, and as you noted, handlesExternalEvents can be used to, though this is primarily due to the default behavior of that modifier, which is to create a new window for the given scene, if no windows prefer to handle the event. We\u2019d love a feedback for this functionality, and if you can share any specifics of your use case in it, that is even better. Thanks! For SwiftUI macOS document apps, is there a recommended way to save and restore window size and position? Hi, when state restoration is not enabled on macOS, this is expected behavior at the moment. We\u2019d welcome a feedback for this, though. If you could include any information about your use case as well, that\u2019d be very helpful. Thanks! Suggestion to the designers amongst the SwiftUI folks present: it would be great if there were more examples of unique user experience interactions, especially navigation, instead of assuming that everyone wants to always use NavigationView as the central UX construct. UIKit was only slightly better with sparse examples to customize Navigation View transitions, but it too, lacked complete flexibility. Would love to hear your feedback on this! Unfortunately customizing navigation transitions isn\u2019t supported today \u2014 meaning if you want to invent awesome transitions you\u2019ll need to create your own containers and the state that manages them\u2026 but you\u2019ll need to ensure your custom goodies properly handle accessibility, common system interactions, and more which can be tricky. Ideally, please file feedback with some use cases or examples for what you have in mind, I would love to see the team take a look at enabling awesome experiences that work well with the system! Is there ever a case in which Spacer() is superior to .frame(maxWidth: .infinity)/.frame(maxHeight: .infinity)? Howdy! There was a similar question yesterday about Spacer \u2018versus\u2019 frame, check out the answer for how they compare: While Spacer is a view, it doesn't end up displaying anything of its own so it is plenty lightweight. Using .frame can have other behavior introduced to the way the view gets laid out beyond just changing its size. They both have their uses, so use them each where appropriate. To add a little more onto this, even in cases where you will get almost entirely the same behavior between the two, the performance difference will be so minimal that I would strongly suggest prioritizing code readability over performance / memory use to make this decision. If Spacer makes it more clear what layout you\u2019re trying to specify, use that, and vice versa. But the gist is: they both have their purposes and are extremely efficient from a performance perspective. So, you should focus on what your intention is and which reads better or offers the functionality you\u2019re trying to utilize as you construct your hierarchies Hey, Is it a way to have the coordinate of the cursor inside an image in SwiftUI. I would like to display a crosshair by drawing two lines from the cursor to the edges of the picture. I tried with NSEvents but it gave me the cursor location relative to my screen. thanks, Nicolas Howdy! This sounds like excellent topic to file feedback to help the team understand your use case, as I don\u2019t believe this is supported today. How do we set preferredScreenEdgesDeferringSystemGestures in a swiftUI app? Currently you need to use a representable to access that property. Are you able to give some indication of why the semantic background colors from UIKit are missing? We only have Color.background as opposed to the main varying alternatives, and it's annoying to have to wrap them repeatedly. A goal for us is that the Color and other API we provide works great on all platforms. So there are often other APIs to help get those effects: for instance GroupBox on iOS will produce the stacking (secondary and so on) system background colors, and on macOS gives you a similar effect but using the more platform appropriate group box (9-part) artwork instead of colors at all. The new .primary, .secondary, .tertiary, .quaternary shape styles are similar in that they also work across platforms and now can correctly give the correct vibrant rendering effect on top of materials So while we might not add a Color for everything that UIKit has, we do want to make sure we have coverage for those design concepts. (so specific feedbacks on things that are missing are always appreciated!) Things like label , secondaryLabel, etc are all achievable using those shape styles above and are even smarter in those material contexts, i.e. .foregroundStyle(.secondary) If I pass around a single @StateObject through injection from View A to Subview B to Subview C, when the data updates, will all 3 views get invalidated and redrawn? What if only View A and C need to use the data, and view B is only a middleman? Only views that read properties of the object should update, but do note that if a view reads any property it will be invalidated on objectWillChange, even if the particular property begin read did not change. I'm trying to update a Text view based on some state (eg. from a text field). The text is inside a scroll view, and I am using ScrollViewReader to scroll to the end whenever the text changes. For some reason, scrollTo doesn't work until I manually start scrolling \u2014 after that it works fine struct Foo: View { @State private var text = \"\" private let letters = Array(\"abcdefghijklmnopqrstuvqxyz\") private let timer = Timer.publish(every: 0.1, on: .main, in: .common).autoconnect() var body: some View { ScrollView(.horizontal, showsIndicators: false) { ScrollViewReader { scrollView in HStack { Text(self.text) .fixedSize(horizontal: true, vertical: false) .onAppear { scrollView.scrollTo(0) } .onChange(of: self.text) { _ in scrollView.scrollTo(0) } Color.clear .id(0) } } } .onReceive(self.timer) { _ in self.text.append(letters.randomElement()!) } } } Howdy! Please file feedback with this sample code, this looks like an issue the team should take a look at. Additionally, you should take a look at the new TimelineView and replace your use of Timer here. It\u2019s not recommended to declare new objects in your view\u2019s initializer without a @StateObject or @ObservedObject property wrapper, if you must use a Timer, store it inside an ObservableObject that you can refer to as a StateObject, or another similar technique. Is it possible to enable \u201csloppy swiping\u201d for navigation links in SwiftUI (swiping to go back from anywhere on the screen)? Also, is it possible to remove the 8pt buffer before a swipe to go back is recognized (so swipe to go back is recognized instantly rather than having the slight delay)? Unfortunately, this isn\u2019t currently supported, but feel free to file feedback requesting these features! Can a SwiftUI View or Canvas be rendered into a PDF like a UIView can using draw ? Is there another method that does this? Unfortunately, this isn\u2019t currently supported. Please do file a feedback report if that\u2019s a feature you\u2019re interested in. We really do appreciate them! Is there anyway to dismiss a keyboard presented from a TextField while scrolling a List? There is a behavior provided in UIKit by keyboardDismissMode UIScrollView but it's disabled in SwiftUI List. Also, I tried to embed a UIScrollView using UIViewRepresentable and enable keyboardDismissMode but the behavior is buggy Unfortunately, that\u2019s not currently supported. Thank you for the feedback you already filed! We really do appreciate it. If you want to file an additional feedback report requesting API for solving the problem in a SwiftUI-esque way as well, that would be appreciated as well! Is there any way to convert from the old AppDelegate/SceneDelegate lifecycle to the new \"SwiftUI 2\" lifecycle? I'd rather not re-write my entire application, so while it's still in the early-ish phases I wanted to know if this was possible Yes! You can use the UIApplicationDelegateAdaptor property wrapper in your App. Something like this: UIApplicationDelegateAdaptor var myDelegate: MyAppDelegate SwiftUI will instantiate an instance of your UIApplicationDelegate and call it in the normal fashion. Furthermore, if you return a custom scene delegate class from configurationForConnectingSceneSession, SwiftUI will instantiate it and call it as well. Is there a way to make two views from different hierarchies, have the same hight/width/x/y position, that is easier to understand than using Preference Keys? Yes! Look into matchedGeometryEffect. Is it possible to display a SwiftUI view on an external display, on iPad/iPhone, using the SwiftUI App lifecycle? Thanks for the question. I\u2019m afraid that\u2019s not currently supported. this is a strange request, but is it possible to \"intercept\" the actions of a button or gesture with a modifier? wanting to devise a way \"wrap\" the invocation (for example with analytics calls) Unfortunately, that\u2019s not currently possible today. If that\u2019s something you\u2019d find useful, please feel free to file a Feedback requesting it! Are there any places where you think \"yep, this is the place to use onAppear() rather than task() ? onAppear() is still fine to use. There\u2019s no need to update existing code that uses it. Going forward, I think task() provides a more general solution, even for short synchronous work, since it sets you up to evolve towards asynchronous work if necessary in the future. So\u2026 you would always use task() for new code, or are there still places where onAppear() it the right solution? I was maybe expecting to see onAppear() being gently deprecated or similar. I\u2019d always use task() personally, but there\u2019s also a nice symmetry between onAppear() and onDisappear() that some folks will want to maintain. Our apps stores the position of (our custom) split view controls in its documents. It would be nice to use HSplitView, VSplitView and give them as a parameter a binding to set their position to simplify storing and restoring their state. For now it seems I'd need to use a GeometryReader to get the state and a .frame on one of the child views to set the state. Can you recommend a cleaner approach? Howdy! Unfortunately there is no API to do this in SwiftUI today, would you mind filing feedback on this? It would be great to understand your use case here! Is there a way to measure the rendering time or memory footprint for a SwiftUI's body method being called in XCTest? I'd like to setup some baseline testing so that I can be aware of any regressions in performance, but I haven't been able to work out how to do it. I\u2019m afraid not. I\u2019d love to get an enhancement request Feedback for that use case. We have support for Instruments, but not XCTest. In general, to pass data around, would it better to have an EnvironmentObject that could be called within a view, or an ObservedObject that gets passed down (and/or injected) through child views? Both have their uses, and it depends on the architecture you\u2019re building. If you have one (or a few) large ObservableObjects that large parts of the view hierarchy need to see, I would generally recommend EnvironmentObject as SwiftUI can look at which of your views depend on the EnvironmentObject and only invalidate those when your ObservableObject changes (you can get this behavior with ObservedObject too, but it\u2019s more cumbersome). Plus, views that don\u2019t actually use the ObservableObject don\u2019t get cluttered with code relating to it. That said, if your model is, for example, an object graph that is largely not structured based on your view hierarchy, it may make more sense to use ObservedObject to grab pieces of that model out to use in your view. on macOS, you can prevent a window from resizing by setting a specific frame size, however this doesn't prevent fullscreen/zoom. this results in a broken animation and a tiny view in the middle of the screen. it is possible to tell swiftui the window does not support fullscreen? Hi - sorry you are hitting this bug. Using a fixed size frame is the correct expression here. Also, thank you for the feedback! Can you provide guidance for when the following error message is printed in the console: Bound preference CollectionViewSizeKey<UUID> tried to update multiple times per frame ( CollectionViewSizeKey<UUID> is the name of the preference.) The preference is updated from inside a GeometryReader. I think the error message happens if the preference modifier is inside a ScrollView. That indicates a cyclic update. The size of your GeometryReader is changing based on the size of your GeometryReader. Try lifting your GeometryReader higher in the view hierarchy if possible, or look for other ways to avoid the cycle. I am using @ObservedObject now for my model, since I still need to support iOS 13. However I know that @StateObject provides the correct behaviors to me. Is there a suggested way to use them at the same time for back compatibility? I first thought if #available might work, but it does not work for a property. For supporting iOS 13, you\u2019ll need to use @ObservedObject and keep your object alive through some other means, like using a static property or keeping a reference in your application delegate. I don\u2019t think trying to switch between observed object and state object buys you much here, since changing the owner of the object with availability checks would be awkward. I've had several intermittent crashes from environment objects being nil when I pass them to a sheet or NavigationLink. It's tricky to replicate due to being intermittent and I usually work around it by architecting my code differently to avoid passing environment objects. Do you know of reasons this might happen? All I can think of is that the views that originate the environmentObject further up the view hierarchy are being taken out of memory. Thanks for any help you can provide! NavigationLink by design doesn\u2019t flow EnvironmentObjects through to its destination as it\u2019s unclear where the environmentObject should be inherited from. I suspect this might what\u2019s causing your issue. In order to get the behavior you expect, you\u2019ll have to explicitly pass the environmentObject through at that point. You can also apply the environmentObject to the NavigationView itself, which will make it available to all pushed content. Will the project in its entirety from Build apps that share data through CloudKit and Core Data (wwdc21-10015) be available for download? Are GeometryReaders really bad in terms of performance? I'm getting the feeling that they should be avoided, but I don't know if it's because they're inefficient, because they're \"breaking\" the layout, or because other solutions may exist (like anchored preferences) and be better suited for the purpose? Just like any tool, GeometryReader has a time and place where it is correct to use. There aren\u2019t any particular performance pitfalls I\u2019d call out with them, but they shouldn\u2019t be used as a hammer. I noticed that while using Combine and lists (say local search combined with remote results). Lists have a really, REALLY hard time keeping up with animated updates. I found the only reliable way to force correct data representation is to use .id(UUID()) and turn off animations. Is this somewhat expected? We worked really hard on improving List performance in iOS 15, macOS Monterey, and aligned releases. Please try there and let us know if you\u2019re still seeing issues. If you aren\u2019t doing so already, it also may be good to debounce the queries. when creating a UIViewRepresentable , it is dangerous for the Coordinator to hold an instance of the UIView passed in updateUIView() or should it be strictly treated as ephemeral? That is OK! Your coordinator will have been created before any views are \u2014 so in makeUIView you can give the coordinator a reference to that view Hi guys, you all did a great job again congrats. My question is related to CanvasView, that view is pretty awesome and opens lots of possibilities for creative and generative art for example. I would like to know how behaves a Canvas encapsulated in a Timeline receiving updates of Bindings Combine's streams. During the render, does it lost the current time information, does it resets to re-render the new state or there's no re-rende at all and the Timeline still running wherever the body changes? Thank you! As long as the identity of the timeline is the same, and the value of the schedule didn\u2019t change based on the body update, it shouldn\u2019t trigger a new update of the contained Canvas. If the content of the canvas itself changed, you will likely see another update from the TimelineView with the date of the current entry of the schedule. What is the best practice for bypassing the system styling for a component? For example, in a Section header in a grouped list, SwiftUI automatically dims the content and capitalizes all text (as you would expect in a text-only section header for UIKit). Is there a built-in way to bypass this dimming and capitalization? Many of the customizations you see are part of the default styling that lets you have the most natural feeling UI by default. However, most of these default stylings should be overridable by using the same modifiers you would to get that style. For example, if you want to remove the default capitalization of the section header, you can use the text case modifier: Section { // ... } header: { Text(\"My Header\") .textCase(nil) } The same goes for other customization points like foreground style, font, etc. Canvas seems to lose its intrinsic content size and appear as 10x10 when nested in a ScrollView, is there a as to work around this behaviour? Thanks for the question! You might try putting a flexible frame on the Canvas, something like .frame(maxWidth: .infinity, maxHeight: .infinity). (Apologies if I got that a little wrong. \\me files Feedback asking for auto-complete in Slack.) How do I profile SwiftUI code, to know how to optimize my views? Instruments is almost only showing SwiftUI library code, so it's hard to see what is expensive to render... Using the SwiftUI instrument will help call out expensive body methods. In addition it\u2019s important to limit the number of times each views body will get reevaluated. Highly recommend watching the Demystifying talk for some in depth looks at how this works. Pro tip: call the new debug helper Self._printChanges() inside body to log which property caused the view to be reevaluated. Hi folks! Thank you for SwiftUI -- I can't believe how straightforward it makes so many things. I'm wondering, is there any way to bind to the state of expansion in a hierarchical List (i.e. one created with a children ) parameter, so that we can expand and collapse items programmatically? Thanks for the question! I\u2019m afraid there\u2019s not currently a way to bind the expansion state of an entire hierarchy. You can use DisclosureGroup inside a List to bind a single level. I\u2019d love an enhancement request Feedback with your particular use case. Managing the expansion state of an entire hierarchy is a difficult API design problem, so more info on your use case would be super helpful! How can I pass an @EnvironmentObject to a ViewModel? I'm trying to change a tab inside the ViewModel using the UserSettings. @EnvironmentObject and all the other SwiftUI\u2019s property wrappers are only valid and functional when used inside a View. In general I would discourage you from using views to pass data between different model objects. what is the best way to deal with atomic changes in state when changing several state variables in sequence? I can manage this generally with onChange but it doesn't trigger the action when the state variable was set to the same value it had before (thus no change). I'd like to make sure that I trigger my update code even if the value didn't change (equivalent to didSet in Swift, which is triggered regardless of the old value) Additional info pending SE-309 allows using protocols with associated types as existentials, assumedly including View . At that point, will there be a difference between a View existential and AnyView in terms of view identity? I \u2665\ufe0f that proposal! I can\u2019t comment on implementation details, but generally AnyView erases more information than an existential, so the existential would still have the edge. I noticed @FocusState doesn't support an initial value \u2014 instead, you can set the focus in onAppear . Is there a reason for this? One way to think of focus (not to be confused with the new user-facing feature we just launched) is that it is global state managed by the framework. A lot of the times, the user will be the one in control of this state, by selecting a text field, etc. The new @FocusState and focused(_:) API allows for some influence over that state as well, but ultimately, the source of this state is still internal to SwiftUI. Does that help to answer your question? I wasn't able to secure a lab spot (\"applied\" for all of the SwiftUI open labs, but didn't get selected for any). Does anyone know why a disabled button being re-enabled would have the text rendered under the re-enabled color? Thanks for the question. We might need sample code to understand this one. Can you reproduce in a sample view? If so, you could add that sample to a Developer Forums post or ask Developer Technical Support. I'm curious, is ShapeRole working at all? I made my custom shape and overwrite it with .stroke but there was no change in rendering. It always fills the shape. I know the role variable is being accessed (I put a print statement)... but maybe I'm missing something. And also, what is the purpose of the separator role? It is not very clear from the documentation how that would affect output. The role doesn\u2019t strictly dictate exactly how the shape will be treated \u2014 it can still be explicitly fill or stroke\u2019d by its use site. This more determines the expected semantics of how its intended to be used, in a way that affects its default foreground styling. For instance, you could have a stroke role Rectangle that is fill\u2019ed and used as a divider-like element, and so it will receive divider-like default foreground treatment. Is there a way to animate hiding/showing the Navigation Bar in SwiftUI? If you change the state that drives navigationBarHidden from inside a withAnimation block, it should animate. If it doesn\u2019t, that\u2019s a bug in SwiftUI. What's the best replacement for a tableHeaderView for a grouped list? I want to avoid having a cell with a different visual style containing the content to be used as the header view, but I want to avoid sticky headers that are typically found in plain table views. What is the state of the art here? Howdy! Great question, it\u2019s not clear to me if using a custom row instead of a section header would get what you want here, but I think it\u2019s a totally viable reason for feedback explaining your use case to make usually-sticky headers no longer sticky! Is there a way to get the current font size and weight? I want to draw in a canvas in a way that matches SF Symbols as well as possible. Is there a way to resolve the current Font like i can resolve Text and get these attributes? Howdy! Great question, I don\u2019t believe there\u2019s a way to get the resolved font size, weight, and design today. This is an excellent case where a feedback from you could help the team understand your needs! Are there any methods that allow restriction of view orientation to just landscape or just portrait on a per view basis without defaulting to UIHostingviewcontroller I\u2019m afraid not currently. That would be a great enhancement request Feedback! When I put Markdown-formatted text as a String literal in a Text, it formats with nice attribution, but when I pass it in from a variable, it doesn't. Is this a bug, or have I misunderstood something about how Texts take Markdown-formatted Strings? struct ContentView: View { var text: AttributedString = \" Hello , world ! Visit our website .\" var body: some View { VStack { Text(\" Hello , world ! Visit our website .\") Text(text) } } } The first Text renders nicely with bold, code and a link, while the second doesn't - it just shows the Markdown annotations in the string directly. I think that\u2019s a bug in beta 1. You might try Text(\"(text)\") to trigger the use of a different initializer. Hello, Is it possible to have a simultaneous DragGesture in an inner view of a ScrollView which doesn't make the ScrollView drag gesture fail? The DragGesture has a minimumDistance of 0. It seems it's impossible to scroll the scrollView if the DragGesture is recognized (it's installed as simultaneous and the GestureMask is .all ). Is there a workaround? Thanks! Howdy! Great question, this is a great case where we could use feedback from you to better understand how folks use-cases vary with gestures and ScrollView. In the meantime, a possible workaround would be to use a UIViewRepresentable where you can wrap a UIScrollView and get access to all its goodies and expose any functionality you need to your SwiftUI hierarchy. Is it intended that setting a value to a @FocusState property inside a Form does not work? The property stays nil and thus the focus isn't moved e.g. to a TextField inside the form. Using a VStack instead of the form works like a charm. Yes, please file feedbacks (if you already haven\u2019t) for any context where @FocusState doesn\u2019t work the way you\u2019d expect. Thanks! Is there any way to get GeometryReader size from another view? I want to replace \"???\" with the height of \"Hello world!\". struct ContentView: View { var body: some View { VStack { Text(\"Hello world!\") .background( GeometryReader { proxy in Color.clear /// placeholder let _ = print(proxy.size.height) /// 20.333333333333332 } ) Text(\"Height of first text is ???\") } } } Howdy! Using a GeometryReader in a background of a view ensures the GeometryReader doesn\u2019t grow to be larger than that containing view, but it makes it tricky to bubble its size out. You could do something like this: struct ContentView: View { @State private var height = 100.0 var body: some View { MyView().background { GeometryReader { proxy in Color.clear .onAppear { height = proxy.size.height } .onChange(of: proxy.height) { height = $0 } } } } } Then you can use your height State property like usual. \u26a0\ufe0f Beware: You must ensure you will not cause a continuous layout loop here, if your layout responds to height changing in a way that causes the GeometryReader to lay out again and cause height to get updated, you can get into a loop! Hi, I'm trying to implement an interactive media playback timeline (i.e., slider) for my audio player app in SwiftUI. However, when I use a high frequency timer to update the playback timeline, the app and other views become unresponsive :(. How can I implement high frequency SwiftUI view updates, and still maintain a responsive and interactive app? Thanks for the question! It\u2019s hard to give specific advice without seeing code, so this might be a good question for the Developer Forums. A couple of other useful things to look at: There\u2019s an Instruments tool for diagnosing why an update is slow. Check out the new TimelineView for creating views that update at the same frequency as the display. It doesn\u2019t do any good to try to update faster than that, because the display can show intermediate frames anyway. By default the title of .newItem is \"New Window\". How I can customize it? For example \"New Window\" We will use the title of the WindowGroup in the menu item, if you provide one. For example: WindowGroup(\"Viewer\") { ... } Will give you a menu item titled \u201cNew Viewer Window\u201d. This title will also be used for the default window title, which can be changed with navigationTitle(_:). \ud83d\uddd3 Friday Hello, When using TCA, a new instance of ObservableObject (the ViewStore ) is frequently installed as @ObservedObject when the view tree invalidates. What are the consequences of vending a new instance (possibly with the same properties' values) in terms of performances? Would it be absolutely better to reuse the same instance if possible, or is it acceptable as @ObservedObject installation is quite efficient? Thanks! I can\u2019t speak to a third party framework, but in general if the observable object is replaced, every view that has a dependency on it must be re-rendered. Check out the talk Demystify SwiftUI for more details on dependencies. The Canvas looks like a great new addition. I'm wondering about using it to render a single drawn surface that can be nested in a ScrollView which is then panned, zoomed into etc. Is this a reasonable solution and in terms of performance, will there be any guidelines on how far to push it? I intend to put a whole bunch of images as well as other shape data in there. This sounds like a good application for Canvas. Like anything, performance will depend on how far you push it and the hardware it\u2019s running on. I\u2019m afraid that\u2019s not a very actionable answer, but every app is different. The API documentation is here: https://developer.apple.com/documentation/swiftui/canvas/ The talk \u201cAdd rich graphics to your SwiftUI app\u201d supports the copy code feature too, so you can grab some fun snippets to play with. https://developer.apple.com/wwdc21/10021 If we break our Views into separate some View properties to help readability, is there much cost to marking those other properties as ViewBuilders to get the nicer syntax? Is that something we need to worry about? Nope, in fact, we encourage you to do so! Using the @ViewBuilder syntax helps nudge you towards structuring your code in a way that SwiftUI can make use of intelligently, so using it in more places is never a problem. Check out the talk, Demystify SwiftUI for more on this! https://developer.apple.com/videos/play/wwdc2021/10022/ Is it safe to employ multiple TimelineView with the animation schedule or is it equivalent to instantiating a number of CADisplayLink s? I was thinking of the adage around \u201creusing\u201d CADisplayLink s as much as possible. Yes! You should be able to use as many TimelineView as appropriate to get your interface behaving how you want. SwiftUI will take care of scheduling things so they update like you want. The thing to be careful of is to not have too much \"different\" between each update of the timeline content. Dumb question here... but I was just playing around with the code in the Advanced Graphics section of Whats new in SwiftUI. Taylor showed a symbols browser.... I copied the code and when I run the performance is really bad... he showed the smooth gesture with the fisheye and the timeline view animation... on my side it is super jerky with seconds delay to render... is that right? Sorry about that! That\u2019s a known issue in beta 1. As a quick workaround to see the same smooth effect today, you can manually cache the resolved images. One thing you could try is moving that resolution to be outside of the inner for loop, so it only happens once. (cheating since for the code snippet it only uses the swift bird rather than every symbol like my demo had). What's the recommended way to share SwiftUI code between multiple platform targets? Recent Xcode multiplatform templates simply make source files members of multiple targets, but a few years ago the recommendation for sharing code between e.g. an app target and an app extension was to create a shared dynamic framework (e.g. MyApp, MyAppExtension and MyAppKit). What would be the pros and cons of either approach? It really depends on the complexity of your particular app. The templates are the fastest way to get started and aim to minimize complexity. A shared dynamic framework is a great approach as your app grows. How about dynamic frameworks vs. SPM packages? I believe an SPM package can produce a dynamic framework now, but that\u2019s outside my expertise. It might be a good question for the DevTools Lounge or a Swift lab though! When an observedObject is passed into a view, does SwiftUI differentiate between views that actually use it (the object is used in the body) and 'intermediate' views (which just pass that object to a child? )? Or are all views just invalidated? Yes, there is a difference. If you don\u2019t use any of the ObservableObject property wrappers (@StateObject, @ObservedObject ) the view would not observe and update the instance. So you you just need to pass an ObservableObject through some intermediary view just make it a regular property on the view but make sure to use the property wrapper if you ever read any of the value in the view, otherwise your view will no be consistent with your data. Also, @EnvironmetObject is a great tool when you have an ObservableObject that you want to pass down multiple levels of your view hierarchy without having to manually do it every step of the way. What is the recommended architecture when using SwiftUI? In a lot of the demos (and this is probably my inexperience showing) it seems that the business logic leaks into the view. Would you recommend using MVVM for example and how would you set that up? Thanks for the question! Josh S. gave a great answer to this in the Q&A yesterday: For me the most important thing is that you have a software architecture in mind that works well for you, and helps you craft maintainable apps with a good separation ways to achieve that, but they\u2019re by no means the only one. If you\u2019ve got a well-considered architecture that works well for you, I think that\u2019s great and helps you craft maintainable apps with a good separation ways to achieve that,\u201d Could we use .prominent Window Scene Presentation Style in SwiftUI? Hi, we do not have support for this, but would love a feedback with any specifics you could provide about your use case. If I have to embed a SwiftUI View into a UIViewController to do something only available for UIViewController (like customize appearance that SwiftUI not support), is there any problem about the following two way? Create a UIHostingController A, add A's view as a subview to my own UIViewController B's view. (of course do some layout and addChild didMove stuff) Inherit UIHostingController directly to override some VC methods Either approach is fine! Please do file feedback though about what you're trying to achieve that requires wrapping the SwiftUI content like this. Why does a UIViewRepresentable update once after makeUIView and once before dismantleUIView ? The update function can be called for a number of reasons. It will be called at least once after make as the UIView becomes extant. It may be called multiple times before the UIView is eventually dismantled. You should not rely on any frequency (or lack thereof) of update calls. How do we avoid incurring in Bound preference SizePreferenceKey tried to update multiple times per frame ? It sounds like you have a cycle in your updates. For example, a GeometryReader that writes a preference, that causes the containing view to resize, which causes the GeometryReader to write the preference again. It\u2019s important to avoid creating such cycles. Often that can be done by moving the GeometryReader higher in the view hierarchy so that it\u2019s size doesn\u2019t change and it can communicate size to it\u2019s subviews instead of using a preference. I\u2019m afraid I can\u2019t give any more specific guidance than that without seeing your code, but hopefully that helps you track down the issue! When using View.frame(minWidth:, idealWidth, maxWidth:\u2026) are there any combinations of parameters that are more performant that others? Any combination to avoid? There isn't really any performance difference between any combination of parameters. You should just use the appropriate values to get the layout you're looking for. what's the best way to enforce a specific size? min + max? or ideal? or all? You would want to use the other version of .frame for that which just takes a width and a height. View.frame(width:,height:) Is there any way to set/control backButtonDisplayMode from SwiftUI? By the way, thanks for all the great new features Thanks for the question. I\u2019m afraid there\u2019s no SwiftUI API for this currently. If you could file an enhancement request Feedback, that would really help me prioritize that work though! Can you explain the AttributeGraph that comes up while debugging sometimes? I\u2019m afraid we can\u2019t discuss implementation details, but be sure to check out the talk \u201cDemystify SwiftUI\u201d for the details of the dependency graph. https://developer.apple.com/wwdc21/10022 Is there a way to disable pixel rounding in SwiftUI? The hover effect from my OS X Dock yesterday is jittery because padding is being applied to many views in a row, but rounded to the nearest pixel for each view. This inaccuracy in padding adds up, making the entire view jitter by a few pixels whenever I move the mouse. SwiftUI layout is always rounded to the nearest pixel. But using any GeometryEffect won't take on the snapping behavior. Things like .offset and .scaleEffect are existing ways to achieve this, but you can also implement your own GeometryEffect if you need something custom. In most cases, the layout behavior with Spacer can be replaced with .frame(maxWidth:,alignment:) (or height) seamlessly. Since Spacer is an actual View that is arranged within the view hierarchy, using Spacer will consume more memory and cpu resources. And Demystify SwiftUI also says \"modifier is cheap\". So should I use .frame instead of Spacer as much as possible? While Spacer is a view, it doesn't end up displaying anything of its own so it is plenty lightweight. Using .frame can have other behavior introduced to the way the view gets laid out beyond just changing its size. They both have their uses, so use them each where appropriate. To add a little more onto this, even in cases where you will get almost entirely the same behavior between the two, the performance difference will be so minimal that I would strongly suggest prioritizing code readability over performance / memory use to make this decision. If Spacer makes it more clear what layout you\u2019re trying to specify, use that, and vice versa. Does SwiftUI expose enough API that would allow us to build our own Lazy{H,V}{Stack,Grid} with a fully custom layout, or are there still a lot of \"magical bits\" under the hood that prevent us from doing so? Unfortunately, we don\u2019t offer support for building custom layouts today. What is the handlesExternalEvents modifier? I\u2019ve seen it used, but don\u2019t know what it is. This modifier allows you to specify a Scene to be used when external data is sent to the app - a URL or an NSUserActivity . For example, on macOS, when a url comes in that matches the pattern, we will either create a new window for that Scene, or use an existing one, if a view has been modified with handlesExternalEvents to prefer that incoming value. Is there a way to customize NavigationView's navbar other than UINavigationBar.appearance ? Unfortunately, there isn\u2019t any SwiftUI native way to do this right now. If this is something you want, please file a feedback report requesting the feature! The State documentation states \u201cIt is safe to mutate state properties from any thread.\u201d What does it refer to considering that SwiftUI complains with runtime warnings when a PassthroughSubject published from a non-main thread? State is thread safe and can be mutated from any thread. When you mention PassthroughSubject I would imagine you are using that in the context of an ObservableObject with either one of @StateObject, @ObserverdObject, or @EnvironmentObject . ObservableObject does require that you mutate all the properties observed by the view, and publish objectWillChange on the Main Thread. I would recommend you check out Discover Concurrency in SwiftUI where my colleague Curt and Jessica talk all about Swift and concurrency https://developer.apple.com/videos/play/wwdc2021/10019/ Is there a way for a view to know when the window it is hosted in is key or not on macOS? Could you elaborate some on what you\u2019re trying to achieve? There is the controlActiveState property on the Environment, but there is also focusedValue(: ,: ) and @FocusedValue which are used in the context of the key window on macOS. Is there a way to disable the scrolling on a List so I can use it within a ScrollView? I have a ScrollView, inside which I'm placing an Image, some Text, and then I would like to be able to place a List. However, currently, the List doesn't appear unless I give it a fixed frame size, and the List is also separately scrollable. Is there a way around this? I\u2019m sorry, but that\u2019s not currently supported. If you would be able to file an enhancement request Feedback with your use case, I\u2019d really appreciate it! I know Feedback can seem like a black box (sorry about that), but they really do help us, even if we can\u2019t respond directly to every request. Can items in a list accept drop items? It seems to immediately crash my app. Could you please file a feedback for this crash? If you can also include a sample that reproduces the issue, that would be especially helpful. If we create custom property wrappers that embed existing ones (like State, ObservedObject, etc) does SwiftUI still \"see\" those embedded wrappers and do the right thing? For example, can I create an @Whatever wrapper as a convenience for @Environment(\\.whatever) and still expect that to work the same way? Yes, you can make do that. As long as you add conform to the DynamicProperty to your wrapper this will work. without having to jump to ios15 for focusedSceneValue, is there a recommended way for non-document windows in a window group to surface a kind of \"current object\" that can be used to activate/deactive menus & send commands to, even if no editable control as focus? (in swiftui) Good question! focusedSceneValue provides a way for the current focused / key window to surface its values to @FocusedValues in menus and other places; this is especially important on macOS since an app can have many windows, but only one of those is key. As for other approaches, it somewhat depends on your use case: if you do need your current object to be tied to the key window specifically, there isn\u2019t a substitute. But if you more want to aggregate information across all of your windows, you could use things like preferences and the environment to manually pass that data around I have a framework that vends a SwiftUI View to the main app via a HostingController. The view handles everything it needs internally, so all the types are internal. The only public method is the one that vends the HostingController. In order to maintain the isolation I do it this way: return UIHostingController(rootView: AnyView(SchedulesView(store: store))) Is this a correct way to use AnyView Yes, that\u2019s an OK usage, particularly because it\u2019s at the base of the hierarchy view and not used to add dynamism. But there are other ways to encapsulate the exact type of the hosting controller, for instance returning an upcast or custom protocol type Returning it typed as UIViewController instead its actual UIHostingController<..> type Creating a protocol with the extra API that clients might expect from the view controller, and returning it typed as that Or by using a container UIViewController that has a child of your hosting controller When I've needed to inject data into a detail view, but still let the view have ownership of its StateObject, I've used the StateObject(wrappedValue:) initializer directly in my view initializer, for example: public struct PlanDetailsView: View { @StateObject var model: PlanDetailsModel public init(plan: Plan) { self._model = StateObject(wrappedValue: PlanDetailsModel(plan: plan)) } ... } Is this an acceptable use of the initializer? I know StateObject is only supposed to initialize at the start of the View's lifetime, and not on subsequent instantiations of the View value, so I want to make sure I'm not forcing it to re-allocate new storage each time the View is re-instantiated. Yes, this is an acceptable use of the initializer and your understanding is correct: that object will be create only at the beginning of the view lifetime and kept alive. The StateObject \u2019s wrapped value is an autoclosure that is invoke only once at the beginning of the view lifetime. That also means that SwiftUI will capture the value of plan when is firstly created; something to keep in mind is that if you view identity doesn\u2019t change but you pass a different plan SwiftUI will not notice that. Hello! I have tried to implement with SwiftUI a common feature in iOS apps that is when tapping again a tab item of a TabView with a nested NavigationView, it pops to the root view of the navigation view. Using presentationMode.wrappedValue.dismiss() it just chains the view dismiss, any idea of how to implement this in a more clean way ? (mine feels \"hacky\") Thanks for the question! I\u2019m afraid I don\u2019t have a great answer here, but there are a couple of options you can try. One option is to use a representable to embed a UITabBarController, so you can hook the delegate methods. Another option, if you can detect when the user taps the same SwiftUI tab again, is to decorate your NavigationView with .id(counter), where counter is @State private var counter = 0. Then when the user taps the same SwiftUI tab again, you can increment counter, which changes the identity of the navigation view, causing SwiftUI to replace it. I\u2019d love to get an enhancement request Feedback for your particular use case so we can prioritize making this easier! How can I control the ideal size of a UIViewRepresentable View? I have a lot of trouble getting correct automatic sizing of wrapped views, especially if they wrap UIStackView. Any recommendations for getting proper automatic sizing so I don't need to use fixedSize so much? Try implementing intrinsicContentSize on your view. Is there any way to open additional window from SwiftUI Life cycle? I mean call additional WindowGroup. For example Inspector panel. Hi - we currently do not have any API for this, though we\u2019d love if you could file a feedback with any specifics you have for your use case. One option for something like an inspector panel is that you could use NSApplicationDelegateAdaptor, and open your window by communicating with that. A secondary WindowGroup might not be the best match for something like an inspector panel, since WindowGroup supports multiple windows, and will should up in the File -> New menu. Oh, I should mention that the window created via the delegate adaptor would be an NSWindow instance, with an NSHostingView as the contentView. For when using @EnvironmentObjects, it seems like I need to pass the .environmentObject modifier for every layer of subview. If I don't do that, it will give error \"view environmentObject may be missing as an ancestor of this view\" But I thought the point of Environment Objects is to make data available to all view without writing a lot of code. Is that a design choice or am I doing something wrong? Thanks for the question. .environmentObject(\u2026) mostly flows down the view hierarchy, however there are some places where we intentionally do not forward it. For example, the destination of a navigation link does not get the environment object, because there is a conflict as to whether the destination should get the object from the originating link or the placeholder of the destination, or even the previous view on the stack. There was also a bug where sheets and popovers didn\u2019t get the environment object, but that was fixed. If you find other places where environment object does not propagate as expected, please file a Feedback. It\u2019s important to me that we get this right! Is there a way to control the opacity/overlay effect applied to a Menu's label in iOS? Menu currently applies a high-opacity white overlay (I assume!) on its label when tapped, and I'd like to make it less opaque/override the effect entirely. Not today, but if you haven\u2019t already please file a feedback requesting the ability to do so. Oh, and adding context for why you want to customize that effect is always really useful too! Can the new AtrributedString be used to provide accessibility notations in SwiftUI like NSAttributedString s can in UIKit? Should we report any attributes from NSAttributedString we need on AttributedString ? AttributedString should have the full suite of accessibility attributes and they should now be standardized across platforms! But if you see any we missed, please do file Feedback so we can fix any oversights. Thanks for the question. We\u2019re super excited about the AttributedString support! Localization, accessibility, formatting, and morphology agreement in one tidy package. I\u2019ve had a lot of inconsistent behaviour with EnvironmentObject where it isn\u2019t passed in, nil when referenced, etc. Am I holding it wrong, or what could some common pitfalls be with using it? I've reverted to a singleton for global access but I'd rather get EnvironmentObject right. It\u2019s a little hard to tell exactly what issue you\u2019re running into just from this description, but sorry to hear it\u2019s been causing you trouble! How have you been \u201cholding it\u201d, so to speak? Hi! Thanks for answering questions here! I have an app that needs to hide the home indicator, but that does not seem to be possible in SwiftUI. I know I can do it with exchanging the root ViewController but that has a lot of side effects in a pure SwiftUI app. Is there a better workaround? Thanks for the question. I\u2019m afraid we don\u2019t have SwiftUI API for this currently. Using UIKit is the best option for now. If you could submit an enhancement request Feedback, I\u2019d really appreciate it. Is it okay to use child CoreData context as @StateObject vars in SwiftUI views, or would you recommend passing those in the environment and holding on to them outside of SwiftUI? There is not need to use a @StateObject since the context is not an ObservableObject. Passing it down using the environment is a good solution. What\u2019s the best practices for making a SwiftUI view accessible? You should get a lot of Accessibility automatically. The best way to determine whether you need to make tweaks, using our Accessibility APIs, is to try your view with some of our features, like Large Text, VoiceOver, etc. You can also take a look at the new Accessibility Inspector in SwiftUI and see what it shows for your Preview view. In general, system standard controls tend to be accessibly by default, but when you use a lot of Shape or other manual drawing, you may need to do more work. Hi Arie. A great place to start is our introduction video from 2019. https://developer.apple.com/videos/play/wwdc2019/238/ This will introduce you to accessibility in SwiftUI. You could follow that up with this years presentation where we go beyond the basics. https://developer.apple.com/videos/play/wwdc2021/10119/ We also have many WWDC videos on best practices when making a view accessible. Such as writing great accessibility labels. https://developer.apple.com/videos/play/wwdc2019/254/ When using SwiftUI with something like Core Data and UIHostingController, how can we avoid using AnyView if the environment modifier changes the type of the view. See example below. `import UIKit import SwiftUI import CoreData struct MyView: View { var body: some View { Text(\"!\") } } class MyHostingController: UIHostingController<MyView> { override func viewDidAppear(_ animated: Bool) { super.viewDidAppear(animated) // custom stuff here } } class TestViewController: UIViewController { override func viewDidLoad() { super.viewDidLoad() let persistentContainer = NSPersistentContainer(name: \"MyStore\") let rootView = MyView().environment(\\.managedObjectContext, persistentContainer.viewContext) let hostingController = MyHostingController(rootView: rootView) // this will not work anymore because type has changed with the environment modifier // more stuff } } Great question! Here\u2019s a technique, though it runs the risk of angle-bracket-blindness \u2026 In class MyHostingController: UIHostingController MyView isn\u2019t really the right type. You want the type of MyView().environment(.managedObjectContext, persistentContainer.viewContext) On the let hostingController = \u2026 line, you\u2019re probably getting an error message about the types not matching. That error message will include the full type of the right-hand side of the assignment. Something like ModifiedContent with lots of stuff inside the \u2026 there. What I like to do is (1) copy that type, then (2) add a top-level type alias: typealias MyModifiedView = ModifiedContent where the right-hand side is the value I copied from the error message. Then you can write class MyHostingController: UIHostingController \ud83d\uddd3 Thursday When using the new SwiftUI Table View, can you Group to have more than 10 TableColumns? Yes, you can; just like Views! Do I understand correctly that there are no more limitation on the number of objects in @ViewBuilder? There is no change to @ViewBuilder this year, so it is still limited in the number of elements it can build into a block. But Group as well as nested builders are great tools to allow for as many views to be combined together as you want What happens when you have three views in a hierarchy, where the root and leaf views share dependency, but neither share dependencies with the middle view. Would the middle view get redrawn? If the middle view isn\u2019t dependent on the others, it isn\u2019t redrawn. Note that if the root view passes parameters to the middle view, then it has a dependency. Is there a good way to switch between HStacks and VStacks while allowing SwiftUI to understand that the contents of those stacks are the same? Lots of questions similar to this, so repeating an answer from earlier: Yes! You should check out the matchedGeometryEffect() API, which was introduced last year: https://developer.apple.com/documentation/swiftui/view/matchedgeometryeffect(id:in:properties:anchor:issource:) Is the @ViewBuilder to remove AnyView in \"Demystify SwiftUI\" only available with iOS 15 ? No, in fact it can back-deploy to any previous version! Are there performance considerations when generating UUIDs? (I.e. generating a lot of UUIDs for elements in an array to display in a list). It depends. You'll need to measure. However, consider generating IDs lazily (make sure you store them though!) Performance wise, is it preferred to pass ObservableObject s down to subviews explicitly, or use EnvironmentObject s? Using one or the other shouldn\u2019t make much difference in any given view, but if you don\u2019t need to use the object in some views then EnvironmentObject is a great way to avoid the boilerplate of pass it down through intermediary layers, and can avoid creating unintentional dependencies. Is there a good way to apply a modifier to a SwiftUI view conditionally? I'm using a custom .if modifier, and it refreshes the whole view on state change :( Consider making an inert version of the modifier as discussed in the session. If there is a modifier that lacks an inert version that you'd like to see, please file a feedback. How can we conditionally set different modifier, for example list styles? Styles in SwiftUI are static, and are not permitted to change at runtime. This is a case where a branch is more appropriate, but consider whether you really want to change the style\u2014 a single style is almost always the correct choice. If there is a certain dynamism you're looking for here, please file a feedback. Is there any situation in which Hashable may be preferred to Identifiable? If you just need to be able to identify a value, that\u2019s what Identifiable is for, which means that only the id needs to be Hashable, not the whole type. If we apply same id in the condition, will SwiftUI sees this as a same view var body: some View { if isTrue { Text(\"Hello\") .id(viewID) } else { Text(\"World\") .id(viewID) } } No, these will be two different views. Raj (Apple) 3 days ago This is because body is implicitly a ViewBuilder. If you don't use a ViewBuilder, such as in another property, it would be the same view. Are there any difference between passing a State as a binding through each view in the hierarchy vs passing it as an environment object and only access it in the subviews that use it, say in a Text view would the first one have worse dependency graph that needs more updates? environment object is a slightly different tool than State since it requires an ObservableObject. Environment object is optimized to invalidate only the views that read its value. As for State, when you pass the binding down to subviews, changing the binding will mutate the state that in turn will invalidate the view holding the state and its children. What is a good way to have a custom order of elements in a list so the user can change the order (using a stable ID)? A List or ForEach will preserve the same order as used in the collection passed into them. The identity of each element should be independent of that order \u2014 even if a collection is reordered, each element should maintain the same ID. If you maintain a stable identity like that, then you should be able to reorder the collection no problem in response to user actions Is there a way to animate a View moving from one place in hierarchy to another? Like when a View changes parents? Yes! You should check out the matchedGeometryEffect() API, which was introduced last year: https://developer.apple.com/documentation/swiftui/view/matchedgeometryeffect(id:in:properties:anchor:issource:) Fun question on conditions: We need to put them at least in Group { if whatever { ... } else { ... } }. So ... is it preferable to use ViewBuilder commands to create it, like ViewBuilder.buildBlock(pageInfo == nil ? ViewBuilder.buildEither(first: EmptyView()) : ViewBuilder.buildEither(second: renderPage) ) Awful to read, but is it better? Using a Group is preferred in this case. The Dependency Graph \u2014 can it have loops, or is it acyclic? Graph cycles are not allowed and will trap at runtime. I have a class Store : ObservableObject that holds the whole app state. It lives as @StateObject in the root of the App lifecycle and passed via environment to all views. View send actions to the store and update as soon as store's state updated. It allows me to keep the app consistent. Could you please mention any downsides of this approach from your prospective? That approach makes every view in your app dependent on a single Observable object. Any change to a Published property forces every view that references the environment object to be updated. I think this might cover your question too. -by \"forces every view that references the environment object to be updated\" you mean that view produces new body to diff with old body? That view produces a new body. SwiftUI doesn\u2019t diff views. It regenerates views when dependencies change. is there any difference between the persistence of @State vs @StateObject vs @ObservedObject when identity changes? Yes! ObservedObject does not have any lifetime implications\u2014 when you use that property wrapper, you are responsible for managing the lifetime yourself. The object can live anywhere\u2014 either in StateObject or possibly even in another data structure in your app. Should @State and @StateObject be usually defined as private ? Yes! It's often helpful to make them private to indicate that the state is for this view and its descendants. Thank you! It was a great talk! If the only reasonable property for establishing stable identity in a model from, say, an existing JSON API, is a string that might be quite long (maybe it's more of a description than a name), is that large ID enough of a potential performance problem that we should consider modifying the model/API to add a more compact ID? Thanks much! Great question! As with any performance problem, it's best to measure first before over-optimizing. Long strings can often be expensive, so it might make sense to optimize the identifier, but I'd recommend measuring first. I have created a ViewModifier that adds a custom modal \u201coverlay\u201d on top of a view, somewhat similar to a sheet. Is there a way to pass a View as parameter of this ViewModifier initializer, without resorting to AnyView? I want to be able to pass the view that will be the actual \u201ccontent\u201d of the overlay. You can do this by making your custom ViewModifiergeneric on the content, something like: struct MyModifier : ViewModifier { ... } , then using a property with the generic like so: var content: C From the dependency graph part of \"Demystifying SwiftUI\": The video mentioned that both views, two views that are dependent on the same dependency, would need to generate a new body. Which view would need to generate a new body first if one view is the child of the other? The parent view will generate its body first, and recursively travers all the child views. Is the computed UUID not stable because we cannot predict the position of the value, therefore where it will be placed in the view? Yes Do situations exist when the developers really need to use AnyView and there are totally no alternatives using Swift constructs? Lot\u2019s of questions about when it is okay or not to use AnyView! If you can avoid AnyView, we recommend that. For example, use @ViewBuilder or pass view values around using generics instead of using AnyView. However, we offer AnyView as API because we understand that there are some situations where no other solution is possible, or comes with other important tradeoffs. One rule of thumb: AnyView can be okay if used in situations where the wrapped view will rarely or never change. But using AnyView to switch back and forth between different values can cause performance issues, since SwiftUI has to do extra work to manage that. Do you have any suggestions for why Image(\"AppIcon\") would fail to work, when Image(uiImage: UIImage(named: \"AppIcon\")!) works just fine? Is that intentional behavior? Is the image located in an asset catalog? Yes. It\u2019s the AppIcon in the asset catalog. (As in, the one used for the app icon on the home screen.) Please file a report through feedback assistant if you haven\u2019t already. If you have, can you post the number here? I\u2019d wonder whether the asset compiler is treating the app icon specially. We should fix it, but perhaps the app icon is being copied elsewhere in the bundle so the system can reach it. Is there a way to debug AttributeGraph crashes? I\u2019m getting AttributeGraph precondition failure: \"setting value during update\": 696. , probably due to a hosting controller somewhere, but don\u2019t know how to track it down. Thanks for the question! That error usual means that some code evaluated in body or updateUIViewController (or NS\u2026) is mutating state. We have a new debugging tool in the new SDK that might help narrow it down. Inside body if you write Self._printChanges() SwiftUI will log the name of the property that changed to cause the view to be redrawn. (Note the underscore. This isn\u2019t API, but is for exposed for debugging.) Still hoping to get any info on if you can hide the tab bar when using TabView and pushing items onto a NavigationView like you can in UIKit. I do not believe there is a TabViewStyle that will allow this. However, please file a request using feedback assistant describing your use case. Thanks! I've started an app where I've got 3 screens - selected by tab views. I'd like to create a setting to default to one of the screens or the other. What's an efficient way to do that? Maybe a lab type question... You would use the selection Binding passed into the TabView initializer to decide which view will be selected by default. struct ContentView: View { @State var selectedTab = 1 var body: some View { TabView(selection: $selectedTab) { Text(\"First\") .tag(0) Text(\"Second\") .tag(1) Text(\"Third\") .tag(2) } } } That will have the view start with the 2nd tab selected Any way to control when the @SceneStorage gets saved? Many are in my root app view, and they only seem to be written at app background, not before. I\u2019m sorry, but we don\u2019t provide API to control scene storage. The intent is that it\u2019s saved on backgrounding and restored on foreground/scene recreation. As a college student, working as an intern at Apple is really important to me. What is your best recommendation for individuals considering applying for an internship at Apple, whether it be related to a resume, project types, or otherwise? It\u2019s great to hear you\u2019re interested in working at Apple! I joined as an intern so I can definitely relate to the craziness of applying, but it is absolutely worth doing. Interning at Apple is a really wonderful experience, and you really do some incredible work over the course of an internship! Getting hired at Apple means being very intentional about what you\u2019re looking for, and the best way to do that is to explore the jobs site for roles you think you can do, and applying specifically for that role. We have thousands of hiring managers and I don\u2019t know most of them, so my recommendation won\u2019t carry much weight, so I can\u2019t be of much help there. My best advice is to create a compelling cover letter and r\u00e9sum\u00e9 that expresses why you are right for this specific role, rather than applying for dozens of jobs at once. There\u2019s lots more information for you here as well: https://www.apple.com/careers/us/students.htm Is there an efficient way to set the values of individual pixels in a view in SwiftUI? Sorry I haven't fully examined the new Canvas API yet. For the record, I don't really know how to do this in UIKit either, other than writing a custom fragment shader for a Metal view. Thank you! Canvas is really the best bet here. You could fill a 1px x 1px rectangle of the color you want, and that would be the most efficient expression of that within SwiftUI itself. And to get the size of a pixel you would request the pixelLength from the environment of the GraphicsContent of the Canvas When to iterate a collection directly from List(items) { items in Code here vs. List { ForEach(items) { items in Code here... Fundamentally these should provide the same behavior, in almost all use cases this would be a stylistic choice over which to use. The former works great if you know you'll only ever have that single array of items in your list. The latter is where I generally start because its less things to change if I want to provide content from multiple sources into my list. Will TextEditor have any level of support for AttributedStrings? While we can\u2019t comment on any future plans, please do file a request through feedback assistant for any improvements to TextEditor that you would like to see! Is it possible to specify paragraph styles AttributedStrings used by SwiftUI Text views? I don't see any mention of paragraph style in the SwiftUI AttributeScope (but it's there for the UIKit scope) SwiftUI currently supports all of the attributes in the SwiftUI scope and some in the nested Foundation scope, the supported Foundation attributes are links and inlinePresentationIntent. So it\u2019s not possible to specify paragraph styles Is it possible to place a CALayer inside of a SwiftUI view without using a UIViewRepresentable? Not currently. UIViewRepresentable is the way to go if you want to expose custom layers inside of your SwiftUI content. If you have a specific use-case where this can't work, please do file a feedback request! How do I get a SwiftUI time picker to change to 5min instead of 1min? I tried to find that but so far I haven't found how to do that... Thanks for the question. Making sure I understand\u2026 Are you using a DatePicker and want the stepper increments to be 5 minutes instead of 1 minute? no actually a time picker, .datePickerStyle(WheelDatePickerStyle()) Ah, right. And that\u2019s applied to a view hierarchy containing a DatePicker then? Set to just show time components? Yes: aDatePicker(\u201cPlease enter a time\u201d, selection: $startTime, displayedComponents: .hourAndMinute) .labelsHidden() .datePickerStyle(WheelDatePickerStyle()) And after all that clarification, I\u2019m afraid the answer is that we don\u2019t provide customization for that currently. In the past, I have created Button views that will have a local state and present a sheet. For instance, I might have a Button whose purpose is to add a new item to my app's data. This was super convenient because I could add such a button in any context without needing the view adding the button to know about that functionality. Running my App Store version of my app on iOS 15, those buttons no longer are working. (I haven't yet debugged the app; I'm simply noticing it across my iOS 15 devices.) Is this a sign that this is a pattern I shouldn't be using? Or should SwiftUI continue to support such patterns? Please file a report using feedback assistant and a sample project. Thanks! There are instances when Buttons in SwiftUI stop responding to the iPadOS pointer, but work when tapped normally. Is this an expected behavior? Please file a report using feedback assistant and a sample project that reproduces this issue! I would not consider this expected Is it possible to change the spacing between views in a List (or stack view) as the list scrolls up and down in a springlike manner? (i.e. is there a SwiftUI equivalent to UIKitDynamics?) Hi Andrew, we don\u2019t have any support for this in SwiftUI. Could you please file a feedback with the use case you are interested in? Thanks! What\u2019s the recommended practice for custom sheet presentations? SwiftUI\u2019s .sheet only supports the standard card-style modal presentation. It doesn\u2019t have the flexibility of e.g. UIKit\u2019s transitioning delegates and presentation controllers to let us size and position modally presented controllers. Thanks for the question. For custom presentations, I\u2019ve had good luck putting the presentation content in an overlay, then using an offset modifier to shift it off screen. To bring it on screen, I use State to zero out the offset. If the state is updated inside withAnimation to transition is animated. That content won\u2019t be lazy then, right? It\u2019ll be computed in advance and off-screen. You could conditionalize the content too. An offscreen empty view would be essentially free. As would an offscreen view with opacity of 0. You might need to play with the transitions to get the appearance just right. And it\u2019s essentially free because the framework is smart enough to not bother rendering content that\u2019s invisible? Yep! This isn't a technical question, but what is your favorite part about working on the SwiftUI Team? The people, both inside and outside of Apple, by a million miles! Everyone I\u2019ve worked with here at Apple is kind, empathetic, thoughtful, and incredibly passionate about the work we do. It requires lots of collaboration to pull all the work we do into one cohesive framework, so working with a great team is super important. Re. people outside of Apple, you all are the best community I could imagine. It\u2019s really wonderful getting your feedback, hearing from you at WWDC, seeing you at community events, etc. As Josh said, empowering you all to make amazing apps is really special. Is it possible to prevent a Button inside a List item from being activated when the list row is selected? Right now, if you have multiple Buttons they will all be triggered when the row is selected, so can't really have a secondary button in a list row. Explicitly setting the buttonStyle of the nested buttons will stop the List from capturing the event. What is the recommended way to open a View in a new window in SwiftUI for macOS? We don\u2019t have much API in this area at the moment - using a NavigationLink in a commands context will open a window with the destination view. Could you elaborate on your use case here? If not, that is ok, but I would definitely suggest filing a feedback with any info you can provide us. How would someone go about turning a List cell into a TextField on tap, such as to edit the name (similar to the Reminders app)? I\u2019d try putting a TextField in an overlay of your cell content with an opacity of 0 and disabled. Then use a tap gesture to switch the opacity and You could use the new FocusState or onSubmit when the user is done editing to switch back. What about the new selectable text modifier?? Would that work here? The trickiest bit will be getting your TextField and the regular Text to line up. You might need some custom padding for that. Take a look at the ScaledMetric property wrapper to make padding that adapts to dynamic text size. That\u2019s a great idea. It would work for selecting and copying the text, but not for editing it. There's a lot of sample code out there where people use GeometryReader inside of clear overlays and the like to not impact layout... is that \"ok\"? Seems not like the way it was designed to work. In general we'd consider that a bit of a misuse of the API. If you have specific use-cases where you're needing to do this we'd love to hear about it in a feedback report! This is kind of vague, but I know HID declares that a second button below a Sign in With Apple Button can't look too similar as to distinguish them. How lenient is this? Like I tried to \"replicate\" the sign in with apple button for a Sign in With Email Button (like a logo next to it with an envelope instead of the apple logo, used a similar but not SF font, etc), but I'm afraid this would constitute as being \"too similar to the Sign in With Apple Button\". Sorry for the vague question, and let me know if this is more suited towards a lab! We cannot provide that kind of guidance here; you are probably better off reaching out to App Store developer review labs for confirmation. I would also review the guidance provided here re: custom buttons: https://developer.apple.com/design/human-interface-guidelines/sign-in-with-apple/overview/buttons/ What is the layout and sizing behavior of Canvas? A Canvas will consume the space offered to it. You can put it in a .frame to control the size if needed. Is there a new SwiftUI way to convert a view into an image or pdf? Currently, this can be done, but it is one of those round about, hacks that no one likes using. Unfortunately, there\u2019s no native SwiftUI api for this right now. As was mentioned elsewhere in the thread though and in your question though, it can be done by wrapping in a UIHostingController. Feel free to file a feedback requesting the feature though! What is the best way to implement keyboard bindings on swiftUI, for macOS? I'm building a video player where I would like to forward and rewind with the left and right buttons. I've tried attaching keyboardShortcut(.leftArrow) on my button but it doesn't work? Is it the view I'm attaching it wrong (shall I attach it to my window root view maybe?) or is there some known bug around it? Thanks Attaching it to the button is the correct expression here - it sounds like you may be encountering a bug with this. Could you file a feedback with this issue? With Sign in With Apple, is it a requirement to use a nonce? I've seen conflicting information, some stating that if it's done externally (through something like firebase), then a nonce is required, but if it's done using SignInWithAppleButton then no nonce is required. What's the verdict on this? As this does not appear to be related to SwiftUI, I recommend scheduling an appointment at one of the Apple Pay labs Is there a modifier to control how links in AttributedString are handled? Specifically, I'd like to be able to handle some links in-app, rather than booting the user out to Safari Currently the links will be handled by using the default OpenURLAction from the environment, it\u2019s not possible to override it at the moment. You could however use a custom url scheme that will open the url in your app, for example myapp:// Let\u2019s say I have a purely SwiftUI flow. I have a ListView with a @StateObject var listFetcher , that makes requests for a list of items. Tapping on an item in the list navigates to a DetailView, which has an ObservableObject property detailFetcher , that makes requests for details on the item. What\u2019s the best way to structure DetailView and which property wrapper would we use for detailFetcher in DetailView? 1. Have an initializer like init(itemID: Int) , and use @StateObject ? This would require us to eventually update the detailFetcher property with something like detailFetcher.itemID = itemID in the body\u2019s onAppear 2. Pass in the detailFetcher into the initializer like init(detailFetcher: ObservableObject) and make the property @ObservableObject? If this is preferred, where would this detailFetcher live if not in SwiftUI? In general, use @StateObject when the view in question owns the associated object, i.e. the object will be created when the view is created, and should be destroyed when the view is removed. In contrast, use @ObservedObject when the view needs to reference an object that is owned by another view or something else. So the view is dependent on the object, but their lifetimes are not tied together. For example, you could have a main screen that uses @StateObject to initialize your app\u2019s model, and then pass that object off to detail screens using @ObservedObject. Also check out the \u201cDemystify SwiftUI\u201d talk tomorrow to learn more about this! With the new Markdown support for Text, are you able to control what specific Markdown elements look like? For example, can we specify that bold is supposed to display as Demi-bold rather than bold? Or what the font, font size, or font weight of an H1 header should be? In general, how much flexibility do we have in styling the markdown? At the moment, it\u2019s not possible to control the default styling in Markdown for SwiftUI. It would be great if you could file a feedback as a feature request/suggestion. Another thing to note, SwiftUI only supports inline styles, paragraph styling such as headers (H1 for example) is not supported. Does SwiftUI support device rotation animations? When I rotate from portrait to landscape, my app just changes without an animation. Please file a report using feedback assistant and a sample project! Is there a suggested way or best practice to show a UIDocumentPickerViewController in a SwiftUI sheet without triggering an \"Attempt to present on which is already presenting ? You should check out the .fileImporter modifier if you haven\u2019t already: https://developer.apple.com/documentation/swiftui/form/fileimporter(ispresented:allowedcontenttypes:allowsmultipleselection:oncompletion:) If you are encountering a specific issue that you think may be a bug, please file a Feedback report! I saw in the \"What's new with SwiftUI\" that TextFields will now have .onSubmit for when the return key is pressed for software and hardware keyboards. Does this mean that .onCommit will be depreciated or does .onSubmit serve a different function? The initializers with .onCommit are soft deprecated. So no warnings in Xcode, but we\u2019re encouraging new code to use .onSubmit. Are current changes \u2018set in stone\u2019 and the feature release plan for SwiftUI has been wrapped up for iOS15 or we could expect more functionalities along the way until the official release? We cannot comment on future plans. However, please file feedback for any issues you find and they will be triaged appropriately! Note that \u201cissues\u201d here refers to both what is traditionally considered \u201cbugs\u201d as well as an feature requests or enhancements both for existing API as well as API that is newly introduced this year If we're using Sign in With Apple and have some text that says \"Sign in with Apple [apple logo here from SF Symbols]\" on a screen that comes after sign in with apple where we ask for some additional information (specifically just the birthday of the user), is that an HID violation? It's only used to reference Sign in With Apple, so I'm not sure if that would violate the rules or not Just to clarify, your view has static \u201cSign in with Apple\u201d text after the button has been tapped/clicked on another screen? Well so this is how it is - There\u2019s a login screen - it either lets you sign in with apple, sign in with email/password, or create an account. If they pick sign in with apple, and this is the first time they go through the process, then it prompts them with the hide my email/name sheet. Then after that, again if it\u2019s their first time, there\u2019s a screen they go to that asks for their birthday, and it says : Sign in with Apple [apple logo] with a subtitle stating that some additional info is required (paraphrased since it\u2019s a little bit of lengthy text), and then a date picker for their birthday. That Sign in With Apple [apple logo] is sort of replicating what\u2019s on the Sign in with Email screen which similarly says Sign in with Email [envelope icon]. My guess is that it would not be allowed since it is giving users the impression that the birthday is part of the Sign In With Apple process, but that is not the case. I think it\u2019s okay to show the birthday step following the sign in process, but as for showing \u201cSign In with Apple \uf8ff\u201d after that, I do not think it is allowed. My recommendation would be to remove this text entirely and instead have something like \u201cFinish setting up your account\u201d As indeed this does not have anything to do with signing in with Apple Are NavigationLinks \"lazy\" in iOS 15? NavigationLinks do not fully resolve their destinations until they are triggered, though the value of the destination view is created when the NavigationLink is created. In general, we recommend avoiding as much work as possible when a view is initialized, which would avoid potential issues here. This is important for performance. Instead, have that work be triggered within the view\u2019s body, such as using onAppear or the new task() modifier. SwiftUI may reinitialize views for any number of reasons, and this is a normal part of the update process. Is there a way to show a watchOS app view using sample data in an iOS app, such as for an app that showcases various custom complication styles? I understand that the alternative would be a screenshot, but I thought it would be a much simpler workflow to have the watchOS views dynamically generated since both platforms use SwiftUI. There is not, but please file feedback for the idea! Using screenshots is your best option as a workaround. On watchOS, I'm using .onContinueUserActivity(NSUserActivityTypeBrowsingWeb) and .onOpenURL , however these only receive callbacks once the app is already open. Is it possible to use these in a way that they receive the callback from a cold launch? Those should function appropriately on cold launch. Please file a feedback with a sample showing where it isn't working if possible. What\u2019s the easiest way to setup the site association file for the example? That is an excellent question. Just the general shape of the application and where it's wired in will go a long way, even if the entire association isn't hooked up. What is the recommended way to account for a NavigationView title that may take up multiple lines? I tried setting .lineLimit to nil, but I am not getting the results that I want. For instance, I have \"XYZ Club Executive Meeting\" for the navigationBarTitle text, but it only shows \"XYZ Club Execut...\" Take a look at the toolbar modifier and the .principal placement. If that doesn\u2019t meet your needs, please file a Feedback so we can look into your use case. The \"What's new in Foundation\" session demos localizing content in a SwiftUI app, \"Caffe\". Is this demo app available as sample code? It doesn't appear to be listed on the sample code page. It is not available. But thanks for the suggestion, we\u2019ll consider that! Is there a way to hide a default green scroll indicator on watchOS when using digitalCrownRotation modifier? There is not, but please file feedback! I'm also curious why you would want hide the indicator? I believe it does hide if you use make it \"continuous\" what would be the recommended way to handle complex navigations in a 100% SwiftUI project, in all my past UIKit project the coordinator pattern was really powerful for that but it's quite tricky to have it ported to swiftui. thanks It\u2019s difficult to make a specific recommendation for a complex app. Every app is so different. This is definitely a great question to request a lab appointment for. Then we can understand your use case and make some suggestions, and maybe even look at some code together. Is there a limit to where SFSymbols change size? I put them as items in a TabView but it doesn\u2019t seem like they are scaling with dynamic text \u2026 TabViews do have a standard symbol size across all apps and how far they scale Does that mean they don\u2019t scale as much as other places? Right, other elements could end up scaling more, which is expected. Ah thanks - As a UI element I sort of wanted it to scale more. Is there a better way to do that. I\u2019d rather not leave SF Symbols If you have a more custom UI element where you want that scaling, you could build that! Especially with the new .bar material, you could still get a similar material background behind that custom bottom bar Ooo - I\u2019ll have to read up about that. Is there a talk with more in depth discussion of material? Today\u2019s rich graphics session is the one you\u2019re looking for https://developer.apple.com/videos/play/wwdc2021/10021/ Not entirely SwiftUI exclusive question, but worth a try: Xcode 13 release notes list as \"known issue\": \"Swift Concurrency requires a deployment target of macOS 12, iOS 15, tvOS 15, and watchOS 8 or newer. (70738378) This suggests that concurrency might be backwards deployed? This seems too good to be true because I'd would need runtime support, but perhaps you guys can shed some light on this? For now you should assume that Swift concurrency cannot be back-deployed, however the team understands that this is a popular request and is investigating. The fun part is that Swift is open source, and so you can visit https://forums.swift.org to peek in on the active development process for Swift concurrency, and they will likely discuss this topic more there as well. Is there a way to change the background colour of a list? Last year this wasn\u2019t possible Currently it\u2019s only possible to change background color of list rows, not the List itself. Thanks @Natalia (Apple) , is this intended, or something that might change in the future? If so, what is the best way to change the background colour currently? I\u2019d like to use system materials specifically Unfortunately, it\u2019s not possible to use system materials with List at the moment, please file a feedback and we will take a look at it. In the mean time, you could try using a ScrollView instead of a List. Refreshable doesn\u2019t work with scroll view. Is it a bug or desired behaviour? Currently refreshable only supports List. Please file a feedback request if you have other use-cases you\u2019d like to see supported. How would one go about adding the .searchable modifier to a PDFView? On iOS, the searchable modifier works with a navigation view to render its search field. On macOS, it works with a navigation view or the root view of your scene. If you combine a PDFView with a navigation view, things should hopefully work as you expect. If not, please do file a feedback with some more details on what you would like to achieve. Is .searchable for local data only, or can it be used to query services? Searchable specifies that the view supports search. You can implement that search however works best for your app. For example, you could kick off a query using the bound search term, then update the results when your query completes. Are you able to programmatically change focus of text fields natively in SwiftUI this year? For example, having the a button at the bottom of the keyboard say \u201cnext\u201d and focus into the next text field? Posting this back here in case anyone present does have a moment to answer, but if not, there\u2019s a focus and accessibility specific office hours later this week. If we\u2019re not able to get to this during this block, definitely check back then! Indeed, I would take a look at the new FocusState APIs! https://developer.apple.com/documentation/swiftui/focusstate/ Is there an equivalent API similar to UISheetPresentationController for SwiftUI? Sorry. There is not a SwiftUI equivalent at this time. Is that something that would be useful to file feedback for? Certainly! Especially if you have a specific use case around when you need it or whether you need variable height. Thanks! Hi! intro? I\u2019m a hobbyist who is getting better an programming mostly because SwiftUI is so productive! Can you talk about ways to have existing SwiftUI code inherit the newer features so I could support both iOS 14 and 15 with one codebase? Most new features do not back-deploy to earlier OS versions. You can use e.g. if #available(iOS 15, *) { to check for whether a feature can be used. That said, some functionality is able to back-deploy. For example, the new ability to pass bindings to collections into List and ForEach, and get back a binding to each element, e.g. ForEach($elements) { $element in ... is able to back-deploy to any earlier release supported by SwiftUI. I thought Matt said that - So the new feature can actually work in older code? Correct Can .importsFromDevices (i.e. continuity camera) work as a source for AsyncImage? No, continuity camera will callback your importsItemProviders with an item provider that will give the full image data and not a URL. But if you have a use case where there could be some better integration between the two, please file a feedback Is there a way to animate text font size changes? Currently in iOS14 a view can smoothly animate between two sizes or colored backgrounds, but fonts will just jump from the before animation size to the after size with no interpolation in between. This would be a great feedback to file, so that we can investigate! If you\u2019re interested in a workaround, the Fruta sample code project has an AnimatableFontModifier that uses an explicit font size as its animatable data. This is used for the ingredient cards in the main smoothie detail view. This works for Fruta because the use-case is limited and the text using this modifier is for primarily for graphical purposes. https://developer.apple.com/documentation/swiftui/fruta_building_a_feature-rich_app_with_swiftui Will Xcode 13 run on Big Sur 11.3 Xcode 13 requires macOS 11.3 or later. You can find the full release notes here: https://developer.apple.com/documentation/xcode-release-notes/xcode-13-beta-release-notes Does AsyncImage support caching, and will there be an API to customize that cache? AsyncImage uses the shared URLSession , and so uses the shared URLCache. There\u2019s currently no support for customizing the cache. If that\u2019s something you\u2019d like support for though, feel free to file feedback with that request Is there a way to make refreshable work with LazyVGrid or do we have to adapt List as a Grid layout? Refreshable is currently only supported by List. With a document-based app using a DocumentGroup scene, is there any way to present a choice of templates when opening the app without an open document? I\u2019m assuming you mean something similar to the theme chooser you get in Keynote or Pages? This is not something that we have an API for at the moment, but we\u2019d love a feedback for this functionality. Any prospects for AttributedString support in TextEditor? While we can\u2019t comment on any future plans, please do log a request through the feedback assistant that this is a desired feature so that we can gauge developer interest! What is the proper way to dismiss a .fullscreenCover when it is being presented based off an item: setting the item to nil or dismissing using the presentationMode? That really depends on what is doing the dismissing. They both have the same effect in setting the item binding back to nil. It is more about where you are driving the dismissal state from. If you're dismissing from within the sheet's content, then using the presentation mode will be more flexible because that will work no matter what is controlling the presentation. There is also a new environment property introduced this year that can accomplish this as well, which is dismiss. https://developer.apple.com/documentation/swiftui/environmentvalues/dismiss/ is the refreshable property the only SwiftUI property that supports async code? The task modifier also provides support for async code out of the box! Generally, we only make user provided closures async if we can provide some additional utility to you by doing so, such as canceling a task when the attached view\u2019s lifetime ends, or finishing the refresh animation. If you want to dispatch to async code in other places, you can use an async block! \ud83d\uddd3 Wednesday Using @Environment(\\.isSearching) , how would multiple navigation bar in an app work? The isSearching environment property is tied to the searchable modifier that sets it up. If you have the following: NavigationView { ContentView() DetailView() } .searchable(text: $text) Then you could query the isSearching property inside of ContentView or DetailView. If you have the following: NavigationView { ContentView() DetailView() .searchable(text: $text) } Then you could only query it inside of DetailView. Similarly, if you have the following: NavigationView { ContentView() MiddleView() .searchable(text: $text) DetailView() .searchable(text: $text) } Then you could query isSearching in either MiddleView or DetailView and the property would relate to the enclosing searchable modifier. With the goal to bring deeper adoption of SwiftUI this year, should we implement more SwiftUI code instead of improve catalyst apps ? This really depends on your particular app and use case. It would be a great question to take to the labs! Does using more SF Symbols have an impact on total app size? Or they all are stored in the OS? These are part of the OS, so you can feel free to go wild with all the symbols you want with no impact to app size When using the WatchKit way to get text input, do we still get the text input improvements from SwiftUI? E.g. remembering the user choice of scribble vs. voice input If don't pass any suggestions to the WatchKit API, then yes, you get all of the new behavior. does the modifier of importItemProviders work with other commands, or other stuff to import things in the app ? It works with any macOS system service that vends data. So if you had a service or shortcut that didn\u2019t take input, but produced output \u2014 your app\u2019s importItemProviders could consume that data when the user invokes that service The new detents for sheets in UIKit, to allow them to sit at different heights, looks amazing! Unfortunately there doesn't seem to be an equivalent in SwiftUI \u2013 is there any plan to bring it across? This is something we know folks would appreciate. Enhancement request Feedback with particularly use case would really help us. We\u2019re particularly interested in use cases around variable heights in SwiftUI sheets. Can the new .refreshable API be used with custom refresh controls / spinners? Take a look at the EnvironmentValues.refresh property. The refreshable modifier sets this property up with closure provided to the modifier. You can query this property ( @Environment(.refresh) private var refresh ) to hook up to your own UI Can we use the new buttons with non-SF single-color graphics? Yep, in fact the new buttons can have a label of any view, including shapes and more! The one thing to be careful of with custom images is that they use template rendering if you want the standard foreground styling within the button. (otherwise they\u2019ll be the exact color of the image\u2019s pixels) Can we customize and put \"searchable\" search box anywhere? (Without going the old way, adding text views) The searchable modifier supports a few customization points with the SearchFieldPlacement type. You can pass a placement into the modifier: .searchable(text: $text, placement: .navigationBarDrawer(displayMode: .always)). How do we assign a TextField in SwiftUI to gain focus as soon as a View opens? You can use the new @FocusState property wrapper and focused() modifier to programmatically control focus in many different ways, including when your UI first appears. For example, you could trigger a specific view to be focused using onAppear or any other event callback. How to force SF Symbols not to be automatically filled/unfilled based on the context (as shown in tab bars)? Is there any way to force them to be non-filled? You can use .symbolVariant(.fill) to opt in a view or view hierarchy to fill variants, and see the SymbolVariants type for other variants you can use with it. Is there a SwiftUI equivalent for preferredStatusBarStyle in iOS 15? I\u2019m afraid there is no new API for that at this time. That would be a great enhancement Feedback to help us gauge interest. If you\u2019ve already filed it, thank you! We know it\u2019s something folks want.","title":"SwiftUI"},{"location":"wwdc21/SwiftUI.html#swiftui-lounge-qas","text":"","title":"SwiftUI Lounge QAs"},{"location":"wwdc21/SwiftUI.html#by-emin","text":"","title":"by emin"},{"location":"wwdc21/SwiftUI.html#tuesday","text":"","title":"\ud83d\uddd3 Tuesday"},{"location":"wwdc21/SwiftUI.html#whats-your-recommended-approach-to-displaying-a-new-macos-window-not-a-new-document-or-a-confirmation-dialog-just-here-is-some-information-that-makes-sense-to-show-right-now-such-as-unlocking-an-iap-ive-seen-hacks-with-handlesexternalevents-but-its-not-very-pleasant","text":"We don\u2019t have much API in this area. A NavigationLink when used within a commands context will open a new window, and as you noted, handlesExternalEvents can be used to, though this is primarily due to the default behavior of that modifier, which is to create a new window for the given scene, if no windows prefer to handle the event. We\u2019d love a feedback for this functionality, and if you can share any specifics of your use case in it, that is even better. Thanks!","title":"What's your recommended approach to displaying a new macOS window? Not a new document or a confirmation dialog, just \"here is some information that makes sense to show right now\", such as unlocking an IAP. I've seen hacks with handlesExternalEvents() but it's not very pleasant."},{"location":"wwdc21/SwiftUI.html#for-swiftui-macos-document-apps-is-there-a-recommended-way-to-save-and-restore-window-size-and-position","text":"Hi, when state restoration is not enabled on macOS, this is expected behavior at the moment. We\u2019d welcome a feedback for this, though. If you could include any information about your use case as well, that\u2019d be very helpful. Thanks!","title":"For SwiftUI macOS document apps, is there a recommended way to save and restore window size and position?"},{"location":"wwdc21/SwiftUI.html#suggestion-to-the-designers-amongst-the-swiftui-folks-present-it-would-be-great-if-there-were-more-examples-of-unique-user-experience-interactions-especially-navigation-instead-of-assuming-that-everyone-wants-to-always-use-navigationview-as-the-central-ux-construct-uikit-was-only-slightly-better-with-sparse-examples-to-customize-navigation-view-transitions-but-it-too-lacked-complete-flexibility-would-love-to-hear-your-feedback-on-this","text":"Unfortunately customizing navigation transitions isn\u2019t supported today \u2014 meaning if you want to invent awesome transitions you\u2019ll need to create your own containers and the state that manages them\u2026 but you\u2019ll need to ensure your custom goodies properly handle accessibility, common system interactions, and more which can be tricky. Ideally, please file feedback with some use cases or examples for what you have in mind, I would love to see the team take a look at enabling awesome experiences that work well with the system!","title":"Suggestion to the designers amongst the SwiftUI folks present:  it would be great if there were more examples of unique user experience interactions, especially navigation, instead of assuming that everyone wants to always use NavigationView as the central UX construct.  UIKit was only slightly better with sparse examples to customize Navigation View transitions, but it too, lacked complete flexibility.  Would love to hear your feedback on this!"},{"location":"wwdc21/SwiftUI.html#is-there-ever-a-case-in-which-spacer-is-superior-to-framemaxwidth-infinityframemaxheight-infinity","text":"Howdy! There was a similar question yesterday about Spacer \u2018versus\u2019 frame, check out the answer for how they compare: While Spacer is a view, it doesn't end up displaying anything of its own so it is plenty lightweight. Using .frame can have other behavior introduced to the way the view gets laid out beyond just changing its size. They both have their uses, so use them each where appropriate. To add a little more onto this, even in cases where you will get almost entirely the same behavior between the two, the performance difference will be so minimal that I would strongly suggest prioritizing code readability over performance / memory use to make this decision. If Spacer makes it more clear what layout you\u2019re trying to specify, use that, and vice versa. But the gist is: they both have their purposes and are extremely efficient from a performance perspective. So, you should focus on what your intention is and which reads better or offers the functionality you\u2019re trying to utilize as you construct your hierarchies","title":"Is there ever a case in which Spacer() is superior to .frame(maxWidth: .infinity)/.frame(maxHeight: .infinity)?"},{"location":"wwdc21/SwiftUI.html#hey-is-it-a-way-to-have-the-coordinate-of-the-cursor-inside-an-image-in-swiftui","text":"I would like to display a crosshair by drawing two lines from the cursor to the edges of the picture. I tried with NSEvents but it gave me the cursor location relative to my screen. thanks, Nicolas Howdy! This sounds like excellent topic to file feedback to help the team understand your use case, as I don\u2019t believe this is supported today.","title":"Hey, Is it a way to have the coordinate of the cursor inside an image in SwiftUI."},{"location":"wwdc21/SwiftUI.html#how-do-we-set-preferredscreenedgesdeferringsystemgestures-in-a-swiftui-app","text":"Currently you need to use a representable to access that property.","title":"How do we set preferredScreenEdgesDeferringSystemGestures in a swiftUI app?"},{"location":"wwdc21/SwiftUI.html#are-you-able-to-give-some-indication-of-why-the-semantic-background-colors-from-uikit-are-missing-we-only-have-colorbackground-as-opposed-to-the-main-varying-alternatives-and-its-annoying-to-have-to-wrap-them-repeatedly","text":"A goal for us is that the Color and other API we provide works great on all platforms. So there are often other APIs to help get those effects: for instance GroupBox on iOS will produce the stacking (secondary and so on) system background colors, and on macOS gives you a similar effect but using the more platform appropriate group box (9-part) artwork instead of colors at all. The new .primary, .secondary, .tertiary, .quaternary shape styles are similar in that they also work across platforms and now can correctly give the correct vibrant rendering effect on top of materials So while we might not add a Color for everything that UIKit has, we do want to make sure we have coverage for those design concepts. (so specific feedbacks on things that are missing are always appreciated!) Things like label , secondaryLabel, etc are all achievable using those shape styles above and are even smarter in those material contexts, i.e. .foregroundStyle(.secondary)","title":"Are you able to give some indication of why the semantic background colors from UIKit are missing? We only have Color.background as opposed to the main varying alternatives, and it's annoying to have to wrap them repeatedly."},{"location":"wwdc21/SwiftUI.html#if-i-pass-around-a-single-stateobject-through-injection-from-view-a-to-subview-b-to-subview-c-when-the-data-updates-will-all-3-views-get-invalidated-and-redrawn-what-if-only-view-a-and-c-need-to-use-the-data-and-view-b-is-only-a-middleman","text":"Only views that read properties of the object should update, but do note that if a view reads any property it will be invalidated on objectWillChange, even if the particular property begin read did not change.","title":"If I pass around a single @StateObject through injection from View A to Subview B to Subview C, when the data updates, will all 3 views get invalidated and redrawn? What if only View A and C need to use the data, and view B is only a middleman?"},{"location":"wwdc21/SwiftUI.html#im-trying-to-update-a-text-view-based-on-some-state-eg-from-a-text-field-the-text-is-inside-a-scroll-view-and-i-am-using-scrollviewreader-to-scroll-to-the-end-whenever-the-text-changes-for-some-reason-scrollto-doesnt-work-until-i-manually-start-scrolling-after-that-it-works-fine","text":"struct Foo: View { @State private var text = \"\" private let letters = Array(\"abcdefghijklmnopqrstuvqxyz\") private let timer = Timer.publish(every: 0.1, on: .main, in: .common).autoconnect() var body: some View { ScrollView(.horizontal, showsIndicators: false) { ScrollViewReader { scrollView in HStack { Text(self.text) .fixedSize(horizontal: true, vertical: false) .onAppear { scrollView.scrollTo(0) } .onChange(of: self.text) { _ in scrollView.scrollTo(0) } Color.clear .id(0) } } } .onReceive(self.timer) { _ in self.text.append(letters.randomElement()!) } } } Howdy! Please file feedback with this sample code, this looks like an issue the team should take a look at. Additionally, you should take a look at the new TimelineView and replace your use of Timer here. It\u2019s not recommended to declare new objects in your view\u2019s initializer without a @StateObject or @ObservedObject property wrapper, if you must use a Timer, store it inside an ObservableObject that you can refer to as a StateObject, or another similar technique.","title":"I'm trying to update a Text view based on some state (eg. from a text field). The text is inside a scroll view, and I am using ScrollViewReader to scroll to the end whenever the text changes. For some reason, scrollTo doesn't work until I manually start scrolling \u2014 after that it works fine"},{"location":"wwdc21/SwiftUI.html#is-it-possible-to-enable-sloppy-swiping-for-navigation-links-in-swiftui-swiping-to-go-back-from-anywhere-on-the-screen-also-is-it-possible-to-remove-the-8pt-buffer-before-a-swipe-to-go-back-is-recognized-so-swipe-to-go-back-is-recognized-instantly-rather-than-having-the-slight-delay","text":"Unfortunately, this isn\u2019t currently supported, but feel free to file feedback requesting these features!","title":"Is it possible to enable \u201csloppy swiping\u201d for navigation links in SwiftUI (swiping to go back from anywhere on the screen)? Also, is it possible to remove the 8pt buffer before a swipe to go back is recognized (so swipe to go back is recognized instantly rather than having the slight delay)?"},{"location":"wwdc21/SwiftUI.html#can-a-swiftui-view-or-canvas-be-rendered-into-a-pdf-like-a-uiview-can-using-draw-is-there-another-method-that-does-this","text":"Unfortunately, this isn\u2019t currently supported. Please do file a feedback report if that\u2019s a feature you\u2019re interested in. We really do appreciate them!","title":"Can a SwiftUI View or Canvas be rendered into a PDF like a UIView can using draw ?  Is there another method that does this?"},{"location":"wwdc21/SwiftUI.html#is-there-anyway-to-dismiss-a-keyboard-presented-from-a-textfield-while-scrolling-a-list-there-is-a-behavior-provided-in-uikit-by-keyboarddismissmode-uiscrollview-but-its-disabled-in-swiftui-list-also-i-tried-to-embed-a-uiscrollview-using-uiviewrepresentable-and-enable-keyboarddismissmode-but-the-behavior-is-buggy","text":"Unfortunately, that\u2019s not currently supported. Thank you for the feedback you already filed! We really do appreciate it. If you want to file an additional feedback report requesting API for solving the problem in a SwiftUI-esque way as well, that would be appreciated as well!","title":"Is there anyway to dismiss a keyboard presented from a TextField while scrolling a List? There is a behavior provided in UIKit by keyboardDismissMode UIScrollView but it's disabled in SwiftUI List. Also, I tried to embed a UIScrollView using UIViewRepresentable and enable keyboardDismissMode but the behavior is buggy"},{"location":"wwdc21/SwiftUI.html#is-there-any-way-to-convert-from-the-old-appdelegatescenedelegate-lifecycle-to-the-new-swiftui-2-lifecycle-id-rather-not-re-write-my-entire-application-so-while-its-still-in-the-early-ish-phases-i-wanted-to-know-if-this-was-possible","text":"Yes! You can use the UIApplicationDelegateAdaptor property wrapper in your App. Something like this: UIApplicationDelegateAdaptor var myDelegate: MyAppDelegate SwiftUI will instantiate an instance of your UIApplicationDelegate and call it in the normal fashion. Furthermore, if you return a custom scene delegate class from configurationForConnectingSceneSession, SwiftUI will instantiate it and call it as well.","title":"Is there any way to convert from the old AppDelegate/SceneDelegate lifecycle to the new \"SwiftUI 2\" lifecycle? I'd rather not re-write my entire application, so while it's still in the early-ish phases I wanted to know if this was possible"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-make-two-views-from-different-hierarchies-have-the-same-hightwidthxy-position-that-is-easier-to-understand-than-using-preference-keys","text":"Yes! Look into matchedGeometryEffect.","title":"Is there a way to make two views from different hierarchies, have the same hight/width/x/y position, that is easier to understand than using Preference Keys?"},{"location":"wwdc21/SwiftUI.html#is-it-possible-to-display-a-swiftui-view-on-an-external-display-on-ipadiphone-using-the-swiftui-app-lifecycle","text":"Thanks for the question. I\u2019m afraid that\u2019s not currently supported.","title":"Is it possible to display a SwiftUI view on an external display, on iPad/iPhone, using the SwiftUI App lifecycle?"},{"location":"wwdc21/SwiftUI.html#this-is-a-strange-request-but-is-it-possible-to-intercept-the-actions-of-a-button-or-gesture-with-a-modifier-wanting-to-devise-a-way-wrap-the-invocation-for-example-with-analytics-calls","text":"Unfortunately, that\u2019s not currently possible today. If that\u2019s something you\u2019d find useful, please feel free to file a Feedback requesting it!","title":"this is a strange request, but is it possible to \"intercept\" the actions of a button or gesture with a modifier? wanting to devise a way \"wrap\" the invocation (for example with analytics calls)"},{"location":"wwdc21/SwiftUI.html#are-there-any-places-where-you-think-yep-this-is-the-place-to-use-onappear-rather-than-task","text":"onAppear() is still fine to use. There\u2019s no need to update existing code that uses it. Going forward, I think task() provides a more general solution, even for short synchronous work, since it sets you up to evolve towards asynchronous work if necessary in the future.","title":"Are there any places where you think \"yep, this is the place to use onAppear() rather than task()?"},{"location":"wwdc21/SwiftUI.html#so-you-would-always-use-task-for-new-code-or-are-there-still-places-where-onappear-it-the-right-solution-i-was-maybe-expecting-to-see-onappear-being-gently-deprecated-or-similar","text":"I\u2019d always use task() personally, but there\u2019s also a nice symmetry between onAppear() and onDisappear() that some folks will want to maintain.","title":"So\u2026 you would always use task() for new code, or are there still places where onAppear() it the right solution? I was maybe expecting to see onAppear() being gently deprecated or similar."},{"location":"wwdc21/SwiftUI.html#our-apps-stores-the-position-of-our-custom-split-view-controls-in-its-documents-it-would-be-nice-to-use-hsplitview-vsplitview-and-give-them-as-a-parameter-a-binding-to-set-their-position-to-simplify-storing-and-restoring-their-state-for-now-it-seems-id-need-to-use-a-geometryreader-to-get-the-state-and-a-frame-on-one-of-the-child-views-to-set-the-state-can-you-recommend-a-cleaner-approach","text":"Howdy! Unfortunately there is no API to do this in SwiftUI today, would you mind filing feedback on this? It would be great to understand your use case here!","title":"Our apps stores the position of (our custom) split view controls in its documents. It would be nice to use HSplitView, VSplitView and give them as a parameter a binding to set their position to simplify storing and restoring their state. For now it seems I'd need to use a GeometryReader to get the state and a .frame on one of the child views to set the state. Can you recommend a cleaner approach?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-measure-the-rendering-time-or-memory-footprint-for-a-swiftuis-body-method-being-called-in-xctest-id-like-to-setup-some-baseline-testing-so-that-i-can-be-aware-of-any-regressions-in-performance-but-i-havent-been-able-to-work-out-how-to-do-it","text":"I\u2019m afraid not. I\u2019d love to get an enhancement request Feedback for that use case. We have support for Instruments, but not XCTest.","title":"Is there a way to measure the rendering time or memory footprint for a SwiftUI's body method being called in XCTest?  I'd like to setup some baseline testing so that I can be aware of any regressions in performance, but I haven't been able to work out how to do it."},{"location":"wwdc21/SwiftUI.html#in-general-to-pass-data-around-would-it-better-to-have-an-environmentobject-that-could-be-called-within-a-view-or-an-observedobject-that-gets-passed-down-andor-injected-through-child-views","text":"Both have their uses, and it depends on the architecture you\u2019re building. If you have one (or a few) large ObservableObjects that large parts of the view hierarchy need to see, I would generally recommend EnvironmentObject as SwiftUI can look at which of your views depend on the EnvironmentObject and only invalidate those when your ObservableObject changes (you can get this behavior with ObservedObject too, but it\u2019s more cumbersome). Plus, views that don\u2019t actually use the ObservableObject don\u2019t get cluttered with code relating to it. That said, if your model is, for example, an object graph that is largely not structured based on your view hierarchy, it may make more sense to use ObservedObject to grab pieces of that model out to use in your view.","title":"In general, to pass data around, would it better to have an EnvironmentObject that could be called within a view, or an ObservedObject that gets passed down (and/or injected) through child views?"},{"location":"wwdc21/SwiftUI.html#on-macos-you-can-prevent-a-window-from-resizing-by-setting-a-specific-frame-size-however-this-doesnt-prevent-fullscreenzoom-this-results-in-a-broken-animation-and-a-tiny-view-in-the-middle-of-the-screen","text":"it is possible to tell swiftui the window does not support fullscreen? Hi - sorry you are hitting this bug. Using a fixed size frame is the correct expression here. Also, thank you for the feedback!","title":"on macOS, you can prevent a window from resizing by setting a specific frame size, however this doesn't prevent fullscreen/zoom. this results in a broken animation and a tiny view in the middle of the screen."},{"location":"wwdc21/SwiftUI.html#can-you-provide-guidance-for-when-the-following-error-message-is-printed-in-the-console","text":"Bound preference CollectionViewSizeKey<UUID> tried to update multiple times per frame ( CollectionViewSizeKey<UUID> is the name of the preference.) The preference is updated from inside a GeometryReader. I think the error message happens if the preference modifier is inside a ScrollView. That indicates a cyclic update. The size of your GeometryReader is changing based on the size of your GeometryReader. Try lifting your GeometryReader higher in the view hierarchy if possible, or look for other ways to avoid the cycle.","title":"Can you provide guidance for when the following error message is printed in the console:"},{"location":"wwdc21/SwiftUI.html#i-am-using-observedobject-now-for-my-model-since-i-still-need-to-support-ios-13-however-i-know-that-stateobject-provides-the-correct-behaviors-to-me-is-there-a-suggested-way-to-use-them-at-the-same-time-for-back-compatibility-i-first-thought-if-available-might-work-but-it-does-not-work-for-a-property","text":"For supporting iOS 13, you\u2019ll need to use @ObservedObject and keep your object alive through some other means, like using a static property or keeping a reference in your application delegate. I don\u2019t think trying to switch between observed object and state object buys you much here, since changing the owner of the object with availability checks would be awkward.","title":"I am using @ObservedObject now for my model, since I still need to support iOS 13. However I know that @StateObject provides the correct behaviors to me. Is there a suggested way to use them at the same time for back compatibility? I first thought if #available might work, but it does not work for a property."},{"location":"wwdc21/SwiftUI.html#ive-had-several-intermittent-crashes-from-environment-objects-being-nil-when-i-pass-them-to-a-sheet-or-navigationlink-its-tricky-to-replicate-due-to-being-intermittent-and-i-usually-work-around-it-by-architecting-my-code-differently-to-avoid-passing-environment-objects","text":"Do you know of reasons this might happen? All I can think of is that the views that originate the environmentObject further up the view hierarchy are being taken out of memory. Thanks for any help you can provide! NavigationLink by design doesn\u2019t flow EnvironmentObjects through to its destination as it\u2019s unclear where the environmentObject should be inherited from. I suspect this might what\u2019s causing your issue. In order to get the behavior you expect, you\u2019ll have to explicitly pass the environmentObject through at that point. You can also apply the environmentObject to the NavigationView itself, which will make it available to all pushed content.","title":"I've had several intermittent crashes from environment objects being nil when I pass them to a sheet or NavigationLink. It's tricky to replicate due to being intermittent and I usually work around it by architecting my code differently to avoid passing environment objects."},{"location":"wwdc21/SwiftUI.html#will-the-project-in-its-entirety-from-build-apps-that-share-data-through-cloudkit-and-core-data-wwdc21-10015-be-available-for-download","text":"","title":"Will the project in its entirety from Build apps that share data through CloudKit and Core Data (wwdc21-10015) be available for download?"},{"location":"wwdc21/SwiftUI.html#are-geometryreaders-really-bad-in-terms-of-performance-im-getting-the-feeling-that-they-should-be-avoided-but-i-dont-know-if-its-because-theyre-inefficient-because-theyre-breaking-the-layout-or-because-other-solutions-may-exist-like-anchored-preferences-and-be-better-suited-for-the-purpose","text":"Just like any tool, GeometryReader has a time and place where it is correct to use. There aren\u2019t any particular performance pitfalls I\u2019d call out with them, but they shouldn\u2019t be used as a hammer.","title":"Are GeometryReaders really bad in terms of performance? I'm getting the feeling that they should be avoided, but I don't know if it's because they're inefficient, because they're \"breaking\" the layout, or because other solutions may exist (like anchored preferences) and be better suited for the purpose?"},{"location":"wwdc21/SwiftUI.html#i-noticed-that-while-using-combine-and-lists-say-local-search-combined-with-remote-results-lists-have-a-really-really-hard-time-keeping-up-with-animated-updates-i-found-the-only-reliable-way-to-force-correct-data-representation-is-to-use-iduuid-and-turn-off-animations-is-this-somewhat-expected","text":"We worked really hard on improving List performance in iOS 15, macOS Monterey, and aligned releases. Please try there and let us know if you\u2019re still seeing issues. If you aren\u2019t doing so already, it also may be good to debounce the queries.","title":"I noticed that while using Combine and lists (say local search combined with remote results). Lists have a really, REALLY hard time keeping up with animated updates. I found the only reliable way to force correct data representation is to use .id(UUID()) and turn off animations. Is this somewhat expected?"},{"location":"wwdc21/SwiftUI.html#when-creating-a-uiviewrepresentable-it-is-dangerous-for-the-coordinator-to-hold-an-instance-of-the-uiview-passed-in-updateuiview-or-should-it-be-strictly-treated-as-ephemeral","text":"That is OK! Your coordinator will have been created before any views are \u2014 so in makeUIView you can give the coordinator a reference to that view","title":"when creating a UIViewRepresentable, it is dangerous for the Coordinator to hold an instance of the UIView passed in updateUIView() or should it be strictly treated as ephemeral?"},{"location":"wwdc21/SwiftUI.html#hi-guys-you-all-did-a-great-job-again-congrats-my-question-is-related-to-canvasview-that-view-is-pretty-awesome-and-opens-lots-of-possibilities-for-creative-and-generative-art-for-example-i-would-like-to-know-how-behaves-a-canvas-encapsulated-in-a-timeline-receiving-updates-of-bindings-combines-streams-during-the-render-does-it-lost-the-current-time-information-does-it-resets-to-re-render-the-new-state-or-theres-no-re-rende-at-all-and-the-timeline-still-running-wherever-the-body-changes","text":"Thank you! As long as the identity of the timeline is the same, and the value of the schedule didn\u2019t change based on the body update, it shouldn\u2019t trigger a new update of the contained Canvas. If the content of the canvas itself changed, you will likely see another update from the TimelineView with the date of the current entry of the schedule.","title":"Hi guys, you all did a great job again congrats. My question is related to CanvasView, that view is pretty awesome and opens lots of possibilities for creative and generative art for example. I would like to know how behaves a Canvas encapsulated in a Timeline receiving updates of Bindings Combine's streams. During the render, does it lost the current time information, does it resets to re-render the new state or there's no re-rende at all and the Timeline still running wherever the body changes?"},{"location":"wwdc21/SwiftUI.html#what-is-the-best-practice-for-bypassing-the-system-styling-for-a-component","text":"For example, in a Section header in a grouped list, SwiftUI automatically dims the content and capitalizes all text (as you would expect in a text-only section header for UIKit). Is there a built-in way to bypass this dimming and capitalization? Many of the customizations you see are part of the default styling that lets you have the most natural feeling UI by default. However, most of these default stylings should be overridable by using the same modifiers you would to get that style. For example, if you want to remove the default capitalization of the section header, you can use the text case modifier: Section { // ... } header: { Text(\"My Header\") .textCase(nil) } The same goes for other customization points like foreground style, font, etc.","title":"What is the best practice for bypassing the system styling for a component?"},{"location":"wwdc21/SwiftUI.html#canvas-seems-to-lose-its-intrinsic-content-size-and-appear-as-10x10-when-nested-in-a-scrollview-is-there-a-as-to-work-around-this-behaviour","text":"Thanks for the question! You might try putting a flexible frame on the Canvas, something like .frame(maxWidth: .infinity, maxHeight: .infinity). (Apologies if I got that a little wrong. \\me files Feedback asking for auto-complete in Slack.)","title":"Canvas seems to lose its intrinsic content size and appear as 10x10 when nested in a ScrollView, is there a as to work around this behaviour?"},{"location":"wwdc21/SwiftUI.html#how-do-i-profile-swiftui-code-to-know-how-to-optimize-my-views-instruments-is-almost-only-showing-swiftui-library-code-so-its-hard-to-see-what-is-expensive-to-render","text":"Using the SwiftUI instrument will help call out expensive body methods. In addition it\u2019s important to limit the number of times each views body will get reevaluated. Highly recommend watching the Demystifying talk for some in depth looks at how this works. Pro tip: call the new debug helper Self._printChanges() inside body to log which property caused the view to be reevaluated.","title":"How do I profile SwiftUI code, to know how to optimize my views? Instruments is almost only showing SwiftUI library code, so it's hard to see what is expensive to render..."},{"location":"wwdc21/SwiftUI.html#hi-folks-thank-you-for-swiftui-i-cant-believe-how-straightforward-it-makes-so-many-things","text":"I'm wondering, is there any way to bind to the state of expansion in a hierarchical List (i.e. one created with a children ) parameter, so that we can expand and collapse items programmatically? Thanks for the question! I\u2019m afraid there\u2019s not currently a way to bind the expansion state of an entire hierarchy. You can use DisclosureGroup inside a List to bind a single level. I\u2019d love an enhancement request Feedback with your particular use case. Managing the expansion state of an entire hierarchy is a difficult API design problem, so more info on your use case would be super helpful!","title":"Hi folks! Thank you for SwiftUI -- I can't believe how straightforward it makes so many things."},{"location":"wwdc21/SwiftUI.html#how-can-i-pass-an-environmentobject-to-a-viewmodel-im-trying-to-change-a-tab-inside-the-viewmodel-using-the-usersettings","text":"@EnvironmentObject and all the other SwiftUI\u2019s property wrappers are only valid and functional when used inside a View. In general I would discourage you from using views to pass data between different model objects.","title":"How can I pass an @EnvironmentObject to a ViewModel? I'm trying to change a tab inside the ViewModel using the UserSettings."},{"location":"wwdc21/SwiftUI.html#what-is-the-best-way-to-deal-with-atomic-changes-in-state-when-changing-several-state-variables-in-sequence-i-can-manage-this-generally-with-onchange-but-it-doesnt-trigger-the-action-when-the-state-variable-was-set-to-the-same-value-it-had-before-thus-no-change-id-like-to-make-sure-that-i-trigger-my-update-code-even-if-the-value-didnt-change-equivalent-to-didset-in-swift-which-is-triggered-regardless-of-the-old-value","text":"Additional info pending","title":"what is the best way to deal with atomic changes in state when changing several state variables in sequence? I can manage this generally with onChange but it doesn't trigger the action when the state variable was set to the same value it had before (thus no change). I'd like to make sure that I trigger my update code even if the value didn't change (equivalent to didSet in Swift, which is triggered regardless of the old value)"},{"location":"wwdc21/SwiftUI.html#se-309-allows-using-protocols-with-associated-types-as-existentials-assumedly-including-view-at-that-point-will-there-be-a-difference-between-a-view-existential-and-anyview-in-terms-of-view-identity","text":"I \u2665\ufe0f that proposal! I can\u2019t comment on implementation details, but generally AnyView erases more information than an existential, so the existential would still have the edge.","title":"SE-309 allows using protocols with associated types as existentials, assumedly including View. At that point, will there be a difference between a View existential and AnyView in terms of view identity?"},{"location":"wwdc21/SwiftUI.html#i-noticed-focusstate-doesnt-support-an-initial-value-instead-you-can-set-the-focus-in-onappear-is-there-a-reason-for-this","text":"One way to think of focus (not to be confused with the new user-facing feature we just launched) is that it is global state managed by the framework. A lot of the times, the user will be the one in control of this state, by selecting a text field, etc. The new @FocusState and focused(_:) API allows for some influence over that state as well, but ultimately, the source of this state is still internal to SwiftUI. Does that help to answer your question?","title":"I noticed @FocusState doesn't support an initial value \u2014 instead, you can set the focus in onAppear. Is there a reason for this?"},{"location":"wwdc21/SwiftUI.html#i-wasnt-able-to-secure-a-lab-spot-applied-for-all-of-the-swiftui-open-labs-but-didnt-get-selected-for-any-does-anyone-know-why-a-disabled-button-being-re-enabled-would-have-the-text-rendered-under-the-re-enabled-color","text":"Thanks for the question. We might need sample code to understand this one. Can you reproduce in a sample view? If so, you could add that sample to a Developer Forums post or ask Developer Technical Support.","title":"I wasn't able to secure a lab spot (\"applied\" for all of the SwiftUI open labs, but didn't get selected for any). Does anyone know why a disabled button being re-enabled would have the text rendered under the re-enabled color?"},{"location":"wwdc21/SwiftUI.html#im-curious-is-shaperole-working-at-all-i-made-my-custom-shape-and-overwrite-it-with-stroke-but-there-was-no-change-in-rendering-it-always-fills-the-shape-i-know-the-role-variable-is-being-accessed-i-put-a-print-statement-but-maybe-im-missing-something-and-also-what-is-the-purpose-of-the-separator-role-it-is-not-very-clear-from-the-documentation-how-that-would-affect-output","text":"The role doesn\u2019t strictly dictate exactly how the shape will be treated \u2014 it can still be explicitly fill or stroke\u2019d by its use site. This more determines the expected semantics of how its intended to be used, in a way that affects its default foreground styling. For instance, you could have a stroke role Rectangle that is fill\u2019ed and used as a divider-like element, and so it will receive divider-like default foreground treatment.","title":"I'm curious, is ShapeRole  working at all? I made my custom shape and overwrite it with .stroke but there was no change in rendering. It always fills the shape. I know the role variable is being accessed (I put a print statement)... but maybe I'm missing something. And also, what is the purpose of the separator role? It is not very clear from the documentation how that would affect output."},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-animate-hidingshowing-the-navigation-bar-in-swiftui","text":"If you change the state that drives navigationBarHidden from inside a withAnimation block, it should animate. If it doesn\u2019t, that\u2019s a bug in SwiftUI.","title":"Is there a way to animate hiding/showing the Navigation Bar in SwiftUI?"},{"location":"wwdc21/SwiftUI.html#whats-the-best-replacement-for-a-tableheaderview-for-a-grouped-list","text":"I want to avoid having a cell with a different visual style containing the content to be used as the header view, but I want to avoid sticky headers that are typically found in plain table views. What is the state of the art here? Howdy! Great question, it\u2019s not clear to me if using a custom row instead of a section header would get what you want here, but I think it\u2019s a totally viable reason for feedback explaining your use case to make usually-sticky headers no longer sticky!","title":"What's the best replacement for a tableHeaderView for a grouped list?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-get-the-current-font-size-and-weight-i-want-to-draw-in-a-canvas-in-a-way-that-matches-sf-symbols-as-well-as-possible-is-there-a-way-to-resolve-the-current-font-like-i-can-resolve-text-and-get-these-attributes","text":"Howdy! Great question, I don\u2019t believe there\u2019s a way to get the resolved font size, weight, and design today. This is an excellent case where a feedback from you could help the team understand your needs!","title":"Is there a way to get the current font size and weight? I want to draw in a canvas in a way that matches SF Symbols as well as possible. Is there a way to resolve the current Font like i can resolve Text and get these attributes?"},{"location":"wwdc21/SwiftUI.html#are-there-any-methods-that-allow-restriction-of-view-orientation-to-just-landscape-or-just-portrait-on-a-per-view-basis-without-defaulting-to-uihostingviewcontroller","text":"I\u2019m afraid not currently. That would be a great enhancement request Feedback!","title":"Are there any methods that allow restriction of view orientation to just landscape or just portrait on a per view basis without defaulting  to UIHostingviewcontroller"},{"location":"wwdc21/SwiftUI.html#when-i-put-markdown-formatted-text-as-a-string-literal-in-a-text-it-formats-with-nice-attribution-but-when-i-pass-it-in-from-a-variable-it-doesnt-is-this-a-bug-or-have-i-misunderstood-something-about-how-texts-take-markdown-formatted-strings","text":"struct ContentView: View { var text: AttributedString = \" Hello , world ! Visit our website .\" var body: some View { VStack { Text(\" Hello , world ! Visit our website .\") Text(text) } } } The first Text renders nicely with bold, code and a link, while the second doesn't - it just shows the Markdown annotations in the string directly. I think that\u2019s a bug in beta 1. You might try Text(\"(text)\") to trigger the use of a different initializer.","title":"When I put Markdown-formatted text as a String literal in a Text, it formats with nice attribution, but when I pass it in from a variable, it doesn't. Is this a bug, or have I misunderstood something about how Texts take Markdown-formatted Strings?"},{"location":"wwdc21/SwiftUI.html#hello","text":"Is it possible to have a simultaneous DragGesture in an inner view of a ScrollView which doesn't make the ScrollView drag gesture fail? The DragGesture has a minimumDistance of 0. It seems it's impossible to scroll the scrollView if the DragGesture is recognized (it's installed as simultaneous and the GestureMask is .all ). Is there a workaround? Thanks! Howdy! Great question, this is a great case where we could use feedback from you to better understand how folks use-cases vary with gestures and ScrollView. In the meantime, a possible workaround would be to use a UIViewRepresentable where you can wrap a UIScrollView and get access to all its goodies and expose any functionality you need to your SwiftUI hierarchy.","title":"Hello,"},{"location":"wwdc21/SwiftUI.html#is-it-intended-that-setting-a-value-to-a-focusstate-property-inside-a-form-does-not-work-the-property-stays-nil-and-thus-the-focus-isnt-moved-eg-to-a-textfield-inside-the-form-using-a-vstack-instead-of-the-form-works-like-a-charm","text":"Yes, please file feedbacks (if you already haven\u2019t) for any context where @FocusState doesn\u2019t work the way you\u2019d expect. Thanks!","title":"Is it intended that setting a value to a @FocusState property inside a Form does not work? The property stays nil and thus the focus isn't moved e.g. to a TextField inside the form. Using a VStack instead of the form works like a charm."},{"location":"wwdc21/SwiftUI.html#is-there-any-way-to-get-geometryreader-size-from-another-view-i-want-to-replace-with-the-height-of-hello-world","text":"struct ContentView: View { var body: some View { VStack { Text(\"Hello world!\") .background( GeometryReader { proxy in Color.clear /// placeholder let _ = print(proxy.size.height) /// 20.333333333333332 } ) Text(\"Height of first text is ???\") } } } Howdy! Using a GeometryReader in a background of a view ensures the GeometryReader doesn\u2019t grow to be larger than that containing view, but it makes it tricky to bubble its size out. You could do something like this: struct ContentView: View { @State private var height = 100.0 var body: some View { MyView().background { GeometryReader { proxy in Color.clear .onAppear { height = proxy.size.height } .onChange(of: proxy.height) { height = $0 } } } } } Then you can use your height State property like usual. \u26a0\ufe0f Beware: You must ensure you will not cause a continuous layout loop here, if your layout responds to height changing in a way that causes the GeometryReader to lay out again and cause height to get updated, you can get into a loop!","title":"Is there any way to get GeometryReader size from another view? I want to replace \"???\" with the height of \"Hello world!\"."},{"location":"wwdc21/SwiftUI.html#hi-im-trying-to-implement-an-interactive-media-playback-timeline-ie-slider-for-my-audio-player-app-in-swiftui-however-when-i-use-a-high-frequency-timer-to-update-the-playback-timeline-the-app-and-other-views-become-unresponsive-how-can-i-implement-high-frequency-swiftui-view-updates-and-still-maintain-a-responsive-and-interactive-app","text":"Thanks for the question! It\u2019s hard to give specific advice without seeing code, so this might be a good question for the Developer Forums. A couple of other useful things to look at: There\u2019s an Instruments tool for diagnosing why an update is slow. Check out the new TimelineView for creating views that update at the same frequency as the display. It doesn\u2019t do any good to try to update faster than that, because the display can show intermediate frames anyway.","title":"Hi, I'm trying to implement an interactive media playback timeline (i.e., slider) for my audio player app in SwiftUI. However, when I use a high frequency timer to update the playback timeline, the app and other views become unresponsive :(. How can I implement high frequency SwiftUI view updates, and still maintain a responsive and interactive app?"},{"location":"wwdc21/SwiftUI.html#by-default-the-title-of-newitem-is-new-window-how-i-can-customize-it-for-example-new-window","text":"We will use the title of the WindowGroup in the menu item, if you provide one. For example: WindowGroup(\"Viewer\") { ... } Will give you a menu item titled \u201cNew Viewer Window\u201d. This title will also be used for the default window title, which can be changed with navigationTitle(_:).","title":"By default the title of .newItem is \"New Window\". How I can customize it? For example \"New  Window\""},{"location":"wwdc21/SwiftUI.html#friday","text":"","title":"\ud83d\uddd3 Friday"},{"location":"wwdc21/SwiftUI.html#hello_1","text":"When using TCA, a new instance of ObservableObject (the ViewStore ) is frequently installed as @ObservedObject when the view tree invalidates. What are the consequences of vending a new instance (possibly with the same properties' values) in terms of performances? Would it be absolutely better to reuse the same instance if possible, or is it acceptable as @ObservedObject installation is quite efficient? Thanks! I can\u2019t speak to a third party framework, but in general if the observable object is replaced, every view that has a dependency on it must be re-rendered. Check out the talk Demystify SwiftUI for more details on dependencies.","title":"Hello,"},{"location":"wwdc21/SwiftUI.html#the-canvas-looks-like-a-great-new-addition","text":"I'm wondering about using it to render a single drawn surface that can be nested in a ScrollView which is then panned, zoomed into etc. Is this a reasonable solution and in terms of performance, will there be any guidelines on how far to push it? I intend to put a whole bunch of images as well as other shape data in there. This sounds like a good application for Canvas. Like anything, performance will depend on how far you push it and the hardware it\u2019s running on. I\u2019m afraid that\u2019s not a very actionable answer, but every app is different. The API documentation is here: https://developer.apple.com/documentation/swiftui/canvas/ The talk \u201cAdd rich graphics to your SwiftUI app\u201d supports the copy code feature too, so you can grab some fun snippets to play with. https://developer.apple.com/wwdc21/10021","title":"The Canvas looks like a great new addition."},{"location":"wwdc21/SwiftUI.html#if-we-break-our-views-into-separate-some-view-properties-to-help-readability-is-there-much-cost-to-marking-those-other-properties-as-viewbuilders-to-get-the-nicer-syntax-is-that-something-we-need-to-worry-about","text":"Nope, in fact, we encourage you to do so! Using the @ViewBuilder syntax helps nudge you towards structuring your code in a way that SwiftUI can make use of intelligently, so using it in more places is never a problem. Check out the talk, Demystify SwiftUI for more on this! https://developer.apple.com/videos/play/wwdc2021/10022/","title":"If we break our Views into separate some View properties to help readability, is there much cost to marking those other properties as ViewBuilders to get the nicer syntax? Is that something we need to worry about?"},{"location":"wwdc21/SwiftUI.html#is-it-safe-to-employ-multiple-timelineview-with-the-animation-schedule-or-is-it-equivalent-to-instantiating-a-number-of-cadisplaylinks-i-was-thinking-of-the-adage-around-reusing-cadisplaylinks-as-much-as-possible","text":"Yes! You should be able to use as many TimelineView as appropriate to get your interface behaving how you want. SwiftUI will take care of scheduling things so they update like you want. The thing to be careful of is to not have too much \"different\" between each update of the timeline content.","title":"Is it safe to employ multiple TimelineView with the animation schedule or is it equivalent to instantiating a number of CADisplayLinks? I was thinking of the adage around \u201creusing\u201d CADisplayLinks as much as possible."},{"location":"wwdc21/SwiftUI.html#dumb-question-here-but-i-was-just-playing-around-with-the-code-in-the-advanced-graphics-section-of-whats-new-in-swiftui-taylor-showed-a-symbols-browser-i-copied-the-code-and-when-i-run-the-performance-is-really-bad-he-showed-the-smooth-gesture-with-the-fisheye-and-the-timeline-view-animation-on-my-side-it-is-super-jerky-with-seconds-delay-to-render-is-that-right","text":"Sorry about that! That\u2019s a known issue in beta 1. As a quick workaround to see the same smooth effect today, you can manually cache the resolved images. One thing you could try is moving that resolution to be outside of the inner for loop, so it only happens once. (cheating since for the code snippet it only uses the swift bird rather than every symbol like my demo had).","title":"Dumb question here... but I was just playing around with the code in the Advanced Graphics section of Whats new in SwiftUI. Taylor showed a symbols browser.... I copied the code and when I run the performance is really bad... he showed the smooth gesture with the fisheye and the timeline view animation... on my side it is super jerky with seconds delay to render... is that right?"},{"location":"wwdc21/SwiftUI.html#whats-the-recommended-way-to-share-swiftui-code-between-multiple-platform-targets-recent-xcode-multiplatform-templates-simply-make-source-files-members-of-multiple-targets-but-a-few-years-ago-the-recommendation-for-sharing-code-between-eg-an-app-target-and-an-app-extension-was-to-create-a-shared-dynamic-framework-eg-myapp-myappextension-and-myappkit-what-would-be-the-pros-and-cons-of-either-approach","text":"It really depends on the complexity of your particular app. The templates are the fastest way to get started and aim to minimize complexity. A shared dynamic framework is a great approach as your app grows. How about dynamic frameworks vs. SPM packages? I believe an SPM package can produce a dynamic framework now, but that\u2019s outside my expertise. It might be a good question for the DevTools Lounge or a Swift lab though!","title":"What's the recommended way to share SwiftUI code between multiple platform targets? Recent Xcode multiplatform templates simply make source files members of multiple targets, but a few years ago the recommendation for sharing code between e.g. an app target and an app extension was to create a shared dynamic framework (e.g. MyApp, MyAppExtension and MyAppKit). What would be the pros and cons of either approach?"},{"location":"wwdc21/SwiftUI.html#when-an-observedobject-is-passed-into-a-view-does-swiftui-differentiate-between-views-that-actually-use-it-the-object-is-used-in-the-body-and-intermediate-views-which-just-pass-that-object-to-a-child-or-are-all-views-just-invalidated","text":"Yes, there is a difference. If you don\u2019t use any of the ObservableObject property wrappers (@StateObject, @ObservedObject ) the view would not observe and update the instance. So you you just need to pass an ObservableObject through some intermediary view just make it a regular property on the view but make sure to use the property wrapper if you ever read any of the value in the view, otherwise your view will no be consistent with your data. Also, @EnvironmetObject is a great tool when you have an ObservableObject that you want to pass down multiple levels of your view hierarchy without having to manually do it every step of the way.","title":"When an observedObject is passed into a view, does SwiftUI differentiate between views that actually use it (the object is used in the body) and 'intermediate' views (which just pass that object to a child? )? Or are all views just invalidated?"},{"location":"wwdc21/SwiftUI.html#what-is-the-recommended-architecture-when-using-swiftui","text":"In a lot of the demos (and this is probably my inexperience showing) it seems that the business logic leaks into the view. Would you recommend using MVVM for example and how would you set that up? Thanks for the question! Josh S. gave a great answer to this in the Q&A yesterday: For me the most important thing is that you have a software architecture in mind that works well for you, and helps you craft maintainable apps with a good separation ways to achieve that, but they\u2019re by no means the only one. If you\u2019ve got a well-considered architecture that works well for you, I think that\u2019s great and helps you craft maintainable apps with a good separation ways to achieve that,\u201d","title":"What is the recommended architecture when using SwiftUI?"},{"location":"wwdc21/SwiftUI.html#could-we-use-prominent-window-scene-presentation-style-in-swiftui","text":"Hi, we do not have support for this, but would love a feedback with any specifics you could provide about your use case.","title":"Could we use .prominent Window Scene Presentation Style in SwiftUI?"},{"location":"wwdc21/SwiftUI.html#if-i-have-to-embed-a-swiftui-view-into-a-uiviewcontroller-to-do-something-only-available-for-uiviewcontroller-like-customize-appearance-that-swiftui-not-support-is-there-any-problem-about-the-following-two-way","text":"Create a UIHostingController A, add A's view as a subview to my own UIViewController B's view. (of course do some layout and addChild didMove stuff) Inherit UIHostingController directly to override some VC methods Either approach is fine! Please do file feedback though about what you're trying to achieve that requires wrapping the SwiftUI content like this.","title":"If I have to embed a SwiftUI View into a UIViewController to do something only available for UIViewController (like customize appearance that SwiftUI not support), is there any problem about the following two way?"},{"location":"wwdc21/SwiftUI.html#why-does-a-uiviewrepresentable-update-once-after-makeuiview-and-once-before-dismantleuiview","text":"The update function can be called for a number of reasons. It will be called at least once after make as the UIView becomes extant. It may be called multiple times before the UIView is eventually dismantled. You should not rely on any frequency (or lack thereof) of update calls.","title":"Why does a UIViewRepresentable update once after makeUIView and once before dismantleUIView?"},{"location":"wwdc21/SwiftUI.html#how-do-we-avoid-incurring-in-bound-preference-sizepreferencekey-tried-to-update-multiple-times-per-frame","text":"It sounds like you have a cycle in your updates. For example, a GeometryReader that writes a preference, that causes the containing view to resize, which causes the GeometryReader to write the preference again. It\u2019s important to avoid creating such cycles. Often that can be done by moving the GeometryReader higher in the view hierarchy so that it\u2019s size doesn\u2019t change and it can communicate size to it\u2019s subviews instead of using a preference. I\u2019m afraid I can\u2019t give any more specific guidance than that without seeing your code, but hopefully that helps you track down the issue!","title":"How do we avoid incurring in Bound preference SizePreferenceKey tried to update multiple times per frame?"},{"location":"wwdc21/SwiftUI.html#when-using-viewframeminwidth-idealwidth-maxwidth-are-there-any-combinations-of-parameters-that-are-more-performant-that-others-any-combination-to-avoid","text":"There isn't really any performance difference between any combination of parameters. You should just use the appropriate values to get the layout you're looking for. what's the best way to enforce a specific size? min + max? or ideal? or all? You would want to use the other version of .frame for that which just takes a width and a height. View.frame(width:,height:)","title":"When using View.frame(minWidth:, idealWidth, maxWidth:\u2026) are there any combinations of parameters that are more performant that others? Any combination to avoid?"},{"location":"wwdc21/SwiftUI.html#is-there-any-way-to-setcontrol-backbuttondisplaymode-from-swiftui-by-the-way-thanks-for-all-the-great-new-features","text":"Thanks for the question. I\u2019m afraid there\u2019s no SwiftUI API for this currently. If you could file an enhancement request Feedback, that would really help me prioritize that work though!","title":"Is there any way to set/control backButtonDisplayMode from SwiftUI? By the way, thanks for all the great new features"},{"location":"wwdc21/SwiftUI.html#can-you-explain-the-attributegraph-that-comes-up-while-debugging-sometimes","text":"I\u2019m afraid we can\u2019t discuss implementation details, but be sure to check out the talk \u201cDemystify SwiftUI\u201d for the details of the dependency graph. https://developer.apple.com/wwdc21/10022","title":"Can you explain the AttributeGraph that comes up while debugging sometimes?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-disable-pixel-rounding-in-swiftui-the-hover-effect-from-my-os-x-dock-yesterday-is-jittery-because-padding-is-being-applied-to-many-views-in-a-row-but-rounded-to-the-nearest-pixel-for-each-view-this-inaccuracy-in-padding-adds-up-making-the-entire-view-jitter-by-a-few-pixels-whenever-i-move-the-mouse","text":"SwiftUI layout is always rounded to the nearest pixel. But using any GeometryEffect won't take on the snapping behavior. Things like .offset and .scaleEffect are existing ways to achieve this, but you can also implement your own GeometryEffect if you need something custom.","title":"Is there a way to disable pixel rounding in SwiftUI? The hover effect from my OS X Dock yesterday is jittery because padding is being applied to many views in a row, but rounded to the nearest pixel for each view. This inaccuracy in padding adds up, making the entire view jitter by a few pixels whenever I move the mouse."},{"location":"wwdc21/SwiftUI.html#in-most-cases-the-layout-behavior-with-spacer-can-be-replaced-with-framemaxwidthalignment-or-height-seamlessly-since-spacer-is-an-actual-view-that-is-arranged-within-the-view-hierarchy-using-spacer-will-consume-more-memory-and-cpu-resources-and-demystify-swiftui-also-says-modifier-is-cheap","text":"So should I use .frame instead of Spacer as much as possible? While Spacer is a view, it doesn't end up displaying anything of its own so it is plenty lightweight. Using .frame can have other behavior introduced to the way the view gets laid out beyond just changing its size. They both have their uses, so use them each where appropriate. To add a little more onto this, even in cases where you will get almost entirely the same behavior between the two, the performance difference will be so minimal that I would strongly suggest prioritizing code readability over performance / memory use to make this decision. If Spacer makes it more clear what layout you\u2019re trying to specify, use that, and vice versa.","title":"In most cases, the layout behavior with Spacer can be replaced with .frame(maxWidth:,alignment:) (or height)  seamlessly. Since Spacer is an actual View that is arranged within the view hierarchy, using Spacer will consume more memory and cpu resources. And Demystify SwiftUI also says \"modifier is cheap\"."},{"location":"wwdc21/SwiftUI.html#does-swiftui-expose-enough-api-that-would-allow-us-to-build-our-own-lazyhvstackgrid-with-a-fully-custom-layout-or-are-there-still-a-lot-of-magical-bits-under-the-hood-that-prevent-us-from-doing-so","text":"Unfortunately, we don\u2019t offer support for building custom layouts today.","title":"Does SwiftUI expose enough API that would allow us to build our own Lazy{H,V}{Stack,Grid} with a fully custom layout, or are there still a lot of \"magical bits\" under the hood that prevent us from doing so?"},{"location":"wwdc21/SwiftUI.html#what-is-the-handlesexternalevents-modifier-ive-seen-it-used-but-dont-know-what-it-is","text":"This modifier allows you to specify a Scene to be used when external data is sent to the app - a URL or an NSUserActivity . For example, on macOS, when a url comes in that matches the pattern, we will either create a new window for that Scene, or use an existing one, if a view has been modified with handlesExternalEvents to prefer that incoming value.","title":"What is the handlesExternalEvents modifier? I\u2019ve seen it used, but don\u2019t know what it is."},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-customize-navigationviews-navbar-other-than-uinavigationbarappearance","text":"Unfortunately, there isn\u2019t any SwiftUI native way to do this right now. If this is something you want, please file a feedback report requesting the feature!","title":"Is there a way to customize NavigationView's navbar other than UINavigationBar.appearance?"},{"location":"wwdc21/SwiftUI.html#the-state-documentation-states-it-is-safe-to-mutate-state-properties-from-any-thread-what-does-it-refer-to-considering-that-swiftui-complains-with-runtime-warnings-when-a-passthroughsubject-published-from-a-non-main-thread","text":"State is thread safe and can be mutated from any thread. When you mention PassthroughSubject I would imagine you are using that in the context of an ObservableObject with either one of @StateObject, @ObserverdObject, or @EnvironmentObject . ObservableObject does require that you mutate all the properties observed by the view, and publish objectWillChange on the Main Thread. I would recommend you check out Discover Concurrency in SwiftUI where my colleague Curt and Jessica talk all about Swift and concurrency https://developer.apple.com/videos/play/wwdc2021/10019/","title":"The State documentation states \u201cIt is safe to mutate state properties from any thread.\u201d What does it refer to considering that SwiftUI complains with runtime warnings when a PassthroughSubject published from a non-main thread?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-for-a-view-to-know-when-the-window-it-is-hosted-in-is-key-or-not-on-macos","text":"Could you elaborate some on what you\u2019re trying to achieve? There is the controlActiveState property on the Environment, but there is also focusedValue(: ,: ) and @FocusedValue which are used in the context of the key window on macOS.","title":"Is there a way for a view to know when the window it is hosted in is key or not on macOS?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-disable-the-scrolling-on-a-list-so-i-can-use-it-within-a-scrollview-i-have-a-scrollview-inside-which-im-placing-an-image-some-text-and-then-i-would-like-to-be-able-to-place-a-list-however-currently-the-list-doesnt-appear-unless-i-give-it-a-fixed-frame-size-and-the-list-is-also-separately-scrollable-is-there-a-way-around-this","text":"I\u2019m sorry, but that\u2019s not currently supported. If you would be able to file an enhancement request Feedback with your use case, I\u2019d really appreciate it! I know Feedback can seem like a black box (sorry about that), but they really do help us, even if we can\u2019t respond directly to every request.","title":"Is there a way to disable the scrolling on a List so I can use it within a ScrollView? I have a ScrollView, inside which I'm placing an Image, some Text, and then I would like to be able to place a List. However, currently, the List doesn't appear unless I give it a fixed frame size, and the List is also separately scrollable. Is there a way around this?"},{"location":"wwdc21/SwiftUI.html#can-items-in-a-list-accept-drop-items-it-seems-to-immediately-crash-my-app","text":"Could you please file a feedback for this crash? If you can also include a sample that reproduces the issue, that would be especially helpful.","title":"Can items in a list accept drop items? It seems to immediately crash my app."},{"location":"wwdc21/SwiftUI.html#if-we-create-custom-property-wrappers-that-embed-existing-ones-like-state-observedobject-etc-does-swiftui-still-see-those-embedded-wrappers-and-do-the-right-thing","text":"For example, can I create an @Whatever wrapper as a convenience for @Environment(\\.whatever) and still expect that to work the same way? Yes, you can make do that. As long as you add conform to the DynamicProperty to your wrapper this will work.","title":"If we create custom property wrappers that embed existing ones (like State, ObservedObject, etc) does SwiftUI still \"see\" those embedded wrappers and do the right thing?"},{"location":"wwdc21/SwiftUI.html#without-having-to-jump-to-ios15-for-focusedscenevalue-is-there-a-recommended-way-for-non-document-windows-in-a-window-group-to-surface-a-kind-of-current-object-that-can-be-used-to-activatedeactive-menus-send-commands-to-even-if-no-editable-control-as-focus-in-swiftui","text":"Good question! focusedSceneValue provides a way for the current focused / key window to surface its values to @FocusedValues in menus and other places; this is especially important on macOS since an app can have many windows, but only one of those is key. As for other approaches, it somewhat depends on your use case: if you do need your current object to be tied to the key window specifically, there isn\u2019t a substitute. But if you more want to aggregate information across all of your windows, you could use things like preferences and the environment to manually pass that data around","title":"without having to jump to ios15 for focusedSceneValue, is there a recommended way for non-document windows in a window group to surface a kind of \"current object\" that can be used to activate/deactive menus &amp; send commands to, even if no editable control as focus? (in swiftui)"},{"location":"wwdc21/SwiftUI.html#i-have-a-framework-that-vends-a-swiftui-view-to-the-main-app-via-a-hostingcontroller-the-view-handles-everything-it-needs-internally-so-all-the-types-are-internal-the-only-public-method-is-the-one-that-vends-the-hostingcontroller-in-order-to-maintain-the-isolation-i-do-it-this-way","text":"return UIHostingController(rootView: AnyView(SchedulesView(store: store))) Is this a correct way to use AnyView Yes, that\u2019s an OK usage, particularly because it\u2019s at the base of the hierarchy view and not used to add dynamism. But there are other ways to encapsulate the exact type of the hosting controller, for instance returning an upcast or custom protocol type Returning it typed as UIViewController instead its actual UIHostingController<..> type Creating a protocol with the extra API that clients might expect from the view controller, and returning it typed as that Or by using a container UIViewController that has a child of your hosting controller","title":"I have a framework that vends a SwiftUI View to the main app via a HostingController. The view handles everything it needs internally, so all the types are internal. The only public method is the one that vends the HostingController. In order to maintain the isolation I do it this way:"},{"location":"wwdc21/SwiftUI.html#when-ive-needed-to-inject-data-into-a-detail-view-but-still-let-the-view-have-ownership-of-its-stateobject-ive-used-the-stateobjectwrappedvalue-initializer-directly-in-my-view-initializer-for-example","text":"public struct PlanDetailsView: View { @StateObject var model: PlanDetailsModel public init(plan: Plan) { self._model = StateObject(wrappedValue: PlanDetailsModel(plan: plan)) } ... } Is this an acceptable use of the initializer? I know StateObject is only supposed to initialize at the start of the View's lifetime, and not on subsequent instantiations of the View value, so I want to make sure I'm not forcing it to re-allocate new storage each time the View is re-instantiated. Yes, this is an acceptable use of the initializer and your understanding is correct: that object will be create only at the beginning of the view lifetime and kept alive. The StateObject \u2019s wrapped value is an autoclosure that is invoke only once at the beginning of the view lifetime. That also means that SwiftUI will capture the value of plan when is firstly created; something to keep in mind is that if you view identity doesn\u2019t change but you pass a different plan SwiftUI will not notice that.","title":"When I've needed to inject data into a detail view, but still let the view have ownership of its StateObject, I've used the StateObject(wrappedValue:) initializer directly in my view initializer, for example:"},{"location":"wwdc21/SwiftUI.html#hello-i-have-tried-to-implement-with-swiftui-a-common-feature-in-ios-apps-that-is-when-tapping-again-a-tab-item-of-a-tabview-with-a-nested-navigationview-it-pops-to-the-root-view-of-the-navigation-view-using-presentationmodewrappedvaluedismiss-it-just-chains-the-view-dismiss-any-idea-of-how-to-implement-this-in-a-more-clean-way-mine-feels-hacky","text":"Thanks for the question! I\u2019m afraid I don\u2019t have a great answer here, but there are a couple of options you can try. One option is to use a representable to embed a UITabBarController, so you can hook the delegate methods. Another option, if you can detect when the user taps the same SwiftUI tab again, is to decorate your NavigationView with .id(counter), where counter is @State private var counter = 0. Then when the user taps the same SwiftUI tab again, you can increment counter, which changes the identity of the navigation view, causing SwiftUI to replace it. I\u2019d love to get an enhancement request Feedback for your particular use case so we can prioritize making this easier!","title":"Hello! I have tried to implement with SwiftUI a common feature in iOS apps that is when tapping again a tab item of a TabView with a nested NavigationView, it pops to the root view of the navigation view. Using presentationMode.wrappedValue.dismiss() it just chains the view dismiss, any idea of how to implement this in a more clean way ? (mine feels \"hacky\")"},{"location":"wwdc21/SwiftUI.html#how-can-i-control-the-ideal-size-of-a-uiviewrepresentable-view-i-have-a-lot-of-trouble-getting-correct-automatic-sizing-of-wrapped-views-especially-if-they-wrap-uistackview-any-recommendations-for-getting-proper-automatic-sizing-so-i-dont-need-to-use-fixedsize-so-much","text":"Try implementing intrinsicContentSize on your view.","title":"How can I control the ideal size of a UIViewRepresentable View? I have a lot of trouble getting correct automatic sizing of wrapped views, especially if they wrap UIStackView. Any recommendations for getting proper automatic sizing so I don't need to use fixedSize so much?"},{"location":"wwdc21/SwiftUI.html#is-there-any-way-to-open-additional-window-from-swiftui-life-cycle-i-mean-call-additional-windowgroup-for-example-inspector-panel","text":"Hi - we currently do not have any API for this, though we\u2019d love if you could file a feedback with any specifics you have for your use case. One option for something like an inspector panel is that you could use NSApplicationDelegateAdaptor, and open your window by communicating with that. A secondary WindowGroup might not be the best match for something like an inspector panel, since WindowGroup supports multiple windows, and will should up in the File -> New menu. Oh, I should mention that the window created via the delegate adaptor would be an NSWindow instance, with an NSHostingView as the contentView.","title":"Is there any way to open additional window from SwiftUI Life cycle? I mean call additional WindowGroup. For example Inspector panel."},{"location":"wwdc21/SwiftUI.html#for-when-using-environmentobjects-it-seems-like-i-need-to-pass-the-environmentobject-modifier-for-every-layer-of-subview-if-i-dont-do-that-it-will-give-error-view-environmentobject-may-be-missing-as-an-ancestor-of-this-view","text":"But I thought the point of Environment Objects is to make data available to all view without writing a lot of code. Is that a design choice or am I doing something wrong? Thanks for the question. .environmentObject(\u2026) mostly flows down the view hierarchy, however there are some places where we intentionally do not forward it. For example, the destination of a navigation link does not get the environment object, because there is a conflict as to whether the destination should get the object from the originating link or the placeholder of the destination, or even the previous view on the stack. There was also a bug where sheets and popovers didn\u2019t get the environment object, but that was fixed. If you find other places where environment object does not propagate as expected, please file a Feedback. It\u2019s important to me that we get this right!","title":"For when using @EnvironmentObjects, it seems like I need to pass the .environmentObject modifier for every layer of subview. If I don't do that, it will give error \"view environmentObject may be missing as an ancestor of this view\""},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-control-the-opacityoverlay-effect-applied-to-a-menus-label-in-ios-menu-currently-applies-a-high-opacity-white-overlay-i-assume-on-its-label-when-tapped-and-id-like-to-make-it-less-opaqueoverride-the-effect-entirely","text":"Not today, but if you haven\u2019t already please file a feedback requesting the ability to do so. Oh, and adding context for why you want to customize that effect is always really useful too!","title":"Is there a way to control the opacity/overlay effect applied to a Menu's label in iOS? Menu currently applies a high-opacity white overlay (I assume!) on its label when tapped, and I'd like to make it less opaque/override the effect entirely."},{"location":"wwdc21/SwiftUI.html#can-the-new-atrributedstring-be-used-to-provide-accessibility-notations-in-swiftui-like-nsattributedstrings-can-in-uikit-should-we-report-any-attributes-from-nsattributedstring-we-need-on-attributedstring","text":"AttributedString should have the full suite of accessibility attributes and they should now be standardized across platforms! But if you see any we missed, please do file Feedback so we can fix any oversights. Thanks for the question. We\u2019re super excited about the AttributedString support! Localization, accessibility, formatting, and morphology agreement in one tidy package.","title":"Can the new AtrributedString be used to provide accessibility notations in SwiftUI like NSAttributedStrings can in UIKit? Should we report any attributes from NSAttributedString we need on AttributedString?"},{"location":"wwdc21/SwiftUI.html#ive-had-a-lot-of-inconsistent-behaviour-with-environmentobject-where-it-isnt-passed-in-nil-when-referenced-etc-am-i-holding-it-wrong-or-what-could-some-common-pitfalls-be-with-using-it-ive-reverted-to-a-singleton-for-global-access-but-id-rather-get-environmentobject-right","text":"It\u2019s a little hard to tell exactly what issue you\u2019re running into just from this description, but sorry to hear it\u2019s been causing you trouble! How have you been \u201cholding it\u201d, so to speak?","title":"I\u2019ve had a lot of inconsistent behaviour with EnvironmentObject where it isn\u2019t passed in, nil when referenced, etc. Am I holding it wrong, or what could some common pitfalls be with using it? I've reverted to a singleton for global access but I'd rather get EnvironmentObject right."},{"location":"wwdc21/SwiftUI.html#hi-thanks-for-answering-questions-here-i-have-an-app-that-needs-to-hide-the-home-indicator-but-that-does-not-seem-to-be-possible-in-swiftui-i-know-i-can-do-it-with-exchanging-the-root-viewcontroller-but-that-has-a-lot-of-side-effects-in-a-pure-swiftui-app-is-there-a-better-workaround","text":"Thanks for the question. I\u2019m afraid we don\u2019t have SwiftUI API for this currently. Using UIKit is the best option for now. If you could submit an enhancement request Feedback, I\u2019d really appreciate it.","title":"Hi! Thanks for answering questions here! I have an app that needs to hide the home indicator, but that does not seem to be possible in SwiftUI. I know I can do it with exchanging the root ViewController but that has a lot of side effects in a pure SwiftUI app. Is there a better workaround?"},{"location":"wwdc21/SwiftUI.html#is-it-okay-to-use-child-coredata-context-as-stateobject-vars-in-swiftui-views-or-would-you-recommend-passing-those-in-the-environment-and-holding-on-to-them-outside-of-swiftui","text":"There is not need to use a @StateObject since the context is not an ObservableObject. Passing it down using the environment is a good solution.","title":"Is it okay to use child CoreData context as @StateObject vars in SwiftUI views, or would you recommend passing those in the environment and holding on to them outside of SwiftUI?"},{"location":"wwdc21/SwiftUI.html#whats-the-best-practices-for-making-a-swiftui-view-accessible","text":"You should get a lot of Accessibility automatically. The best way to determine whether you need to make tweaks, using our Accessibility APIs, is to try your view with some of our features, like Large Text, VoiceOver, etc. You can also take a look at the new Accessibility Inspector in SwiftUI and see what it shows for your Preview view. In general, system standard controls tend to be accessibly by default, but when you use a lot of Shape or other manual drawing, you may need to do more work. Hi Arie. A great place to start is our introduction video from 2019. https://developer.apple.com/videos/play/wwdc2019/238/ This will introduce you to accessibility in SwiftUI. You could follow that up with this years presentation where we go beyond the basics. https://developer.apple.com/videos/play/wwdc2021/10119/ We also have many WWDC videos on best practices when making a view accessible. Such as writing great accessibility labels. https://developer.apple.com/videos/play/wwdc2019/254/","title":"What\u2019s the best practices for making a SwiftUI view accessible?"},{"location":"wwdc21/SwiftUI.html#when-using-swiftui-with-something-like-core-data-and-uihostingcontroller-how-can-we-avoid-using-anyview-if-the-environment-modifier-changes-the-type-of-the-view-see-example-below","text":"`import UIKit import SwiftUI import CoreData struct MyView: View { var body: some View { Text(\"!\") } } class MyHostingController: UIHostingController<MyView> { override func viewDidAppear(_ animated: Bool) { super.viewDidAppear(animated) // custom stuff here } } class TestViewController: UIViewController { override func viewDidLoad() { super.viewDidLoad() let persistentContainer = NSPersistentContainer(name: \"MyStore\") let rootView = MyView().environment(\\.managedObjectContext, persistentContainer.viewContext) let hostingController = MyHostingController(rootView: rootView) // this will not work anymore because type has changed with the environment modifier // more stuff } } Great question! Here\u2019s a technique, though it runs the risk of angle-bracket-blindness \u2026 In class MyHostingController: UIHostingController MyView isn\u2019t really the right type. You want the type of MyView().environment(.managedObjectContext, persistentContainer.viewContext) On the let hostingController = \u2026 line, you\u2019re probably getting an error message about the types not matching. That error message will include the full type of the right-hand side of the assignment. Something like ModifiedContent with lots of stuff inside the \u2026 there. What I like to do is (1) copy that type, then (2) add a top-level type alias: typealias MyModifiedView = ModifiedContent where the right-hand side is the value I copied from the error message. Then you can write class MyHostingController: UIHostingController","title":"When using SwiftUI with something like Core Data and UIHostingController, how can we avoid using AnyView if the environment modifier changes the type of the view. See example below."},{"location":"wwdc21/SwiftUI.html#thursday","text":"","title":"\ud83d\uddd3 Thursday"},{"location":"wwdc21/SwiftUI.html#when-using-the-new-swiftui-table-view-can-you-group-to-have-more-than-10-tablecolumns","text":"Yes, you can; just like Views! Do I understand correctly that there are no more limitation on the number of objects in @ViewBuilder? There is no change to @ViewBuilder this year, so it is still limited in the number of elements it can build into a block. But Group as well as nested builders are great tools to allow for as many views to be combined together as you want","title":"When using the new SwiftUI Table View, can you Group to have more than 10 TableColumns?"},{"location":"wwdc21/SwiftUI.html#what-happens-when-you-have-three-views-in-a-hierarchy-where-the-root-and-leaf-views-share-dependency-but-neither-share-dependencies-with-the-middle-view-would-the-middle-view-get-redrawn","text":"If the middle view isn\u2019t dependent on the others, it isn\u2019t redrawn. Note that if the root view passes parameters to the middle view, then it has a dependency.","title":"What happens when you have three views in a hierarchy, where the root and leaf views share dependency, but neither share dependencies with the middle view. Would the middle view get redrawn?"},{"location":"wwdc21/SwiftUI.html#is-there-a-good-way-to-switch-between-hstacks-and-vstacks-while-allowing-swiftui-to-understand-that-the-contents-of-those-stacks-are-the-same","text":"Lots of questions similar to this, so repeating an answer from earlier: Yes! You should check out the matchedGeometryEffect() API, which was introduced last year: https://developer.apple.com/documentation/swiftui/view/matchedgeometryeffect(id:in:properties:anchor:issource:)","title":"Is there a good way to switch between HStacks and VStacks while allowing SwiftUI to understand that the contents of those stacks are the same?"},{"location":"wwdc21/SwiftUI.html#is-the-viewbuilder-to-remove-anyview-in-demystify-swiftui-only-available-with-ios-15","text":"No, in fact it can back-deploy to any previous version!","title":"Is the @ViewBuilder to remove AnyView in \"Demystify SwiftUI\" only available with iOS 15 ?"},{"location":"wwdc21/SwiftUI.html#are-there-performance-considerations-when-generating-uuids-ie-generating-a-lot-of-uuids-for-elements-in-an-array-to-display-in-a-list","text":"It depends. You'll need to measure. However, consider generating IDs lazily (make sure you store them though!)","title":"Are there performance considerations when generating UUIDs? (I.e. generating a lot of UUIDs for elements in an array to display in a list)."},{"location":"wwdc21/SwiftUI.html#performance-wise-is-it-preferred-to-pass-observableobjects-down-to-subviews-explicitly-or-use-environmentobjects","text":"Using one or the other shouldn\u2019t make much difference in any given view, but if you don\u2019t need to use the object in some views then EnvironmentObject is a great way to avoid the boilerplate of pass it down through intermediary layers, and can avoid creating unintentional dependencies.","title":"Performance wise, is it preferred to pass ObservableObjects down to subviews explicitly, or use EnvironmentObjects?"},{"location":"wwdc21/SwiftUI.html#is-there-a-good-way-to-apply-a-modifier-to-a-swiftui-view-conditionally-im-using-a-custom-if-modifier-and-it-refreshes-the-whole-view-on-state-change","text":"Consider making an inert version of the modifier as discussed in the session. If there is a modifier that lacks an inert version that you'd like to see, please file a feedback.","title":"Is there a good way to apply a modifier to a SwiftUI view conditionally? I'm using a custom .if modifier, and it refreshes the whole view on state change :("},{"location":"wwdc21/SwiftUI.html#how-can-we-conditionally-set-different-modifier-for-example-list-styles","text":"Styles in SwiftUI are static, and are not permitted to change at runtime. This is a case where a branch is more appropriate, but consider whether you really want to change the style\u2014 a single style is almost always the correct choice. If there is a certain dynamism you're looking for here, please file a feedback.","title":"How can we conditionally set different modifier, for example list styles?"},{"location":"wwdc21/SwiftUI.html#is-there-any-situation-in-which-hashable-may-be-preferred-to-identifiable","text":"If you just need to be able to identify a value, that\u2019s what Identifiable is for, which means that only the id needs to be Hashable, not the whole type.","title":"Is there any situation in which Hashable may be preferred to Identifiable?"},{"location":"wwdc21/SwiftUI.html#if-we-apply-same-id-in-the-condition-will-swiftui-sees-this-as-a-same-view","text":"var body: some View { if isTrue { Text(\"Hello\") .id(viewID) } else { Text(\"World\") .id(viewID) } } No, these will be two different views. Raj (Apple) 3 days ago This is because body is implicitly a ViewBuilder. If you don't use a ViewBuilder, such as in another property, it would be the same view.","title":"If we apply same id in the condition, will SwiftUI sees this as a same view"},{"location":"wwdc21/SwiftUI.html#are-there-any-difference-between","text":"passing a State as a binding through each view in the hierarchy vs passing it as an environment object and only access it in the subviews that use it, say in a Text view would the first one have worse dependency graph that needs more updates? environment object is a slightly different tool than State since it requires an ObservableObject. Environment object is optimized to invalidate only the views that read its value. As for State, when you pass the binding down to subviews, changing the binding will mutate the state that in turn will invalidate the view holding the state and its children.","title":"Are there any difference between"},{"location":"wwdc21/SwiftUI.html#what-is-a-good-way-to-have-a-custom-order-of-elements-in-a-list-so-the-user-can-change-the-order-using-a-stable-id","text":"A List or ForEach will preserve the same order as used in the collection passed into them. The identity of each element should be independent of that order \u2014 even if a collection is reordered, each element should maintain the same ID. If you maintain a stable identity like that, then you should be able to reorder the collection no problem in response to user actions","title":"What is a good way to have a custom order of elements in a list so the user can change the order (using a stable ID)?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-animate-a-view-moving-from-one-place-in-hierarchy-to-another-like-when-a-view-changes-parents","text":"Yes! You should check out the matchedGeometryEffect() API, which was introduced last year: https://developer.apple.com/documentation/swiftui/view/matchedgeometryeffect(id:in:properties:anchor:issource:)","title":"Is there a way to animate a View moving from one place in hierarchy to another? Like when a View changes parents?"},{"location":"wwdc21/SwiftUI.html#fun-question-on-conditions-we-need-to-put-them-at-least-in-group-if-whatever-else-so-is-it-preferable-to-use-viewbuilder-commands-to-create-it-like-viewbuilderbuildblockpageinfo-nil-viewbuilderbuildeitherfirst-emptyview-viewbuilderbuildeithersecond-renderpage","text":"Awful to read, but is it better? Using a Group is preferred in this case.","title":"Fun question on conditions: We need to put them at least in Group { if whatever { ... } else { ... } }. So ... is it preferable to use ViewBuilder commands to create it, like             ViewBuilder.buildBlock(pageInfo == nil ? ViewBuilder.buildEither(first: EmptyView()) : ViewBuilder.buildEither(second: renderPage) )"},{"location":"wwdc21/SwiftUI.html#the-dependency-graph-can-it-have-loops-or-is-it-acyclic","text":"Graph cycles are not allowed and will trap at runtime.","title":"The Dependency Graph \u2014 can it have loops, or is it acyclic?"},{"location":"wwdc21/SwiftUI.html#i-have-a-class-store-observableobject-that-holds-the-whole-app-state-it-lives-as-stateobject-in-the-root-of-the-app-lifecycle-and-passed-via-environment-to-all-views-view-send-actions-to-the-store-and-update-as-soon-as-stores-state-updated-it-allows-me-to-keep-the-app-consistent-could-you-please-mention-any-downsides-of-this-approach-from-your-prospective","text":"That approach makes every view in your app dependent on a single Observable object. Any change to a Published property forces every view that references the environment object to be updated. I think this might cover your question too. -by \"forces every view that references the environment object to be updated\" you mean that view produces new body to diff with old body? That view produces a new body. SwiftUI doesn\u2019t diff views. It regenerates views when dependencies change.","title":"I have a class Store: ObservableObject that holds the whole app state. It lives as @StateObject in the root of the App lifecycle and passed via environment to all views. View send actions to the store and update as soon as store's state updated. It allows me to keep the app consistent. Could you please mention any downsides of this approach from your prospective?"},{"location":"wwdc21/SwiftUI.html#is-there-any-difference-between-the-persistence-of-state-vs-stateobject-vs-observedobject-when-identity-changes","text":"Yes! ObservedObject does not have any lifetime implications\u2014 when you use that property wrapper, you are responsible for managing the lifetime yourself. The object can live anywhere\u2014 either in StateObject or possibly even in another data structure in your app.","title":"is there any difference between the persistence of @State vs @StateObject vs @ObservedObject when identity changes?"},{"location":"wwdc21/SwiftUI.html#should-state-and-stateobject-be-usually-defined-as-private","text":"Yes! It's often helpful to make them private to indicate that the state is for this view and its descendants. Thank you! It was a great talk!","title":"Should @State and @StateObject be usually defined as private?"},{"location":"wwdc21/SwiftUI.html#if-the-only-reasonable-property-for-establishing-stable-identity-in-a-model-from-say-an-existing-json-api-is-a-string-that-might-be-quite-long-maybe-its-more-of-a-description-than-a-name-is-that-large-id-enough-of-a-potential-performance-problem-that-we-should-consider-modifying-the-modelapi-to-add-a-more-compact-id-thanks-much","text":"Great question! As with any performance problem, it's best to measure first before over-optimizing. Long strings can often be expensive, so it might make sense to optimize the identifier, but I'd recommend measuring first.","title":"If the only reasonable property for establishing stable identity in a model from, say, an existing JSON API, is a string that might be quite long (maybe it's more of a description than a name), is that large ID enough of a potential performance problem that we should consider modifying the model/API to add a more compact ID? Thanks much!"},{"location":"wwdc21/SwiftUI.html#i-have-created-a-viewmodifier-that-adds-a-custom-modal-overlay-on-top-of-a-view-somewhat-similar-to-a-sheet-is-there-a-way-to-pass-a-view-as-parameter-of-this-viewmodifier-initializer-without-resorting-to-anyview-i-want-to-be-able-to-pass-the-view-that-will-be-the-actual-content-of-the-overlay","text":"You can do this by making your custom ViewModifiergeneric on the content, something like: struct MyModifier : ViewModifier { ... } , then using a property with the generic like so: var content: C","title":"I have created a ViewModifier that adds a custom modal \u201coverlay\u201d on top of a view, somewhat similar to a sheet. Is there a way to pass a View as parameter of this ViewModifier initializer, without resorting to AnyView? I want to be able to pass the view that will be the actual \u201ccontent\u201d of the overlay."},{"location":"wwdc21/SwiftUI.html#from-the-dependency-graph-part-of-demystifying-swiftui","text":"The video mentioned that both views, two views that are dependent on the same dependency, would need to generate a new body. Which view would need to generate a new body first if one view is the child of the other? The parent view will generate its body first, and recursively travers all the child views.","title":"From the dependency graph part of \"Demystifying SwiftUI\":"},{"location":"wwdc21/SwiftUI.html#is-the-computed-uuid-not-stable-because-we-cannot-predict-the-position-of-the-value-therefore-where-it-will-be-placed-in-the-view","text":"Yes","title":"Is the computed UUID not stable because we cannot predict the position of the value, therefore where it will be placed in the view?"},{"location":"wwdc21/SwiftUI.html#do-situations-exist-when-the-developers-really-need-to-use-anyview-and-there-are-totally-no-alternatives-using-swift-constructs","text":"Lot\u2019s of questions about when it is okay or not to use AnyView! If you can avoid AnyView, we recommend that. For example, use @ViewBuilder or pass view values around using generics instead of using AnyView. However, we offer AnyView as API because we understand that there are some situations where no other solution is possible, or comes with other important tradeoffs. One rule of thumb: AnyView can be okay if used in situations where the wrapped view will rarely or never change. But using AnyView to switch back and forth between different values can cause performance issues, since SwiftUI has to do extra work to manage that.","title":"Do situations exist when the developers really need to use AnyView and there are totally no alternatives using Swift constructs?"},{"location":"wwdc21/SwiftUI.html#do-you-have-any-suggestions-for-why-imageappicon-would-fail-to-work-when-imageuiimage-uiimagenamed-appicon-works-just-fine-is-that-intentional-behavior","text":"Is the image located in an asset catalog? Yes. It\u2019s the AppIcon in the asset catalog. (As in, the one used for the app icon on the home screen.) Please file a report through feedback assistant if you haven\u2019t already. If you have, can you post the number here? I\u2019d wonder whether the asset compiler is treating the app icon specially. We should fix it, but perhaps the app icon is being copied elsewhere in the bundle so the system can reach it.","title":"Do you have any suggestions for why Image(\"AppIcon\") would fail to work, when Image(uiImage: UIImage(named: \"AppIcon\")!) works just fine? Is that intentional behavior?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-debug-attributegraph-crashes-im-getting-attributegraph-precondition-failure-setting-value-during-update-696-probably-due-to-a-hosting-controller-somewhere-but-dont-know-how-to-track-it-down","text":"Thanks for the question! That error usual means that some code evaluated in body or updateUIViewController (or NS\u2026) is mutating state. We have a new debugging tool in the new SDK that might help narrow it down. Inside body if you write Self._printChanges() SwiftUI will log the name of the property that changed to cause the view to be redrawn. (Note the underscore. This isn\u2019t API, but is for exposed for debugging.)","title":"Is there a way to debug AttributeGraph crashes? I\u2019m getting AttributeGraph precondition failure: \"setting value during update\": 696., probably due to a hosting controller somewhere, but don\u2019t know how to track it down."},{"location":"wwdc21/SwiftUI.html#still-hoping-to-get-any-info-on-if-you-can-hide-the-tab-bar-when-using-tabview-and-pushing-items-onto-a-navigationview-like-you-can-in-uikit","text":"I do not believe there is a TabViewStyle that will allow this. However, please file a request using feedback assistant describing your use case. Thanks!","title":"Still hoping to get any info on if you can hide the tab bar when using TabView and pushing items onto a NavigationView like you can in UIKit."},{"location":"wwdc21/SwiftUI.html#ive-started-an-app-where-ive-got-3-screens-selected-by-tab-views-id-like-to-create-a-setting-to-default-to-one-of-the-screens-or-the-other-whats-an-efficient-way-to-do-that-maybe-a-lab-type-question","text":"You would use the selection Binding passed into the TabView initializer to decide which view will be selected by default. struct ContentView: View { @State var selectedTab = 1 var body: some View { TabView(selection: $selectedTab) { Text(\"First\") .tag(0) Text(\"Second\") .tag(1) Text(\"Third\") .tag(2) } } } That will have the view start with the 2nd tab selected","title":"I've started an app where I've got 3 screens - selected by tab views. I'd like to create a setting to default to one of the screens or the other. What's an efficient way to do that? Maybe a lab type question..."},{"location":"wwdc21/SwiftUI.html#any-way-to-control-when-the-scenestorage-gets-saved-many-are-in-my-root-app-view-and-they-only-seem-to-be-written-at-app-background-not-before","text":"I\u2019m sorry, but we don\u2019t provide API to control scene storage. The intent is that it\u2019s saved on backgrounding and restored on foreground/scene recreation.","title":"Any way to control when the @SceneStorage gets saved? Many are in my root app view, and they only seem to be written at app background, not before."},{"location":"wwdc21/SwiftUI.html#as-a-college-student-working-as-an-intern-at-apple-is-really-important-to-me-what-is-your-best-recommendation-for-individuals-considering-applying-for-an-internship-at-apple-whether-it-be-related-to-a-resume-project-types-or-otherwise","text":"It\u2019s great to hear you\u2019re interested in working at Apple! I joined as an intern so I can definitely relate to the craziness of applying, but it is absolutely worth doing. Interning at Apple is a really wonderful experience, and you really do some incredible work over the course of an internship! Getting hired at Apple means being very intentional about what you\u2019re looking for, and the best way to do that is to explore the jobs site for roles you think you can do, and applying specifically for that role. We have thousands of hiring managers and I don\u2019t know most of them, so my recommendation won\u2019t carry much weight, so I can\u2019t be of much help there. My best advice is to create a compelling cover letter and r\u00e9sum\u00e9 that expresses why you are right for this specific role, rather than applying for dozens of jobs at once. There\u2019s lots more information for you here as well: https://www.apple.com/careers/us/students.htm","title":"As a college student, working as an intern at Apple is really important to me. What is your best recommendation for individuals considering applying for an internship at Apple, whether it be related to a resume, project types, or otherwise?"},{"location":"wwdc21/SwiftUI.html#is-there-an-efficient-way-to-set-the-values-of-individual-pixels-in-a-view-in-swiftui-sorry-i-havent-fully-examined-the-new-canvas-api-yet-for-the-record-i-dont-really-know-how-to-do-this-in-uikit-either-other-than-writing-a-custom-fragment-shader-for-a-metal-view-thank-you","text":"Canvas is really the best bet here. You could fill a 1px x 1px rectangle of the color you want, and that would be the most efficient expression of that within SwiftUI itself. And to get the size of a pixel you would request the pixelLength from the environment of the GraphicsContent of the Canvas","title":"Is there an efficient way to set the values of individual pixels in a view in SwiftUI? Sorry I haven't fully examined the new Canvas API yet. For the record, I don't really know how to do this in UIKit either, other than writing a custom fragment shader for a Metal view. Thank you!"},{"location":"wwdc21/SwiftUI.html#when-to-iterate-a-collection-directly-from-listitems-items-in","text":"Code here vs. List { ForEach(items) { items in Code here... Fundamentally these should provide the same behavior, in almost all use cases this would be a stylistic choice over which to use. The former works great if you know you'll only ever have that single array of items in your list. The latter is where I generally start because its less things to change if I want to provide content from multiple sources into my list.","title":"When to iterate a collection directly from List(items) { items in"},{"location":"wwdc21/SwiftUI.html#will-texteditor-have-any-level-of-support-for-attributedstrings","text":"While we can\u2019t comment on any future plans, please do file a request through feedback assistant for any improvements to TextEditor that you would like to see!","title":"Will TextEditor have any level of support for AttributedStrings?"},{"location":"wwdc21/SwiftUI.html#is-it-possible-to-specify-paragraph-styles-attributedstrings-used-by-swiftui-text-views-i-dont-see-any-mention-of-paragraph-style-in-the-swiftui-attributescope-but-its-there-for-the-uikit-scope","text":"SwiftUI currently supports all of the attributes in the SwiftUI scope and some in the nested Foundation scope, the supported Foundation attributes are links and inlinePresentationIntent. So it\u2019s not possible to specify paragraph styles","title":"Is it possible to specify paragraph styles AttributedStrings used by SwiftUI Text views? I don't see any mention of paragraph style in the SwiftUI AttributeScope (but it's there for the UIKit scope)"},{"location":"wwdc21/SwiftUI.html#is-it-possible-to-place-a-calayer-inside-of-a-swiftui-view-without-using-a-uiviewrepresentable","text":"Not currently. UIViewRepresentable is the way to go if you want to expose custom layers inside of your SwiftUI content. If you have a specific use-case where this can't work, please do file a feedback request!","title":"Is it possible to place a CALayer inside of a SwiftUI view without using a UIViewRepresentable?"},{"location":"wwdc21/SwiftUI.html#how-do-i-get-a-swiftui-time-picker-to-change-to-5min-instead-of-1min-i-tried-to-find-that-but-so-far-i-havent-found-how-to-do-that","text":"Thanks for the question. Making sure I understand\u2026 Are you using a DatePicker and want the stepper increments to be 5 minutes instead of 1 minute? no actually a time picker, .datePickerStyle(WheelDatePickerStyle()) Ah, right. And that\u2019s applied to a view hierarchy containing a DatePicker then? Set to just show time components? Yes: aDatePicker(\u201cPlease enter a time\u201d, selection: $startTime, displayedComponents: .hourAndMinute) .labelsHidden() .datePickerStyle(WheelDatePickerStyle()) And after all that clarification, I\u2019m afraid the answer is that we don\u2019t provide customization for that currently.","title":"How do I get a SwiftUI time picker to change to 5min instead of 1min? I tried to find that but so far I haven't found how to do that..."},{"location":"wwdc21/SwiftUI.html#in-the-past-i-have-created-button-views-that-will-have-a-local-state-and-present-a-sheet-for-instance-i-might-have-a-button-whose-purpose-is-to-add-a-new-item-to-my-apps-data-this-was-super-convenient-because-i-could-add-such-a-button-in-any-context-without-needing-the-view-adding-the-button-to-know-about-that-functionality","text":"Running my App Store version of my app on iOS 15, those buttons no longer are working. (I haven't yet debugged the app; I'm simply noticing it across my iOS 15 devices.) Is this a sign that this is a pattern I shouldn't be using? Or should SwiftUI continue to support such patterns? Please file a report using feedback assistant and a sample project. Thanks!","title":"In the past, I have created Button views that will have a local state and present a sheet. For instance, I might have a Button whose purpose is to add a new item to my app's data. This was super convenient because I could add such a button in any context without needing the view adding the button to know about that functionality."},{"location":"wwdc21/SwiftUI.html#there-are-instances-when-buttons-in-swiftui-stop-responding-to-the-ipados-pointer-but-work-when-tapped-normally-is-this-an-expected-behavior","text":"Please file a report using feedback assistant and a sample project that reproduces this issue! I would not consider this expected","title":"There are instances when Buttons in SwiftUI stop responding to the iPadOS pointer, but work when tapped normally. Is this an expected behavior?"},{"location":"wwdc21/SwiftUI.html#is-it-possible-to-change-the-spacing-between-views-in-a-list-or-stack-view-as-the-list-scrolls-up-and-down-in-a-springlike-manner-ie-is-there-a-swiftui-equivalent-to-uikitdynamics","text":"Hi Andrew, we don\u2019t have any support for this in SwiftUI. Could you please file a feedback with the use case you are interested in? Thanks!","title":"Is it possible to change the spacing between views in a List (or stack view) as the list scrolls up and down in a springlike manner? (i.e. is there a SwiftUI equivalent to UIKitDynamics?)"},{"location":"wwdc21/SwiftUI.html#whats-the-recommended-practice-for-custom-sheet-presentations-swiftuis-sheet-only-supports-the-standard-card-style-modal-presentation-it-doesnt-have-the-flexibility-of-eg-uikits-transitioning-delegates-and-presentation-controllers-to-let-us-size-and-position-modally-presented-controllers","text":"Thanks for the question. For custom presentations, I\u2019ve had good luck putting the presentation content in an overlay, then using an offset modifier to shift it off screen. To bring it on screen, I use State to zero out the offset. If the state is updated inside withAnimation to transition is animated. That content won\u2019t be lazy then, right? It\u2019ll be computed in advance and off-screen. You could conditionalize the content too. An offscreen empty view would be essentially free. As would an offscreen view with opacity of 0. You might need to play with the transitions to get the appearance just right. And it\u2019s essentially free because the framework is smart enough to not bother rendering content that\u2019s invisible? Yep!","title":"What\u2019s the recommended practice for custom sheet presentations? SwiftUI\u2019s .sheet only supports the standard card-style modal presentation. It doesn\u2019t have the flexibility of e.g. UIKit\u2019s transitioning delegates and presentation controllers to let us size and position modally presented controllers."},{"location":"wwdc21/SwiftUI.html#this-isnt-a-technical-question-but-what-is-your-favorite-part-about-working-on-the-swiftui-team","text":"The people, both inside and outside of Apple, by a million miles! Everyone I\u2019ve worked with here at Apple is kind, empathetic, thoughtful, and incredibly passionate about the work we do. It requires lots of collaboration to pull all the work we do into one cohesive framework, so working with a great team is super important. Re. people outside of Apple, you all are the best community I could imagine. It\u2019s really wonderful getting your feedback, hearing from you at WWDC, seeing you at community events, etc. As Josh said, empowering you all to make amazing apps is really special.","title":"This isn't a technical question, but what is your favorite part about working on the SwiftUI Team?"},{"location":"wwdc21/SwiftUI.html#is-it-possible-to-prevent-a-button-inside-a-list-item-from-being-activated-when-the-list-row-is-selected-right-now-if-you-have-multiple-buttons-they-will-all-be-triggered-when-the-row-is-selected-so-cant-really-have-a-secondary-button-in-a-list-row","text":"Explicitly setting the buttonStyle of the nested buttons will stop the List from capturing the event.","title":"Is it possible to prevent a Button inside a List item from being activated when the list row is selected? Right now, if you have multiple Buttons they will all be triggered when the row is selected, so can't really have a secondary button in a list row."},{"location":"wwdc21/SwiftUI.html#what-is-the-recommended-way-to-open-a-view-in-a-new-window-in-swiftui-for-macos","text":"We don\u2019t have much API in this area at the moment - using a NavigationLink in a commands context will open a window with the destination view. Could you elaborate on your use case here? If not, that is ok, but I would definitely suggest filing a feedback with any info you can provide us.","title":"What is the recommended way to open a View in a new window in SwiftUI for macOS?"},{"location":"wwdc21/SwiftUI.html#how-would-someone-go-about-turning-a-list-cell-into-a-textfield-on-tap-such-as-to-edit-the-name-similar-to-the-reminders-app","text":"I\u2019d try putting a TextField in an overlay of your cell content with an opacity of 0 and disabled. Then use a tap gesture to switch the opacity and You could use the new FocusState or onSubmit when the user is done editing to switch back. What about the new selectable text modifier?? Would that work here? The trickiest bit will be getting your TextField and the regular Text to line up. You might need some custom padding for that. Take a look at the ScaledMetric property wrapper to make padding that adapts to dynamic text size. That\u2019s a great idea. It would work for selecting and copying the text, but not for editing it.","title":"How would someone go about turning a List cell into a TextField on tap, such as to edit the name (similar to the Reminders app)?"},{"location":"wwdc21/SwiftUI.html#theres-a-lot-of-sample-code-out-there-where-people-use-geometryreader-inside-of-clear-overlays-and-the-like-to-not-impact-layout-is-that-ok-seems-not-like-the-way-it-was-designed-to-work","text":"In general we'd consider that a bit of a misuse of the API. If you have specific use-cases where you're needing to do this we'd love to hear about it in a feedback report!","title":"There's a lot of sample code out there where people use GeometryReader inside of clear overlays and the like to not impact layout... is that \"ok\"? Seems not like the way it was designed to work."},{"location":"wwdc21/SwiftUI.html#this-is-kind-of-vague-but-i-know-hid-declares-that-a-second-button-below-a-sign-in-with-apple-button-cant-look-too-similar-as-to-distinguish-them-how-lenient-is-this-like-i-tried-to-replicate-the-sign-in-with-apple-button-for-a-sign-in-with-email-button-like-a-logo-next-to-it-with-an-envelope-instead-of-the-apple-logo-used-a-similar-but-not-sf-font-etc-but-im-afraid-this-would-constitute-as-being-too-similar-to-the-sign-in-with-apple-button-sorry-for-the-vague-question-and-let-me-know-if-this-is-more-suited-towards-a-lab","text":"We cannot provide that kind of guidance here; you are probably better off reaching out to App Store developer review labs for confirmation. I would also review the guidance provided here re: custom buttons: https://developer.apple.com/design/human-interface-guidelines/sign-in-with-apple/overview/buttons/","title":"This is kind of vague, but I know HID declares that a second button below a Sign in With Apple Button can't look too similar as to distinguish them. How lenient is this? Like I tried to \"replicate\" the sign in with apple button for a Sign in With Email Button (like a logo next to it with an envelope instead of the apple logo, used a similar but not SF font, etc), but I'm afraid this would constitute as being \"too similar to the Sign in With Apple Button\". Sorry for the vague question, and let me know if this is more suited towards a lab!"},{"location":"wwdc21/SwiftUI.html#what-is-the-layout-and-sizing-behavior-of-canvas","text":"A Canvas will consume the space offered to it. You can put it in a .frame to control the size if needed.","title":"What is the layout and sizing behavior of Canvas?"},{"location":"wwdc21/SwiftUI.html#is-there-a-new-swiftui-way-to-convert-a-view-into-an-image-or-pdf-currently-this-can-be-done-but-it-is-one-of-those-round-about-hacks-that-no-one-likes-using","text":"Unfortunately, there\u2019s no native SwiftUI api for this right now. As was mentioned elsewhere in the thread though and in your question though, it can be done by wrapping in a UIHostingController. Feel free to file a feedback requesting the feature though!","title":"Is there a new SwiftUI way to convert a view into an image or pdf?  Currently, this can be done, but it is one of those round about, hacks that no one likes using."},{"location":"wwdc21/SwiftUI.html#what-is-the-best-way-to-implement-keyboard-bindings-on-swiftui-for-macos","text":"I'm building a video player where I would like to forward and rewind with the left and right buttons. I've tried attaching keyboardShortcut(.leftArrow) on my button but it doesn't work? Is it the view I'm attaching it wrong (shall I attach it to my window root view maybe?) or is there some known bug around it? Thanks Attaching it to the button is the correct expression here - it sounds like you may be encountering a bug with this. Could you file a feedback with this issue?","title":"What is the best way to implement keyboard bindings on swiftUI, for macOS?"},{"location":"wwdc21/SwiftUI.html#with-sign-in-with-apple-is-it-a-requirement-to-use-a-nonce-ive-seen-conflicting-information-some-stating-that-if-its-done-externally-through-something-like-firebase-then-a-nonce-is-required-but-if-its-done-using-signinwithapplebutton-then-no-nonce-is-required-whats-the-verdict-on-this","text":"As this does not appear to be related to SwiftUI, I recommend scheduling an appointment at one of the Apple Pay labs","title":"With Sign in With Apple, is it a requirement to use a nonce? I've seen conflicting information, some stating that if it's done externally (through something like firebase), then a nonce is required, but if it's done using SignInWithAppleButton then no nonce is required. What's the verdict on this?"},{"location":"wwdc21/SwiftUI.html#is-there-a-modifier-to-control-how-links-in-attributedstring-are-handled","text":"Specifically, I'd like to be able to handle some links in-app, rather than booting the user out to Safari Currently the links will be handled by using the default OpenURLAction from the environment, it\u2019s not possible to override it at the moment. You could however use a custom url scheme that will open the url in your app, for example myapp://","title":"Is there a modifier to control how links in AttributedString are handled?"},{"location":"wwdc21/SwiftUI.html#lets-say-i-have-a-purely-swiftui-flow-i-have-a-listview-with-a-stateobject-var-listfetcher-that-makes-requests-for-a-list-of-items-tapping-on-an-item-in-the-list-navigates-to-a-detailview-which-has-an-observableobject-property-detailfetcher-that-makes-requests-for-details-on-the-item","text":"What\u2019s the best way to structure DetailView and which property wrapper would we use for detailFetcher in DetailView? 1. Have an initializer like init(itemID: Int) , and use @StateObject ? This would require us to eventually update the detailFetcher property with something like detailFetcher.itemID = itemID in the body\u2019s onAppear 2. Pass in the detailFetcher into the initializer like init(detailFetcher: ObservableObject) and make the property @ObservableObject? If this is preferred, where would this detailFetcher live if not in SwiftUI? In general, use @StateObject when the view in question owns the associated object, i.e. the object will be created when the view is created, and should be destroyed when the view is removed. In contrast, use @ObservedObject when the view needs to reference an object that is owned by another view or something else. So the view is dependent on the object, but their lifetimes are not tied together. For example, you could have a main screen that uses @StateObject to initialize your app\u2019s model, and then pass that object off to detail screens using @ObservedObject. Also check out the \u201cDemystify SwiftUI\u201d talk tomorrow to learn more about this!","title":"Let\u2019s say I have a purely SwiftUI flow. I have a ListView with a @StateObject var listFetcher, that makes requests for a list of items. Tapping on an item in the list navigates to a DetailView, which has an ObservableObject property detailFetcher, that makes requests for details on the item."},{"location":"wwdc21/SwiftUI.html#with-the-new-markdown-support-for-text-are-you-able-to-control-what-specific-markdown-elements-look-like-for-example-can-we-specify-that-bold-is-supposed-to-display-as-demi-bold-rather-than-bold-or-what-the-font-font-size-or-font-weight-of-an-h1-header-should-be-in-general-how-much-flexibility-do-we-have-in-styling-the-markdown","text":"At the moment, it\u2019s not possible to control the default styling in Markdown for SwiftUI. It would be great if you could file a feedback as a feature request/suggestion. Another thing to note, SwiftUI only supports inline styles, paragraph styling such as headers (H1 for example) is not supported.","title":"With the new Markdown support for Text, are you able to control what specific Markdown elements look like?  For example, can we specify that bold is supposed to display as Demi-bold rather than bold?  Or what the font, font size, or font weight of an H1 header should be?  In general, how much flexibility do we have in styling the markdown?"},{"location":"wwdc21/SwiftUI.html#does-swiftui-support-device-rotation-animations-when-i-rotate-from-portrait-to-landscape-my-app-just-changes-without-an-animation","text":"Please file a report using feedback assistant and a sample project!","title":"Does SwiftUI support device rotation animations? When I rotate from portrait to landscape, my app just changes without an animation."},{"location":"wwdc21/SwiftUI.html#is-there-a-suggested-way-or-best-practice-to-show-a-uidocumentpickerviewcontroller-in-a-swiftui-sheet-without-triggering-an-attempt-to-present-on-which-is-already-presenting","text":"You should check out the .fileImporter modifier if you haven\u2019t already: https://developer.apple.com/documentation/swiftui/form/fileimporter(ispresented:allowedcontenttypes:allowsmultipleselection:oncompletion:) If you are encountering a specific issue that you think may be a bug, please file a Feedback report!","title":"Is there a suggested way or best practice to show a UIDocumentPickerViewController in a SwiftUI sheet without triggering an \"Attempt to present  on  which is already presenting ?"},{"location":"wwdc21/SwiftUI.html#i-saw-in-the-whats-new-with-swiftui-that-textfields-will-now-have-onsubmit-for-when-the-return-key-is-pressed-for-software-and-hardware-keyboards-does-this-mean-that-oncommit-will-be-depreciated-or-does-onsubmit-serve-a-different-function","text":"The initializers with .onCommit are soft deprecated. So no warnings in Xcode, but we\u2019re encouraging new code to use .onSubmit.","title":"I saw in the \"What's new with SwiftUI\" that TextFields will now have .onSubmit for when the return key is pressed for software and hardware keyboards. Does this mean that .onCommit will be depreciated or does .onSubmit serve a different function?"},{"location":"wwdc21/SwiftUI.html#are-current-changes-set-in-stone-and-the-feature-release-plan-for-swiftui-has-been-wrapped-up-for-ios15-or-we-could-expect-more-functionalities-along-the-way-until-the-official-release","text":"We cannot comment on future plans. However, please file feedback for any issues you find and they will be triaged appropriately! Note that \u201cissues\u201d here refers to both what is traditionally considered \u201cbugs\u201d as well as an feature requests or enhancements both for existing API as well as API that is newly introduced this year","title":"Are current changes \u2018set in stone\u2019 and the feature release plan for SwiftUI has been wrapped up for iOS15 or we could expect more functionalities along the way until the official release?"},{"location":"wwdc21/SwiftUI.html#if-were-using-sign-in-with-apple-and-have-some-text-that-says-sign-in-with-apple-apple-logo-here-from-sf-symbols-on-a-screen-that-comes-after-sign-in-with-apple-where-we-ask-for-some-additional-information-specifically-just-the-birthday-of-the-user-is-that-an-hid-violation-its-only-used-to-reference-sign-in-with-apple-so-im-not-sure-if-that-would-violate-the-rules-or-not","text":"Just to clarify, your view has static \u201cSign in with Apple\u201d text after the button has been tapped/clicked on another screen? Well so this is how it is - There\u2019s a login screen - it either lets you sign in with apple, sign in with email/password, or create an account. If they pick sign in with apple, and this is the first time they go through the process, then it prompts them with the hide my email/name sheet. Then after that, again if it\u2019s their first time, there\u2019s a screen they go to that asks for their birthday, and it says : Sign in with Apple [apple logo] with a subtitle stating that some additional info is required (paraphrased since it\u2019s a little bit of lengthy text), and then a date picker for their birthday. That Sign in With Apple [apple logo] is sort of replicating what\u2019s on the Sign in with Email screen which similarly says Sign in with Email [envelope icon]. My guess is that it would not be allowed since it is giving users the impression that the birthday is part of the Sign In With Apple process, but that is not the case. I think it\u2019s okay to show the birthday step following the sign in process, but as for showing \u201cSign In with Apple \uf8ff\u201d after that, I do not think it is allowed. My recommendation would be to remove this text entirely and instead have something like \u201cFinish setting up your account\u201d As indeed this does not have anything to do with signing in with Apple","title":"If we're using Sign in With Apple and have some text that says \"Sign in with Apple [apple logo here from SF Symbols]\" on a screen that comes after sign in with apple where we ask for some additional information (specifically just the birthday of the user), is that an HID violation? It's only used to reference Sign in With Apple, so I'm not sure if that would violate the rules or not"},{"location":"wwdc21/SwiftUI.html#are-navigationlinks-lazy-in-ios-15","text":"NavigationLinks do not fully resolve their destinations until they are triggered, though the value of the destination view is created when the NavigationLink is created. In general, we recommend avoiding as much work as possible when a view is initialized, which would avoid potential issues here. This is important for performance. Instead, have that work be triggered within the view\u2019s body, such as using onAppear or the new task() modifier. SwiftUI may reinitialize views for any number of reasons, and this is a normal part of the update process.","title":"Are NavigationLinks \"lazy\" in iOS 15?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-show-a-watchos-app-view-using-sample-data-in-an-ios-app-such-as-for-an-app-that-showcases-various-custom-complication-styles-i-understand-that-the-alternative-would-be-a-screenshot-but-i-thought-it-would-be-a-much-simpler-workflow-to-have-the-watchos-views-dynamically-generated-since-both-platforms-use-swiftui","text":"There is not, but please file feedback for the idea! Using screenshots is your best option as a workaround.","title":"Is there a way to show a watchOS app view using sample data in an iOS app, such as for an app that showcases various custom complication styles? I understand that the alternative would be a screenshot, but I thought it would be a much simpler workflow to have the watchOS views dynamically generated since both platforms use SwiftUI."},{"location":"wwdc21/SwiftUI.html#on-watchos-im-using-oncontinueuseractivitynsuseractivitytypebrowsingweb-and-onopenurl-however-these-only-receive-callbacks-once-the-app-is-already-open-is-it-possible-to-use-these-in-a-way-that-they-receive-the-callback-from-a-cold-launch","text":"Those should function appropriately on cold launch. Please file a feedback with a sample showing where it isn't working if possible. What\u2019s the easiest way to setup the site association file for the example? That is an excellent question. Just the general shape of the application and where it's wired in will go a long way, even if the entire association isn't hooked up.","title":"On watchOS, I'm using .onContinueUserActivity(NSUserActivityTypeBrowsingWeb) and .onOpenURL, however these only receive callbacks once the app is already open. Is it possible to use these in a way that they receive the callback from a cold launch?"},{"location":"wwdc21/SwiftUI.html#what-is-the-recommended-way-to-account-for-a-navigationview-title-that-may-take-up-multiple-lines-i-tried-setting-linelimit-to-nil-but-i-am-not-getting-the-results-that-i-want-for-instance-i-have-xyz-club-executive-meeting-for-the-navigationbartitle-text-but-it-only-shows-xyz-club-execut","text":"Take a look at the toolbar modifier and the .principal placement. If that doesn\u2019t meet your needs, please file a Feedback so we can look into your use case.","title":"What is the recommended way to account for a NavigationView title that may take up multiple lines? I tried setting .lineLimit to nil, but I am not getting the results that I want. For instance, I have \"XYZ Club Executive Meeting\" for the navigationBarTitle text, but it only shows \"XYZ Club Execut...\""},{"location":"wwdc21/SwiftUI.html#the-whats-new-in-foundation-session-demos-localizing-content-in-a-swiftui-app-caffe-is-this-demo-app-available-as-sample-code-it-doesnt-appear-to-be-listed-on-the-sample-code-page","text":"It is not available. But thanks for the suggestion, we\u2019ll consider that!","title":"The \"What's new in Foundation\" session demos localizing content in a SwiftUI app, \"Caffe\". Is this demo app available as sample code? It doesn't appear to be listed on the sample code page."},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-hide-a-default-green-scroll-indicator-on-watchos-when-using-digitalcrownrotation-modifier","text":"There is not, but please file feedback! I'm also curious why you would want hide the indicator? I believe it does hide if you use make it \"continuous\"","title":"Is there a way to hide a default green scroll indicator on watchOS when using digitalCrownRotation modifier?"},{"location":"wwdc21/SwiftUI.html#what-would-be-the-recommended-way-to-handle-complex-navigations-in-a-100-swiftui-project-in-all-my-past-uikit-project-the-coordinator-pattern-was-really-powerful-for-that-but-its-quite-tricky-to-have-it-ported-to-swiftui-thanks","text":"It\u2019s difficult to make a specific recommendation for a complex app. Every app is so different. This is definitely a great question to request a lab appointment for. Then we can understand your use case and make some suggestions, and maybe even look at some code together.","title":"what would be the recommended way to handle complex navigations in a 100% SwiftUI project, in all my past UIKit project the coordinator pattern was really powerful for that but it's quite tricky to have it ported to swiftui. thanks"},{"location":"wwdc21/SwiftUI.html#is-there-a-limit-to-where-sfsymbols-change-size-i-put-them-as-items-in-a-tabview-but-it-doesnt-seem-like-they-are-scaling-with-dynamic-text","text":"TabViews do have a standard symbol size across all apps and how far they scale Does that mean they don\u2019t scale as much as other places? Right, other elements could end up scaling more, which is expected. Ah thanks - As a UI element I sort of wanted it to scale more. Is there a better way to do that. I\u2019d rather not leave SF Symbols If you have a more custom UI element where you want that scaling, you could build that! Especially with the new .bar material, you could still get a similar material background behind that custom bottom bar Ooo - I\u2019ll have to read up about that. Is there a talk with more in depth discussion of material? Today\u2019s rich graphics session is the one you\u2019re looking for https://developer.apple.com/videos/play/wwdc2021/10021/","title":"Is there a limit to where SFSymbols change size? I put them as items in a TabView but it doesn\u2019t seem like they are scaling with dynamic text \u2026"},{"location":"wwdc21/SwiftUI.html#not-entirely-swiftui-exclusive-question-but-worth-a-try","text":"Xcode 13 release notes list as \"known issue\": \"Swift Concurrency requires a deployment target of macOS 12, iOS 15, tvOS 15, and watchOS 8 or newer. (70738378) This suggests that concurrency might be backwards deployed? This seems too good to be true because I'd would need runtime support, but perhaps you guys can shed some light on this? For now you should assume that Swift concurrency cannot be back-deployed, however the team understands that this is a popular request and is investigating. The fun part is that Swift is open source, and so you can visit https://forums.swift.org to peek in on the active development process for Swift concurrency, and they will likely discuss this topic more there as well.","title":"Not entirely SwiftUI exclusive question, but worth a try:"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-change-the-background-colour-of-a-list-last-year-this-wasnt-possible","text":"Currently it\u2019s only possible to change background color of list rows, not the List itself. Thanks @Natalia (Apple) , is this intended, or something that might change in the future? If so, what is the best way to change the background colour currently? I\u2019d like to use system materials specifically Unfortunately, it\u2019s not possible to use system materials with List at the moment, please file a feedback and we will take a look at it. In the mean time, you could try using a ScrollView instead of a List.","title":"Is there a way to change the background colour of a list? Last year this wasn\u2019t possible"},{"location":"wwdc21/SwiftUI.html#refreshable-doesnt-work-with-scroll-view-is-it-a-bug-or-desired-behaviour","text":"Currently refreshable only supports List. Please file a feedback request if you have other use-cases you\u2019d like to see supported.","title":"Refreshable doesn\u2019t work with scroll view. Is it a bug or desired behaviour?"},{"location":"wwdc21/SwiftUI.html#how-would-one-go-about-adding-the-searchable-modifier-to-a-pdfview","text":"On iOS, the searchable modifier works with a navigation view to render its search field. On macOS, it works with a navigation view or the root view of your scene. If you combine a PDFView with a navigation view, things should hopefully work as you expect. If not, please do file a feedback with some more details on what you would like to achieve.","title":"How would one go about adding the .searchable modifier to a PDFView?"},{"location":"wwdc21/SwiftUI.html#is-searchable-for-local-data-only-or-can-it-be-used-to-query-services","text":"Searchable specifies that the view supports search. You can implement that search however works best for your app. For example, you could kick off a query using the bound search term, then update the results when your query completes.","title":"Is .searchable for local data only, or can it be used to query services?"},{"location":"wwdc21/SwiftUI.html#are-you-able-to-programmatically-change-focus-of-text-fields-natively-in-swiftui-this-year-for-example-having-the-a-button-at-the-bottom-of-the-keyboard-say-next-and-focus-into-the-next-text-field","text":"Posting this back here in case anyone present does have a moment to answer, but if not, there\u2019s a focus and accessibility specific office hours later this week. If we\u2019re not able to get to this during this block, definitely check back then! Indeed, I would take a look at the new FocusState APIs! https://developer.apple.com/documentation/swiftui/focusstate/","title":"Are you able to programmatically change focus of text fields natively in SwiftUI this year? For example, having the a button at the bottom of the keyboard say \u201cnext\u201d and focus into the next text field?"},{"location":"wwdc21/SwiftUI.html#is-there-an-equivalent-api-similar-to-uisheetpresentationcontroller-for-swiftui","text":"Sorry. There is not a SwiftUI equivalent at this time. Is that something that would be useful to file feedback for? Certainly! Especially if you have a specific use case around when you need it or whether you need variable height. Thanks!","title":"Is there an equivalent API similar to UISheetPresentationController for SwiftUI?"},{"location":"wwdc21/SwiftUI.html#hi-intro-im-a-hobbyist-who-is-getting-better-an-programming-mostly-because-swiftui-is-so-productive","text":"Can you talk about ways to have existing SwiftUI code inherit the newer features so I could support both iOS 14 and 15 with one codebase? Most new features do not back-deploy to earlier OS versions. You can use e.g. if #available(iOS 15, *) { to check for whether a feature can be used. That said, some functionality is able to back-deploy. For example, the new ability to pass bindings to collections into List and ForEach, and get back a binding to each element, e.g. ForEach($elements) { $element in ... is able to back-deploy to any earlier release supported by SwiftUI. I thought Matt said that - So the new feature can actually work in older code? Correct","title":"Hi!  intro? I\u2019m a hobbyist who is getting better an programming mostly because SwiftUI is so productive!"},{"location":"wwdc21/SwiftUI.html#can-importsfromdevices-ie-continuity-camera-work-as-a-source-for-asyncimage","text":"No, continuity camera will callback your importsItemProviders with an item provider that will give the full image data and not a URL. But if you have a use case where there could be some better integration between the two, please file a feedback","title":"Can .importsFromDevices (i.e. continuity camera) work as a source for AsyncImage?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-animate-text-font-size-changes-currently-in-ios14-a-view-can-smoothly-animate-between-two-sizes-or-colored-backgrounds-but-fonts-will-just-jump-from-the-before-animation-size-to-the-after-size-with-no-interpolation-in-between","text":"This would be a great feedback to file, so that we can investigate! If you\u2019re interested in a workaround, the Fruta sample code project has an AnimatableFontModifier that uses an explicit font size as its animatable data. This is used for the ingredient cards in the main smoothie detail view. This works for Fruta because the use-case is limited and the text using this modifier is for primarily for graphical purposes. https://developer.apple.com/documentation/swiftui/fruta_building_a_feature-rich_app_with_swiftui","title":"Is there a way to animate text font size changes? Currently in iOS14 a view can smoothly animate between two sizes or colored backgrounds, but fonts will just jump from the before animation size to the after size with no interpolation in between."},{"location":"wwdc21/SwiftUI.html#will-xcode-13-run-on-big-sur-113","text":"Xcode 13 requires macOS 11.3 or later. You can find the full release notes here: https://developer.apple.com/documentation/xcode-release-notes/xcode-13-beta-release-notes","title":"Will Xcode 13 run on Big Sur 11.3"},{"location":"wwdc21/SwiftUI.html#does-asyncimage-support-caching-and-will-there-be-an-api-to-customize-that-cache","text":"AsyncImage uses the shared URLSession , and so uses the shared URLCache. There\u2019s currently no support for customizing the cache. If that\u2019s something you\u2019d like support for though, feel free to file feedback with that request","title":"Does AsyncImage support caching, and will there be an API to customize that cache?"},{"location":"wwdc21/SwiftUI.html#is-there-a-way-to-make-refreshable-work-with-lazyvgrid-or-do-we-have-to-adapt-list-as-a-grid-layout","text":"Refreshable is currently only supported by List.","title":"Is there a way to make refreshable work with LazyVGrid or do we have to adapt List as a Grid layout?"},{"location":"wwdc21/SwiftUI.html#with-a-document-based-app-using-a-documentgroup-scene-is-there-any-way-to-present-a-choice-of-templates-when-opening-the-app-without-an-open-document","text":"I\u2019m assuming you mean something similar to the theme chooser you get in Keynote or Pages? This is not something that we have an API for at the moment, but we\u2019d love a feedback for this functionality.","title":"With a document-based app using a DocumentGroup scene, is there any way to present a choice of templates when opening the app without an open document?"},{"location":"wwdc21/SwiftUI.html#any-prospects-for-attributedstring-support-in-texteditor","text":"While we can\u2019t comment on any future plans, please do log a request through the feedback assistant that this is a desired feature so that we can gauge developer interest!","title":"Any prospects for AttributedString support in TextEditor?"},{"location":"wwdc21/SwiftUI.html#what-is-the-proper-way-to-dismiss-a-fullscreencover-when-it-is-being-presented-based-off-an-item-setting-the-item-to-nil-or-dismissing-using-the-presentationmode","text":"That really depends on what is doing the dismissing. They both have the same effect in setting the item binding back to nil. It is more about where you are driving the dismissal state from. If you're dismissing from within the sheet's content, then using the presentation mode will be more flexible because that will work no matter what is controlling the presentation. There is also a new environment property introduced this year that can accomplish this as well, which is dismiss. https://developer.apple.com/documentation/swiftui/environmentvalues/dismiss/","title":"What is the proper way to dismiss a .fullscreenCover when it is being presented based off an item: setting the item to nil or dismissing using the presentationMode?"},{"location":"wwdc21/SwiftUI.html#is-the-refreshable-property-the-only-swiftui-property-that-supports-async-code","text":"The task modifier also provides support for async code out of the box! Generally, we only make user provided closures async if we can provide some additional utility to you by doing so, such as canceling a task when the attached view\u2019s lifetime ends, or finishing the refresh animation. If you want to dispatch to async code in other places, you can use an async block!","title":"is the refreshable property the only SwiftUI property that supports async code?"},{"location":"wwdc21/SwiftUI.html#wednesday","text":"","title":"\ud83d\uddd3 Wednesday"},{"location":"wwdc21/SwiftUI.html#using-environmentissearching-how-would-multiple-navigation-bar-in-an-app-work","text":"The isSearching environment property is tied to the searchable modifier that sets it up. If you have the following: NavigationView { ContentView() DetailView() } .searchable(text: $text) Then you could query the isSearching property inside of ContentView or DetailView. If you have the following: NavigationView { ContentView() DetailView() .searchable(text: $text) } Then you could only query it inside of DetailView. Similarly, if you have the following: NavigationView { ContentView() MiddleView() .searchable(text: $text) DetailView() .searchable(text: $text) } Then you could query isSearching in either MiddleView or DetailView and the property would relate to the enclosing searchable modifier.","title":"Using @Environment(\\.isSearching), how would multiple navigation bar in an app work?"},{"location":"wwdc21/SwiftUI.html#with-the-goal-to-bring-deeper-adoption-of-swiftui-this-year-should-we-implement-more-swiftui-code-instead-of-improve-catalyst-apps","text":"This really depends on your particular app and use case. It would be a great question to take to the labs!","title":"With the goal to bring deeper adoption of SwiftUI this year, should we implement more SwiftUI code instead of improve catalyst apps ?"},{"location":"wwdc21/SwiftUI.html#does-using-more-sf-symbols-have-an-impact-on-total-app-size-or-they-all-are-stored-in-the-os","text":"These are part of the OS, so you can feel free to go wild with all the symbols you want with no impact to app size","title":"Does using more SF Symbols have an impact on total app size? Or they all are stored in the OS?"},{"location":"wwdc21/SwiftUI.html#when-using-the-watchkit-way-to-get-text-input-do-we-still-get-the-text-input-improvements-from-swiftui-eg-remembering-the-user-choice-of-scribble-vs-voice-input","text":"If don't pass any suggestions to the WatchKit API, then yes, you get all of the new behavior.","title":"When using the WatchKit way to get text input, do we still get the text input improvements from SwiftUI? E.g. remembering the user choice of scribble vs. voice input"},{"location":"wwdc21/SwiftUI.html#does-the-modifier-of-importitemproviders-work-with-other-commands-or-other-stuff-to-import-things-in-the-app","text":"It works with any macOS system service that vends data. So if you had a service or shortcut that didn\u2019t take input, but produced output \u2014 your app\u2019s importItemProviders could consume that data when the user invokes that service","title":"does the modifier of importItemProviders work with other commands, or other stuff to import things in the app ?"},{"location":"wwdc21/SwiftUI.html#the-new-detents-for-sheets-in-uikit-to-allow-them-to-sit-at-different-heights-looks-amazing-unfortunately-there-doesnt-seem-to-be-an-equivalent-in-swiftui-is-there-any-plan-to-bring-it-across","text":"This is something we know folks would appreciate. Enhancement request Feedback with particularly use case would really help us. We\u2019re particularly interested in use cases around variable heights in SwiftUI sheets.","title":"The new detents for sheets in UIKit, to allow them to sit at different heights, looks amazing! Unfortunately there doesn't seem to be an equivalent in SwiftUI \u2013 is there any plan to bring it across?"},{"location":"wwdc21/SwiftUI.html#can-the-new-refreshable-api-be-used-with-custom-refresh-controls-spinners","text":"Take a look at the EnvironmentValues.refresh property. The refreshable modifier sets this property up with closure provided to the modifier. You can query this property ( @Environment(.refresh) private var refresh ) to hook up to your own UI","title":"Can the new .refreshable API be used with custom refresh controls / spinners?"},{"location":"wwdc21/SwiftUI.html#can-we-use-the-new-buttons-with-non-sf-single-color-graphics","text":"Yep, in fact the new buttons can have a label of any view, including shapes and more! The one thing to be careful of with custom images is that they use template rendering if you want the standard foreground styling within the button. (otherwise they\u2019ll be the exact color of the image\u2019s pixels)","title":"Can we use the new buttons with non-SF single-color graphics?"},{"location":"wwdc21/SwiftUI.html#can-we-customize-and-put-searchable-search-box-anywhere-without-going-the-old-way-adding-text-views","text":"The searchable modifier supports a few customization points with the SearchFieldPlacement type. You can pass a placement into the modifier: .searchable(text: $text, placement: .navigationBarDrawer(displayMode: .always)).","title":"Can we customize and put \"searchable\" search box anywhere? (Without going the old way, adding text views)"},{"location":"wwdc21/SwiftUI.html#how-do-we-assign-a-textfield-in-swiftui-to-gain-focus-as-soon-as-a-view-opens","text":"You can use the new @FocusState property wrapper and focused() modifier to programmatically control focus in many different ways, including when your UI first appears. For example, you could trigger a specific view to be focused using onAppear or any other event callback.","title":"How do we assign a TextField in SwiftUI to gain focus as soon as a View opens?"},{"location":"wwdc21/SwiftUI.html#how-to-force-sf-symbols-not-to-be-automatically-filledunfilled-based-on-the-context-as-shown-in-tab-bars-is-there-any-way-to-force-them-to-be-non-filled","text":"You can use .symbolVariant(.fill) to opt in a view or view hierarchy to fill variants, and see the SymbolVariants type for other variants you can use with it.","title":"How to force SF Symbols not to be automatically filled/unfilled based on the context (as shown in tab bars)? Is there any way to force them to be non-filled?"},{"location":"wwdc21/SwiftUI.html#is-there-a-swiftui-equivalent-for-preferredstatusbarstyle-in-ios-15","text":"I\u2019m afraid there is no new API for that at this time. That would be a great enhancement Feedback to help us gauge interest. If you\u2019ve already filed it, thank you! We know it\u2019s something folks want.","title":"Is there a SwiftUI equivalent for preferredStatusBarStyle in iOS 15?"},{"location":"wwdc21/a11y.html","text":"Accessibility Lounge QAs by paul \ud83d\uddd3 Tuesday As a relatively new iOS developer, what should I keep in mind for developing more accessible apps? This is a great question! For starters, I\u2019d familiarize myself with Voice Over. Spend some time with it and get an idea of how to use it. Once you do, you\u2019ll start to get a feel for what would work well with it. If you\u2019re into SwiftUI, you\u2019ll find that the accessibility modifiers are simple tools that can do a ton of work. Likewise, UIKit offers the same functionality with UIAccessibility. I encourage you to dig into some of the documentation to see what you can find. My recommendation for new iOS devs is to stick as much as possible to native components as they're accessible out of the box. You may start running into problems when developing custom components and I would do that only if necessary, and as Adrian says, if you are familiar with UIAccessibility and the SwiftUI accessibility modifiers available. What are some of the best practices of testing for accessibility? That depends on what part of accessibility you want to test, I guess. Personally I (and my team) test Voice Over and swipe navigation on a physical device with VO turned on, the screen turned black (triple tap with three fingers) and head phones on (so my peers won\u2019t beat me up) Dynamic font sizes and responsive layout I test inside the simulator changing accessibility settings in Xcode. But there is so much more to accessibility than this. Having a clean, straightforward design and using default views, controls and so on will do the heavy lifting for you in most situations. A crucial part is to find people that rely on accessibility features and get them to test your app for you. Creating a test group that is diverse is key here. It can be hard to get those especially for independent developers, I guess. So the least you can do is to give them the ability to send you feedback on your app\u2019s accessibility and make this way of giving feedback as accessible as possible. Hi, I have some questions about voiceover: Voiceover read all of the contents in table view cell. I found the only way to turn it off is to set the accessibility label to empty string for the cell. Is there any other way? How to prevent voiceover keep reading the contents in fast updating view? Are you trying to exclude only specific contents from your table cell? One option might be to make the cell itself an accessibility element so that it doesn\u2019t expose its children, and then override accessibilityLabel on the cell. Then any controls within the cell you can expose via accessibilityCustomActions . https://developer.apple.com/documentation/objectivec/nsobject/1615150-accessibilitycustomactions You can probably use the updatesFrequently trait for this: https://developer.apple.com/documentation/uikit/uiaccessibility/uiaccessibilitytraits/1620187-updatesfrequently We also have a WWDC talk on \u201cTailor the VoiceOver experience in your data-rich apps\u201d this Friday! https://developer.apple.com/videos/play/wwdc2021/10121/ Hey guys! This is my first WWDC! I am a developer with a disability called Cerebral Palsy. I use a joystick and the on screen keyboard on my iMac to code! I also have a iPad Pro that I work with my nose. Who should I connect with at Apple about making the iPad experience even better for people like me. :heart: Adrian (Apple) 4 days ago Hey Josh! While people often use the Feedback Assistant for bugs, it\u2019s also a great tool for suggesting features and improvements. If you\u2019ve got something in mind, we\u2019d love to hear about it. Simply file feedback :slightly_smiling_face: Hello! Some slightly in the weeds questions, but things I've never quite figured out :) Why do all NSObjects implement accessibility features such as accessibilityLabel etc, rather than just starting with UIView ? Why is accessibilityIdentifier part of UIAccessibility ? I understand its purpose is for identifying the view for UI Testing, but I'm unclear on the accessibility connection. Is this used on Mac for tools like automator or for 3rd party assistive tech? Is there any use for this on iOS other than UI testing? Why is there no textField accessibility trait? I suspect the answer to this is obvious :) axLabel and friends can be used on many kinds of objects. UIView , CALayers , NSStrings (in the case of UISegments , SpriteKit nodes and many more) Almost all automation relies on the accessibility runtime system to provide its information. When no axIdentifier is present, it falls back to axLabel. So that is the connection at least. Whats the best practice for using UIAccessibility.post(notification: .announcement, argument: \"Announcement\") for informing VoiceOver users of status updates. eg form validation errors, toasts etc? Is there a way we can guarantee the utterance will be announced in full without VO interrupting it when changing focus? Someone \ud83d\ude00 wrote a library that kinda does what I want here, but I wondered if there was something that was preferred? I don't find UIAccessibilitySpeechAttributeQueueAnnouncement to be that reliable There is also this: https://developer.apple.com/documentation/uikit/uiaccessibilityspeechattributequeueannouncement/ So I believe that is all there currently is, i.e. listening for UIAccessibilityAnnouncementDidFinishNotification or trying UIAccessibilitySpeechAttributeQueueAnnouncement . Is there a way to make status update announcements with VoiceOver in SwiftUI, similar to UIAccessibility.post(notification: .announcement, argument: \"Announcement\") in UIKit? Hi there :wave: I\u2019m an indie dev (not from Apple). But I recently added an extension to my Views in SwiftUI that receives a message and post it with UIAccessibility.post(notification: .announcement, argument: message) if UIAccessibility.isVoiceOverRunning , and it works like a charm. I hope this helps! Aside from avoiding the work, doing the announcement notification is essentially a no-op is VoiceOver isn't running When using accessibilityFrame I would expect the frame to be discoverable by touch if the frame is larger than the view, but it appears that the view is only discoverable by touch when the visual frame of the view is explored, is this expected? If so is there a way to get a view to absorb explore by touch from an area larger than its bounds? You would probably need to override the axFrame for the upper views. Otherwise when the touch event goes down the view chain, it will get clipped out by a parent that is \"too small\". I'm currently working on some new interactions for my iOS app, and some of the solutions I'm exploring rely in swipe interactions. From an accessibility point of view, I wondered if that's ok or it's better to explore other alternatives. And if I need that kind of interaction, what's the best way to handle them with VoiceOver in SwiftUI. Thanks! Voice Over includes a ton of support for swiping, but if you want to make your own actions, I\u2019d suggest taking a look at https://developer.apple.com/documentation/uikit/uiaccessibilitycustomaction Swipe actions are great candidates to get folded into Accessibility Custom Actions \u2014 custom actions for VoiceOver, Switch Control and more! Here\u2019s a great talk on them: https://developer.apple.com/videos/play/wwdc2019/250/ In our app running iOS 14.x, we used UISegmentedControl . I've noticed that when scaling for bigger dynamic font the UISegmentedControl stays the same size and doesn't reflect the accessibility font trait. The same happens in iOS 14.x app \"Phone\" - \"Last calls\" tab. Because of that I had to build own UIControl that would mimic the UISegmentedControl . Here's the question, since the minimal tappable size according to Human Interface Guidelines should be 44x44 pt and the mentioned UISegmentControl doesn't scale more than 32pt on height, isn't this an accessibility issue? Is there a solution that I maybe missing? :) One of the ideas was to keep the mimic size if our custom like UISegmentControl UIControl and the provide some hacking with larger tappable areas, but I don't like it. If you long-press the UISegmentedControl, a larger version of the segments will appear under the segments that also indicates which segment is selected and you can use that to move between segments. You can see more info at https://developer.apple.com/videos/play/wwdc2019/261/ and https://developer.apple.com/videos/play/wwdc2017/245/ What animation options can we have if user has enabled reduced motion? Fade in and fade out work well for this. This video has a great section on reduce motion: https://developer.apple.com/videos/play/wwdc2018/230/ In yesterday's keynote during the segment on new APIs, I noticed an API titled \"Virtual Game Controller\". Is this related to the new feature that allows game developers to put up onscreen controls in their games if no physical controller is paired? Please check out this awesome session by the Game Technologies team if you haven't already. The resources here will be super helpful, too! https://developer.apple.com/videos/play/wwdc2021/10081/ \ud83d\uddd3 Wednesday When coming to Haptics does iOS provide a way to check if users want haptics enabled? Thanks! Great question! When your app uses the Core Haptics Framework, iOS will handle the delivery of haptics based on the user\u2019s setting for System Haptics. You don\u2019t need to worry about accidentally breaking this setting. For devices that don\u2019t support Core Haptics, like iPads and iPods, you can check the device\u2019s capability and use that to make decisions about what kind of feedback to give to the user. var supportsHaptics: Bool = false ... // Check if the device supports haptics. let hapticCapability = CHHapticEngine.capabilitiesForHardware() supportsHaptics = hapticCapability.supportsHaptics Are there any any accessibility considerations to using haptics aside from the general usability guidelines set out in the HIG? eg, are there circumstances where we shouldn't be using them, should be using lighter haptics etc? Or perhaps are there places where you would recommend haptics are essential as part of an accessible app? VoiceOver actually implements an entire set of its own haptics that work system-wide so it may be the case that an app\u2019s haptics could conflict with VoiceOver and cause confusion for a user. One idea might be to offer the ability to turn your app haptics off if VoiceOver users find the combined experience to be overwhelming The new material backgrounds look stunning, but I'm concerned about the accessibility of the thinner options. Does the system do anything to remedy this when 'reduce transparency' or 'increase contrast' is enabled, or should we be proceeding with caution? In general this is a case where reduce transparency should replace the material with a solid color. Using system components ensures that these settings will get applied at the right time. What behavioural changes happen in VoiceOver or other assistive tech with the .tabBar accessibility trait? This lets VoiceOver notify users they are currently navigating a tab bar. for example it might say \u201cMovies, tab 1 of 5\u201d What behavioural changes happen in VoiceOver or other assistive tech with the .keyboardKey accessibility trait? This may control what input/typing rotors are presented by VoiceOver. Also, it may affect what sound effects VoiceOver plays when the key is activated. Normally VoiceOver plays its activate sound when an element is activated but keys often play their own sound the the activate sound is not necessary. What are the behavioural differences between the .playsSound and .startsMediaSession traits? Should they be used together? Or perhaps never together? PlaysSound will ensure VoiceOver doesn't play its own sounds when an item is \u201cactivated.\u201d Example is a keyboard key that plays its own click sound when pressed StartsMediaSession will make VoiceOver not output any speech or sound after an item is activated. Good for a play button in an audio app where you don't want VO to interrupt the content What approaches do you think that could be used to improve the accessibility for apps with highly customised UI? And I mean specifically apps that have highly variable and even parametric UI, such as TouchOSC (not the developer). I understand that in general the most efficient approach is to extract meaning from the views hierarchy and find an alternative way to translate it for the user to understand. For example rendering it using speech in VoiceOver instead of using pixels in the screen. But these kind of apps essentially are interactive dashboards with controls that may not hold a hierarchical relationship. And I'm wondering if it would make sense to think of the whole app UI as a canvas. And try to provide haptic feedback based on the borders and shapes of the controls, so that the users that are not able to see the screen can still explore the canvas and learn the position of the controls using their fingertips. Do you know of any apps that use a similar approach? How else do you think we could make these apps accessible? One thing to consider is that directly touching-to-explore is not the only way to use VoiceOver. Some users perform the discrete gestures like swipe to navigate by element. Other users pair a Braille display and do not touch the screen at all. Seems like with accessibilityRepresentation we have to rebuild our UI again with views that can handle default accessibility. Is this correct? Ex: Custom List, I have to rebuild with a regular list? We have made LazyVStack accessible, and you should not use accessibilityRepresentation { List ... } . Its ideal for custom controls, like your custom button if you do not use Button Is there a list available of UI elements that are best served with accessibilityRepresentation because they don\u2019t translate well accessibility-wise? The ideal use case is controls made with shapes and other views that are not accessible by default. Gotcha, so as I understand it, it's mainly for shapes and custom views? Essentially an easy way to add accessibility for when it doesn't come \u201cfree\u201d? Yes. You wouldn't need to use it on something like Button, because we make it accessible by default. But for custom controls, one would often need the \"right\" value, label, traits and actions. So accessibilityRepresentation can give users the same experience as standard controls, regardless of how you choose to design the control Or in cases like the SymbolButtonStyle I demoed. Checkout the sample project for more interesting use cases Will accessiblityRepresentation override any accessibility I had on the view it's being placed on? Or are those accessibiltyLabel s getting merged somehow? It will override. It will replace the accessibility of all views at the point it is called. accessibilityChildren { ... }.accessibilityElement(children: .combine) can be used to add a child and then merge its properties Some of my more complex windows cannot have a preview. Are these values accessible if I dump the graph to Xcode in debug sessions? Or what would be a rule of thumb to actually make sure everything is properly accessible by looking at code only? If I look at a piece of code, without having any other means to know whether this is accessibility enabled or not, what few modifiers would you add up to any given element to make sure the application is properly accessible, at least for the minimum (other than testing in Voiceover for example) There is no substitute to testing in VoiceOver. That's what we do, for example, in our Accessibility Design labs with third party developers. The AX Inspector is a powerful tool for rapidly iterating, but for determining \"is my app really accessible\", the best way to do that is to use VoiceOver, especially with a screen curtain on (so you can't see what's on screen). If you can use your app that way, you have done a great job. My biggest hurdle right now is striking the balance between too much and two little Voice Overs and descriptive elements. I feel like the rotor will be a game changer for discoverability. Have you considered accessibilityCustomContent? its ideal for when you want to add many descriptions to the same element, but do not want each spoken together I want to get the VO on what you select, but once you selected it, I need to add up \u201cselected the upper right text zone\u201d and probably \u201ccontaining your text \\whattheuserwrote)\u201d If you are trying to model a selected state, dont include selected in the label. Instead, use accessibilityAddTraits(.isSelected) . For example: accessibilityAddTraits(isSelected ? .isSelected : []) In this year of automatic UX testing, have automation started being shown up in accessibility? I feel like multiple representations, children and alternate ways be a nightmare of maintainability under the premises of great features. We have made quite a few changes to improve the information returned for SwiftUI accessibility elements for automation. Is that what you are asking? Automated testing in particular. You should see much more show up in automation now, including elements that were combined to make a new element and hidden elements. Elements should also have the right automation type. Hello! What are best practices around an accessibility label being different to the content on screen. For example, an equation such as 'xyz / x', would 'x times y times z, divide by x' be a good accessibility label? Or would 'xyz divide by x' better? My concern is the accessibility label being too different to the original string, especially when the equations get a little more complicated and I would need to add many commas to an accessibility label to make the operations clear. It\u2019s fine to have Accessibility labels that differ a bit from what is on-screen. The best way to determine what is a good AX label is by trying the app with something like VoiceOver, and getting a sense of what it is like to use it that way. For example, a label might be too long, which might make it difficult to navigate the app. Or it might be not specific enough or clear, where it doesn\u2019t convey enough information to the user. (edited) We have a WWDC Session from an earlier year that talks about accessibility labels specifically and how to write them. https://developer.apple.com/videos/play/wwdc2019/254/ It is not a question! But I want to say thank you to the whole SwiftUI Accessibility team for the great work you have done. These new APIs so easy to use to achieve great UX. Thank you! We are hoping that as some of these things like Rotors, synthetic elements, and AX Focus are brought into SwiftUI, and are easier to achieve, that will lead to more apps with exceptional and high quality VoiceOver experiences! I forgot to mention Accessibility Preview! It is so easy to monitor AX during development without need to run accessibility inspector. What are the best practices around accessibility and displaying progress or loading states to users? For example if there is a HUD indicate a loading state, should developer implement special handling for voiceover users by announcing the loading state is still occurring? The best practice here would be to make sure your indicator has an appropriate accessibility label, like \"Loading\" or \"Downloading\". If you know the progress of the loading state, you could add an accessibility value like \"45%\" and include the .updatesFrequently trait. Is this a blocking loading state? Can the user interact with your app while this is happening meaningfully? Originally, I was thinking of a blocking loading state. But I guess it's applicable to also non-blocking state. So if a state is non-blocking, and the loading indicator is not interactive, it might make sense just to use an announcement. I believe that is what pull to refresh does. You let the user know they are refreshing, but you don\u2019t need to interrupt their VoiceOver focus, etc. However, if the loading state is blocking, and certainly if it might be interactive such as allow a cancel action, it would probably make sense to have the VoiceOver user land on the indicator. Terence, you can use accessibilityRepresentation { ProgressView(...) } as a starting point to make a custom progress view accessible. If it works in your app, you can also make a custom ProgressViewStyle and use that for your ProgressView. Then you dont need accessibilityRepresentation since you are using ProgressView directly. Is there a string for accessibilityValue or accessibilityLabel that is interrupted as Silence? Context: I use accessibilityIncrement() and accessibilityDecrement() to control media. But these function always end up calling accessibilityValue, interrupting media playback. I can't use \" \" (space), or punctuation. I used \" \" 2 spaces which is voiced as drum banging. Add the startsMediaSession trait to the element with accessibilityAddTraits so that VoiceOver knows not to interrupt the audio. Tried that. It doesn\u2019t work: it appears that startsMediaSession does not apply to accessibilityIncrement() and accessibilityDecrement(). startsMediaSession only applies when you activate an object (not necessarily for incrementing) if you just return nil for axValue is that not what you want? If I return nil, it\u2019ll read accessibilityLabel and try to speak that. Is there a string that is interpreted as silence? when you adjust (swipe up or down) it reads the label again? \" \" should be intrepreted as silence Is there a UIKit equivalent to accessibilityRepresentation or is it SwiftUI only? Either way this is an awesome idea thank you for building it! Sorry there isn't an equivalent in UIKit. We welcome any feedback if thats something you would be interested in! Well you can achieve this similarly by overriding accessibilityElements What are you trying to do with it? There is usually a way to achieve the same with UIKit, but those ways might differ depending on what you would be using accessibilityRepresentation for. Didnt have a specific case in mind but we pretty notoriously re-write native UI components for various designs. In the event we can subclass it all works great, but if theyre really custom it might be nice to get the native UI accessibility behavior \"for free\" Ah I see. Yes in that case pretty much anything should be achieve-able with UIKit AX API, but it might require a couple more lines of code and might be a little differently abstracted, i.e. you might want to add an action + a value + a label, for example. But yes, simplifying that is a part of why accessibilityRepresentation was created. If I have a custom, complex view that doesn't look like a button but I want to add functionality when tapped, I may just add a tap gesture recognizer to it. Is there an accessible alternative so a VoiceOver user can know the view is tappable? Usually VoiceOver users expect that buttons are tappable. So add the isButton trait. Is this complex view a singular control? Yep it is! So I could just add the isButton trait to the base view then? Yes. You may want to consider creating a custom ButtonStyle. This has a few benefits, 1) you get all the AX stuff we do for Button for free, and 2) all the other SwiftUI defaults for Button work, like keyboard shortcuts Is there a native-SwiftUI way to add an attributed label or hint? I asked a question on SO here: https://stackoverflow.com/q/66863764/14351818, but ended up using UIViewRepresentable. SwiftUI Text can contain attributes. Although there is no way to add those specific attributes, yet. There are also new swiftUI modifiers for accessibility related text stuff, like zspeechAdjustedPitch`. SwiftUI now supports attributed values and labels based on how the Text is marked up automatically, like font, color, etc Should we expect to change our limiting .sizeCategory based on the watch screen size (38mm vs 44mm)? It seems like on the 38mm it would need a much lower limit before for going vertical. That's definitely one approach! If possible stick with a smaller number of cases here though, and if your UI allows, do try to wrap the content in a way that allows the content size to grow without needing to adjust the layout at all Just a quick question. I have a free watchOS complication called Roughly; it's on the App Store now. It tells the approximate time in words, in many languages, but I'm not a good programmer! It would be great to see this rolled into watchOS properly by Apple; some people who suffer from dyscalculia use this to tell time without reading numbers. Supporting many more languages is a tricky problem too, as different countries tell time in very different ways. Also, I've got a minor issue with VoiceOver. Although the one-line complications are read out correctly when tapped, the three-line complication is not \u2014 only the first line (e.g. \"It's about\" instead of \"It's about ten to three\") is read out. Any ideas why that might be? Thanks in advance, and please keep up the great work on Accessibility. Thanks for the idea! This sounds like a bug. Do you have a code snippet of the complication type you're using so we can confirm we can check the same thing? The one that has issues is .modularLarge swift case .modularLarge: > let template = CLKComplicationTemplateModularLargeStandardBody() I\u2019m just using the standard template and populating all three lines: swift template.headerTextProvider = CLKSimpleTextProvider(text: theItsAbout, shortText: theItsAbout) > template.body1TextProvider = CLKSimpleTextProvider(text: thisFirstLine, shortText: thisFirstLine) > template.body2TextProvider = CLKSimpleTextProvider(text: thisSecondLine, shortText: thisSecondLine) thanks! And just to be clear, only the headerTextProvider is being read out. k, writing up a radar now I don't remember the name of it but there is a new accessibilityModifier in SwiftUI that allows you to add a hierarchy of SwiftUI views and have VoiceOver look at those instead of the non accessibility Views. Are there any issues of syncing the non-accessibility views with the accessibility views during dynamic changes? I'm just curious about best practices. I think you are referring to accessibilityElement(children: ..) Im not sure I understand your question though. Are you referring to how it works with dynamic number of elements? Yes that\u2019s the one I\u2019m referring to. if I understand correctly accessibilityElement(children: ..) is replacing the view hierarchy in VoiceOver with whatever you input as the children, correct? If so, could there be issues if the view hierarchy inside of accessibilityElement(children: ..) doesn\u2019t match the hierarchy of SwiftUI views for your sighted users? zaccessibilityElement(children: )z creates or updates an accessibility elements visibility. Such as, accessibilityElement(children: .contain) would wrap children in an new accessibility container element. Are you perhaps mixing up accessibilityChildren , which allows you to pass in views as children? No I guess I was misunderstanding the purpose of .accessibilityElement(children: ..) I guess the purpose of it is to add accessibilityChildren if the view doesn\u2019t already have children (like in the example of that custom Canvas View)? Yes accessibilityChildren is used to add \"synthetic\" children, which are not directly visible (though could be positioned to match whats drawn in Canvas). accessibilityElement(children: ) transforms the exiting accessibility tree, to make a new container or combine child properties into a new element Is it possible to use accessibilityChildren in the use case of replacing the children in the accessibility tree (if the children in the tree are problematic)? Yes it can be used anywhere. I go more into details in the Beyond the Basics talk: https://developer.apple.com/videos/play/wwdc2021/10119/ Attached to that talk is a sample project where we have some examples of accessibilityChildren How do you handle potential \u201cover verbosity\u201d when using VoiceOver. Sometimes if a table cell for instance has a great deal of content I can sometimes be unsure if I should err on the side of reading most of it (and the user potentially have a bunch of stuff read at them), or read less so they can quickly scan. Do you have any advice on how you manage this? Hey Christian! We have a session coming up this Friday called \u201cTailor the VoiceOver experience in your data-rich apps\u201d, and it will cover precisely this, so stay tuned! I\u2019d ask the presenter any questions you have afterward during that watch party. \ud83d\uddd3 Thursday When designing Accessibility Label/Value/Hint content, what considerations do we need to think about for refreshable braille displays? VoiceOver already abbreviates common UI words, like button to shorter forms. There's not too much API level control over what gets sent to the Braille display at this time I think in general, the same advice applies for spoken axLabels - which is try to be concise, but accurate. Don't be overly verbose, and front-load the important information I learned that apple created a people locator that helped blind people during the pandemic! https://support.apple.com/guide/iphone/people-detection-iph41bdfe6c7/ios Do you know of any good guides for learning how to use VoiceOver on macOS? Try this! It should get you started. https://support.apple.com/guide/iphone/turn-on-and-practice-voiceover-iph3e2e415f/ios When should we be using the link trait rather than the button trait? On web the general rule is that a link goes somewhere and a button does something, but this doesn't always match up in a native app. Should a text button be presented as a link? Should links only be links that are external to your app - say opening web pages in safari or making phone calls? Is it ok to have a button that opens a web link, or should this always be a link? If a control takes you out to a webpage usually we use link. If the control operates some function within the app we call it a button. I think we have usually avoided marking something as a button AND a link What's the recommendation when working with a long list of items in a table view and voice control. should we put the same label in the accessibilityUserInputLabels so the user will say it's name then automatically after the OS will shows the indices or is it better to expose instead the specific cell title for example ? thanks It would depend on your label and what\u2019s appropriate for it. Generally you should put the name the cell or the relevant content. But if the cell has a super long label, you might want to put something shorter in userInputLabels . Like if it\u2019s a travel app and the cell label is like \u201cNew York, a bustling city with tons of nightlife and famous attractions\u201d a good userInputLabel might be just \u201cNew York\u201d \u2014 this makes it easier to speak. Today\u2019s Voice Control Challenge will actually have some good tips on this topic. But if you have a screenshot I can take a more detailed look. Our app has over 20 different Font text styles. If we want to support dynamic type through UIFontMetrics, is there any way we can extend the 11 we get with UIFont.TextStyle ? Gold to hear your interest in fonts! We have a talk from WWDC17 that I think might help. Take a look: https://developer.apple.com/wwdc17/245 Check out Building Apps with Dynamic Type UIFontMetrics can also give you a scalar to scale a custom font appropriately based on the user\u2019s text size. How can I incorporate accessibility inspector (command line interface) into my CI pipeline to provide me insight into my current accessibility audit level? We are aware of this limitation, and unfortunately we do not have this functionality at the present time. Thank you for your feedback! I'm working on a UI for a tooltip on iOS 13+. It has some text and a close button. It's not modal, so you can still read content without dismissing it. Do you have any tips or examples for the best accessibility (specifically VoiceOver) experience for a component like this? I think the main question to answer is where in the list of elements should this be placed. Either at the beginning of everything, end of everything or inter-mixed. If this is for a specific component in the UI, i would try to put it in the UI element list after the component it references. This could be done by overriding accessibilityElements for a containerView that contains both of those views. What is Apple's recommended methods to using or creating numeric telephone specific keyboard? If you use our standard keyboard, and set the type to phonePad, then this should already be accessible. https://developer.apple.com/documentation/uikit/uikeyboardtype/phonepad If you\u2019re rolling your own, I\u2019d recommend keeping it as similar to the the stock on for VO, etc. as possible. You\u2019ll also want to use (on phone number text) UITextContentType of .TelephoneNumber And for SwiftUI: https://developer.apple.com/documentation/swiftui/menu/keyboardtype(_:) Also some related talks just for good measure! https://developer.apple.com/wwdc20/10115 https://developer.apple.com/wwdc17/242 Not totally related to the talk - but I tried using VoiceControl on my app that has DatePickers. I must be missing something because I find moving the picker to be impossible. It says \"swipe up or down with 1 finger to adjust the value\" but that doesn't work You can say \u201cIncrement \u201d or \u201cDecrement \u201d to increment and decrement date pickers The \u201cswipe up or down with 1 finger to adjust the value\u201d comes from VoiceOver. Are you using VoiceOver at the same time? Yes - I have voiceover turned on and I selected the element of the picker Ok got it. So a UIDatePicker should be accessible by default via and up/down swipe when the cursor is on it. (This is b/c it uses the .adjustable trait). Are you doing anything particularly custom with this item? Don\u2019t think so - I was trying to find another stock example - but when I\u2019m in VoiceOver I don\u2019t know how to get the control center. And it seems like the Things app removes the \u201c+ Add Reminder\u201d control when VoiceOver is on VO gestures (for Control Center, etc) are explained here: https://support.apple.com/guide/iphone/operate-iphone-using-voiceover-gestures-iph3e2e2329/ios OK - we can\u2019t do VoiceOver in the simulator can we? VoiceOver is only supported on device. I never knew about Tab-Z! During the talk I hit it and Slack gave me a summary of how to arrow around. And now it's gone - is it a one time thing, or am I doing something wrong? Tab + Z while Full Keyboard Access is running should bring up the Custom Actions for the currently selected element. Tab + H should bring up the help menu which shows you all your FKA commands! Tab + Z will not show anything if the currently selected element has no custom actions associated with it. Something like a \u201csend\u201d button may only have 1 operation and thus would likely not have custom actions, for example. Thank you for the fantastic talk! I was wondering if there are any special considerations we need to make with regards to Full Keyboard Access when the user has mirrored their iPad display to an external display for a larger view of their screen? Full Keyboard Access should work exactly the same when the screen is mirrored to another device! If you\u2019re doing a presentation and want the cursor to be larger or brighter, there are color and thickness settings in the Full Keyboard Access settings area! Hi! Can I ask for any advice on how to make sure a ML model is accessible for any user? You might say they inherently are, especially if they're performing sound recognition. However, it would be great to know which accessibility features can make sure they are as straightforward as possible to use, for everyone. Thank you! This will be a great question for the Accessibility + ML event happening in at 4PM! Both these videos talk about this topic, in terms of inclusion, https://developer.apple.com/wwdc21/10275 https://developer.apple.com/wwdc21/10304 It's all about making sure your data is collected and annotated in a way that honors the differences in us all Is Full Keyboard Access a good way for developers to test our apps' experience with Switch Control? Or is there a better way to do that without specialized hardware? You can test SC w/o specialized hardware by adding a Screen switch in the Switch Control menu - this allows you to tap anywhere on the screen to activate the switch. You can also use (new in iOS 15) Sound Actions to test w/o specialized hardware - just my making sounds like \u201cshh\u201d or \u201cpop\u201d \ud83d\uddd3 Friday One of my favorite features on Apple TV is the High-Contrast Focus Style. This feature adds an additional white border around focused cells. I've never been able to find an API to implement this for a custom collection view cell. A similar question was asked in the forums a few years ago and has more details: https://developer.apple.com/forums/thread/99313 Good point Christopher. We dont currently have public API for this setting but we should add it. Is the VoiceOver Image Description available on macOS or only iOS/iPadOS? It is available on both. It is on macOS as well! Once enabled in VoiceOver Utility, you can get a description by focusing on an element and pressing VO+Shift+L Do you know of any good examples of apps that support drawing via VoiceOver/Voice Control or Switch Control? Annotating using Switch Control/Voice Over would be an awesome feature to provide. Switch Control itself provide freehand drawing tools in the Switch Control menu. These allow SC-users to draw beautiful art, etc using Switch Control. I\u2019m trying to find the name of an App that\u2019s particularly popular with some of our SC users. Procreate is the app - you can see a video it in use here: https://www.youtube.com/watch?v=N034rhJJe8g What would be ideal experience from auto capture perspective and Voice Over? We have SDK where one of the entry point allows user to change between Auto Capture and Manual Capture. If person who needs accessibility starts screen with auto capture enabled, our logic announces detecting object and captures it. Sometimes its too fast and doesn't allow breathing room to let user understand what is happening. Any Suggestion? That's a great question. One idea might be to give more feedback about the capture before it happens. For example you could use the UIAcccessibilityPostNotification() function to make announcements about the orientation of what's going to be captured, or other feedback that might be useful if someone could not see the screen. Additionally there could be a small timer announcement of a second or two where if the user holds the phone steady for that time, only then does the capture occur. I believe Vision framework has API called image registration that would be useful in determining if the camera frames appear constant (i.e. little movement) What considerations should we give to accessibility when using a UIPageControl ? You should include the label: \"Page\", value: \"1 of 5\", traits: adjustable, button then implement accessibilityIncrement/Decrement and accessibilityActivate (which moves forward one page at a time) I had a question related to languages. I have a Dutch soccer app (with a lot of Dutch names and terms). We know that we have some users that use Voice over and have their system language set to English. Other then forcing the accessibility language to dutch, is there a better way to let the system and user know the app is in Dutch? Translating the entire app to English wouldn't help much because of all the dutch names and their pronunciations. I think in this case I would recommend using accessibilityLanguage property or the UIAccessibility or UIAccessibilitySpeechAttributeLanguage in the attributed string to mark up certain words in the right language Is AXCustomContent used in any Apple apps? Photos and Calendar (in the detail view) Does anyone have any advice or inspiring examples of a great accessibility experience for color swatches? Specifically I'm experimenting with the differentiate without color feature when choosing the color of shoes, clothing, and jewelry in our app. There\u2019s a fantastic talk from last year\u2019s WWDC on combining colors, symbols, and text together to make a really solid experience. Might not be 100% what you\u2019re going for, but it\u2019s definitely worth a look! I\u2019ll attach the link Can SwiftUI views support AXCustomContent? yes! hang on :slightly_smiling_face: details at the end of the video! This is excellent. It is absolutely relevant to my app, it's just the dogs are people. :) This gets at a challenge I have as a sighted developer. I use VoiceOver myself for some functional tasks, such as reading out content I'd rather hear than read myself. But it is hard to get to know the deeper layers of VoiceOver. One key third party app for teaching even the main VoiceOver gestures and interactions has been discontinued. What resources do you recommend for people to learn good interaction patterns for VoiceOver beyond the surface level? Check this out.. https://support.apple.com/guide/iphone/learn-voiceover-gestures-iph3e2e2281/ios This has been really helpful to understand how to move content rich material to the \"More Content\" section of the Rotor. Are there other features of the Rotor that likewise require explicit developer implementation like this? Checkout Accessibility Custom Rotors session from WWDC 2020 https://developer.apple.com/videos/play/wwdc2020/10116/ (edited) What has been the most challenging Apple app to work on for accessibility? Personally, I would say, non UIKit based apps, like PDFs and Photos app!","title":"A11y"},{"location":"wwdc21/a11y.html#accessibility-lounge-qas","text":"","title":"Accessibility Lounge QAs"},{"location":"wwdc21/a11y.html#by-paul","text":"","title":"by paul"},{"location":"wwdc21/a11y.html#tuesday","text":"","title":"\ud83d\uddd3 Tuesday"},{"location":"wwdc21/a11y.html#as-a-relatively-new-ios-developer-what-should-i-keep-in-mind-for-developing-more-accessible-apps","text":"This is a great question! For starters, I\u2019d familiarize myself with Voice Over. Spend some time with it and get an idea of how to use it. Once you do, you\u2019ll start to get a feel for what would work well with it. If you\u2019re into SwiftUI, you\u2019ll find that the accessibility modifiers are simple tools that can do a ton of work. Likewise, UIKit offers the same functionality with UIAccessibility. I encourage you to dig into some of the documentation to see what you can find. My recommendation for new iOS devs is to stick as much as possible to native components as they're accessible out of the box. You may start running into problems when developing custom components and I would do that only if necessary, and as Adrian says, if you are familiar with UIAccessibility and the SwiftUI accessibility modifiers available.","title":"As a relatively new iOS developer, what should I keep in mind for developing more accessible apps?"},{"location":"wwdc21/a11y.html#what-are-some-of-the-best-practices-of-testing-for-accessibility","text":"That depends on what part of accessibility you want to test, I guess. Personally I (and my team) test Voice Over and swipe navigation on a physical device with VO turned on, the screen turned black (triple tap with three fingers) and head phones on (so my peers won\u2019t beat me up) Dynamic font sizes and responsive layout I test inside the simulator changing accessibility settings in Xcode. But there is so much more to accessibility than this. Having a clean, straightforward design and using default views, controls and so on will do the heavy lifting for you in most situations. A crucial part is to find people that rely on accessibility features and get them to test your app for you. Creating a test group that is diverse is key here. It can be hard to get those especially for independent developers, I guess. So the least you can do is to give them the ability to send you feedback on your app\u2019s accessibility and make this way of giving feedback as accessible as possible.","title":"What are some of the best practices of testing for accessibility?"},{"location":"wwdc21/a11y.html#hi-i-have-some-questions-about-voiceover","text":"Voiceover read all of the contents in table view cell. I found the only way to turn it off is to set the accessibility label to empty string for the cell. Is there any other way? How to prevent voiceover keep reading the contents in fast updating view? Are you trying to exclude only specific contents from your table cell? One option might be to make the cell itself an accessibility element so that it doesn\u2019t expose its children, and then override accessibilityLabel on the cell. Then any controls within the cell you can expose via accessibilityCustomActions . https://developer.apple.com/documentation/objectivec/nsobject/1615150-accessibilitycustomactions You can probably use the updatesFrequently trait for this: https://developer.apple.com/documentation/uikit/uiaccessibility/uiaccessibilitytraits/1620187-updatesfrequently We also have a WWDC talk on \u201cTailor the VoiceOver experience in your data-rich apps\u201d this Friday! https://developer.apple.com/videos/play/wwdc2021/10121/","title":"Hi, I have some questions about voiceover:"},{"location":"wwdc21/a11y.html#hey-guys-this-is-my-first-wwdc-i-am-a-developer-with-a-disability-called-cerebral-palsy-i-use-a-joystick-and-the-on-screen-keyboard-on-my-imac-to-code-i-also-have-a-ipad-pro-that-i-work-with-my-nose-who-should-i-connect-with-at-apple-about-making-the-ipad-experience-even-better-for-people-like-me","text":":heart: Adrian (Apple) 4 days ago Hey Josh! While people often use the Feedback Assistant for bugs, it\u2019s also a great tool for suggesting features and improvements. If you\u2019ve got something in mind, we\u2019d love to hear about it. Simply file feedback :slightly_smiling_face:","title":"Hey guys! This is my first WWDC! I am a developer with a disability called Cerebral Palsy. I use a joystick and the on screen keyboard on my iMac to code! I also have a iPad Pro that I work with my nose. Who should I connect with at Apple about making the iPad experience even better for people like me."},{"location":"wwdc21/a11y.html#hello-some-slightly-in-the-weeds-questions-but-things-ive-never-quite-figured-out","text":"Why do all NSObjects implement accessibility features such as accessibilityLabel etc, rather than just starting with UIView ? Why is accessibilityIdentifier part of UIAccessibility ? I understand its purpose is for identifying the view for UI Testing, but I'm unclear on the accessibility connection. Is this used on Mac for tools like automator or for 3rd party assistive tech? Is there any use for this on iOS other than UI testing? Why is there no textField accessibility trait? I suspect the answer to this is obvious :) axLabel and friends can be used on many kinds of objects. UIView , CALayers , NSStrings (in the case of UISegments , SpriteKit nodes and many more) Almost all automation relies on the accessibility runtime system to provide its information. When no axIdentifier is present, it falls back to axLabel. So that is the connection at least.","title":"Hello! Some slightly in the weeds questions, but things I've never quite figured out :)"},{"location":"wwdc21/a11y.html#whats-the-best-practice-for-using-uiaccessibilitypostnotification-announcement-argument-announcement-for-informing-voiceover-users-of-status-updates-eg-form-validation-errors-toasts-etc-is-there-a-way-we-can-guarantee-the-utterance-will-be-announced-in-full-without-vo-interrupting-it-when-changing-focus","text":"Someone \ud83d\ude00 wrote a library that kinda does what I want here, but I wondered if there was something that was preferred? I don't find UIAccessibilitySpeechAttributeQueueAnnouncement to be that reliable There is also this: https://developer.apple.com/documentation/uikit/uiaccessibilityspeechattributequeueannouncement/ So I believe that is all there currently is, i.e. listening for UIAccessibilityAnnouncementDidFinishNotification or trying UIAccessibilitySpeechAttributeQueueAnnouncement .","title":"Whats the best practice for using UIAccessibility.post(notification: .announcement, argument: \"Announcement\") for informing VoiceOver users of status updates. eg form validation errors, toasts etc? Is there a way we can guarantee the utterance will be announced in full without VO interrupting it when changing focus?"},{"location":"wwdc21/a11y.html#is-there-a-way-to-make-status-update-announcements-with-voiceover-in-swiftui-similar-to-uiaccessibilitypostnotification-announcement-argument-announcement-in-uikit","text":"Hi there :wave: I\u2019m an indie dev (not from Apple). But I recently added an extension to my Views in SwiftUI that receives a message and post it with UIAccessibility.post(notification: .announcement, argument: message) if UIAccessibility.isVoiceOverRunning , and it works like a charm. I hope this helps! Aside from avoiding the work, doing the announcement notification is essentially a no-op is VoiceOver isn't running","title":"Is there a way to make status update announcements with VoiceOver in SwiftUI, similar to UIAccessibility.post(notification: .announcement, argument: \"Announcement\") in UIKit?"},{"location":"wwdc21/a11y.html#when-using-accessibilityframe-i-would-expect-the-frame-to-be-discoverable-by-touch-if-the-frame-is-larger-than-the-view-but-it-appears-that-the-view-is-only-discoverable-by-touch-when-the-visual-frame-of-the-view-is-explored-is-this-expected-if-so-is-there-a-way-to-get-a-view-to-absorb-explore-by-touch-from-an-area-larger-than-its-bounds","text":"You would probably need to override the axFrame for the upper views. Otherwise when the touch event goes down the view chain, it will get clipped out by a parent that is \"too small\".","title":"When using accessibilityFrame I would expect the frame to be discoverable by touch if the frame is larger than the view, but it appears that the view is only discoverable by touch when the visual frame of the view is explored, is this expected? If so is there a way to get a view to absorb explore by touch from an area larger than its bounds?"},{"location":"wwdc21/a11y.html#im-currently-working-on-some-new-interactions-for-my-ios-app-and-some-of-the-solutions-im-exploring-rely-in-swipe-interactions-from-an-accessibility-point-of-view-i-wondered-if-thats-ok-or-its-better-to-explore-other-alternatives-and-if-i-need-that-kind-of-interaction-whats-the-best-way-to-handle-them-with-voiceover-in-swiftui-thanks","text":"Voice Over includes a ton of support for swiping, but if you want to make your own actions, I\u2019d suggest taking a look at https://developer.apple.com/documentation/uikit/uiaccessibilitycustomaction Swipe actions are great candidates to get folded into Accessibility Custom Actions \u2014 custom actions for VoiceOver, Switch Control and more! Here\u2019s a great talk on them: https://developer.apple.com/videos/play/wwdc2019/250/","title":"I'm currently working on some new interactions for my iOS app, and some of the solutions I'm exploring rely in swipe interactions. From an accessibility point of view, I wondered if that's ok or it's better to explore other alternatives. And if I need that kind of interaction, what's the best way to handle them with VoiceOver in SwiftUI. Thanks!"},{"location":"wwdc21/a11y.html#in-our-app-running-ios-14x-we-used-uisegmentedcontrol-ive-noticed-that-when-scaling-for-bigger-dynamic-font-the-uisegmentedcontrol-stays-the-same-size-and-doesnt-reflect-the-accessibility-font-trait-the-same-happens-in-ios-14x-app-phone-last-calls-tab-because-of-that-i-had-to-build-own-uicontrol-that-would-mimic-the-uisegmentedcontrol-heres-the-question-since-the-minimal-tappable-size-according-to-human-interface-guidelines-should-be-44x44-pt-and-the-mentioned-uisegmentcontrol-doesnt-scale-more-than-32pt-on-height-isnt-this-an-accessibility-issue-is-there-a-solution-that-i-maybe-missing","text":"One of the ideas was to keep the mimic size if our custom like UISegmentControl UIControl and the provide some hacking with larger tappable areas, but I don't like it. If you long-press the UISegmentedControl, a larger version of the segments will appear under the segments that also indicates which segment is selected and you can use that to move between segments. You can see more info at https://developer.apple.com/videos/play/wwdc2019/261/ and https://developer.apple.com/videos/play/wwdc2017/245/","title":"In our app running iOS 14.x, we used UISegmentedControl. I've noticed that when scaling for bigger dynamic font the UISegmentedControl stays the same size and doesn't reflect the accessibility font trait. The same happens in iOS 14.x app \"Phone\" - \"Last calls\" tab. Because of that I had to build own UIControl that would mimic the UISegmentedControl. Here's the question, since the minimal tappable size according to Human Interface Guidelines should be 44x44 pt and the mentioned UISegmentControl doesn't scale more than 32pt on height, isn't this an accessibility issue? Is there a solution that I maybe missing? :)"},{"location":"wwdc21/a11y.html#what-animation-options-can-we-have-if-user-has-enabled-reduced-motion","text":"Fade in and fade out work well for this. This video has a great section on reduce motion: https://developer.apple.com/videos/play/wwdc2018/230/","title":"What animation options can we have if user has enabled reduced motion?"},{"location":"wwdc21/a11y.html#in-yesterdays-keynote-during-the-segment-on-new-apis-i-noticed-an-api-titled-virtual-game-controller-is-this-related-to-the-new-feature-that-allows-game-developers-to-put-up-onscreen-controls-in-their-games-if-no-physical-controller-is-paired","text":"Please check out this awesome session by the Game Technologies team if you haven't already. The resources here will be super helpful, too! https://developer.apple.com/videos/play/wwdc2021/10081/","title":"In yesterday's keynote during the segment on new APIs, I noticed an API titled \"Virtual Game Controller\". Is this related to the new feature that allows game developers to put up onscreen controls in their games if no physical controller is paired?"},{"location":"wwdc21/a11y.html#wednesday","text":"","title":"\ud83d\uddd3 Wednesday"},{"location":"wwdc21/a11y.html#when-coming-to-haptics-does-ios-provide-a-way-to-check-if-users-want-haptics-enabled-thanks","text":"Great question! When your app uses the Core Haptics Framework, iOS will handle the delivery of haptics based on the user\u2019s setting for System Haptics. You don\u2019t need to worry about accidentally breaking this setting. For devices that don\u2019t support Core Haptics, like iPads and iPods, you can check the device\u2019s capability and use that to make decisions about what kind of feedback to give to the user. var supportsHaptics: Bool = false ... // Check if the device supports haptics. let hapticCapability = CHHapticEngine.capabilitiesForHardware() supportsHaptics = hapticCapability.supportsHaptics","title":"When coming to Haptics does iOS provide a way to check if users want haptics enabled? Thanks!"},{"location":"wwdc21/a11y.html#are-there-any-any-accessibility-considerations-to-using-haptics-aside-from-the-general-usability-guidelines-set-out-in-the-hig-eg-are-there-circumstances-where-we-shouldnt-be-using-them-should-be-using-lighter-haptics-etc-or-perhaps-are-there-places-where-you-would-recommend-haptics-are-essential-as-part-of-an-accessible-app","text":"VoiceOver actually implements an entire set of its own haptics that work system-wide so it may be the case that an app\u2019s haptics could conflict with VoiceOver and cause confusion for a user. One idea might be to offer the ability to turn your app haptics off if VoiceOver users find the combined experience to be overwhelming","title":"Are there any any accessibility considerations to using haptics aside  from the general usability guidelines set out in the HIG? eg, are there circumstances where we shouldn't be using them, should be using lighter haptics etc? Or perhaps are there places where you would recommend haptics are essential as part of an accessible app?"},{"location":"wwdc21/a11y.html#the-new-material-backgrounds-look-stunning-but-im-concerned-about-the-accessibility-of-the-thinner-options-does-the-system-do-anything-to-remedy-this-when-reduce-transparency-or-increase-contrast-is-enabled-or-should-we-be-proceeding-with-caution","text":"In general this is a case where reduce transparency should replace the material with a solid color. Using system components ensures that these settings will get applied at the right time.","title":"The new material backgrounds look stunning, but I'm concerned about the accessibility of the thinner options. Does the system do anything to remedy this when 'reduce transparency' or 'increase contrast' is enabled, or should we be proceeding with caution?"},{"location":"wwdc21/a11y.html#what-behavioural-changes-happen-in-voiceover-or-other-assistive-tech-with-the-tabbar-accessibility-trait","text":"This lets VoiceOver notify users they are currently navigating a tab bar. for example it might say \u201cMovies, tab 1 of 5\u201d","title":"What behavioural changes happen in VoiceOver or other assistive tech with the .tabBar accessibility trait?"},{"location":"wwdc21/a11y.html#what-behavioural-changes-happen-in-voiceover-or-other-assistive-tech-with-the-keyboardkey-accessibility-trait","text":"This may control what input/typing rotors are presented by VoiceOver. Also, it may affect what sound effects VoiceOver plays when the key is activated. Normally VoiceOver plays its activate sound when an element is activated but keys often play their own sound the the activate sound is not necessary.","title":"What behavioural changes happen in VoiceOver or other assistive tech with the .keyboardKey accessibility trait?"},{"location":"wwdc21/a11y.html#what-are-the-behavioural-differences-between-the-playssound-and-startsmediasession-traits-should-they-be-used-together-or-perhaps-never-together","text":"PlaysSound will ensure VoiceOver doesn't play its own sounds when an item is \u201cactivated.\u201d Example is a keyboard key that plays its own click sound when pressed StartsMediaSession will make VoiceOver not output any speech or sound after an item is activated. Good for a play button in an audio app where you don't want VO to interrupt the content","title":"What are the behavioural differences between the .playsSound and .startsMediaSession traits? Should they be used together? Or perhaps never together?"},{"location":"wwdc21/a11y.html#what-approaches-do-you-think-that-could-be-used-to-improve-the-accessibility-for-apps-with-highly-customised-ui-and-i-mean-specifically-apps-that-have-highly-variable-and-even-parametric-ui-such-as-touchosc-not-the-developer","text":"I understand that in general the most efficient approach is to extract meaning from the views hierarchy and find an alternative way to translate it for the user to understand. For example rendering it using speech in VoiceOver instead of using pixels in the screen. But these kind of apps essentially are interactive dashboards with controls that may not hold a hierarchical relationship. And I'm wondering if it would make sense to think of the whole app UI as a canvas. And try to provide haptic feedback based on the borders and shapes of the controls, so that the users that are not able to see the screen can still explore the canvas and learn the position of the controls using their fingertips. Do you know of any apps that use a similar approach? How else do you think we could make these apps accessible? One thing to consider is that directly touching-to-explore is not the only way to use VoiceOver. Some users perform the discrete gestures like swipe to navigate by element. Other users pair a Braille display and do not touch the screen at all.","title":"What approaches do you think that could be used to improve the accessibility for apps with highly customised UI? And I mean specifically apps that have highly variable and even parametric UI, such as TouchOSC (not the developer)."},{"location":"wwdc21/a11y.html#seems-like-with-accessibilityrepresentation-we-have-to-rebuild-our-ui-again-with-views-that-can-handle-default-accessibility-is-this-correct-ex-custom-list-i-have-to-rebuild-with-a-regular-list","text":"We have made LazyVStack accessible, and you should not use accessibilityRepresentation { List ... } . Its ideal for custom controls, like your custom button if you do not use Button","title":"Seems like with accessibilityRepresentation we have to rebuild our UI again with views that can handle default accessibility. Is this correct? Ex: Custom List, I have to rebuild with a regular list?"},{"location":"wwdc21/a11y.html#is-there-a-list-available-of-ui-elements-that-are-best-served-with-accessibilityrepresentation-because-they-dont-translate-well-accessibility-wise","text":"The ideal use case is controls made with shapes and other views that are not accessible by default. Gotcha, so as I understand it, it's mainly for shapes and custom views? Essentially an easy way to add accessibility for when it doesn't come \u201cfree\u201d? Yes. You wouldn't need to use it on something like Button, because we make it accessible by default. But for custom controls, one would often need the \"right\" value, label, traits and actions. So accessibilityRepresentation can give users the same experience as standard controls, regardless of how you choose to design the control Or in cases like the SymbolButtonStyle I demoed. Checkout the sample project for more interesting use cases","title":"Is there a list available of UI elements that are best served with accessibilityRepresentation because they don\u2019t translate well accessibility-wise?"},{"location":"wwdc21/a11y.html#will-accessiblityrepresentation-override-any-accessibility-i-had-on-the-view-its-being-placed-on-or-are-those-accessibiltylabels-getting-merged-somehow","text":"It will override. It will replace the accessibility of all views at the point it is called. accessibilityChildren { ... }.accessibilityElement(children: .combine) can be used to add a child and then merge its properties","title":"Will accessiblityRepresentation override any accessibility I had on the view it's being placed on? Or are those accessibiltyLabels getting merged somehow?"},{"location":"wwdc21/a11y.html#some-of-my-more-complex-windows-cannot-have-a-preview-are-these-values-accessible-if-i-dump-the-graph-to-xcode-in-debug-sessions-or-what-would-be-a-rule-of-thumb-to-actually-make-sure-everything-is-properly-accessible-by-looking-at-code-only","text":"If I look at a piece of code, without having any other means to know whether this is accessibility enabled or not, what few modifiers would you add up to any given element to make sure the application is properly accessible, at least for the minimum (other than testing in Voiceover for example) There is no substitute to testing in VoiceOver. That's what we do, for example, in our Accessibility Design labs with third party developers. The AX Inspector is a powerful tool for rapidly iterating, but for determining \"is my app really accessible\", the best way to do that is to use VoiceOver, especially with a screen curtain on (so you can't see what's on screen). If you can use your app that way, you have done a great job. My biggest hurdle right now is striking the balance between too much and two little Voice Overs and descriptive elements. I feel like the rotor will be a game changer for discoverability. Have you considered accessibilityCustomContent? its ideal for when you want to add many descriptions to the same element, but do not want each spoken together I want to get the VO on what you select, but once you selected it, I need to add up \u201cselected the upper right text zone\u201d and probably \u201ccontaining your text \\whattheuserwrote)\u201d If you are trying to model a selected state, dont include selected in the label. Instead, use accessibilityAddTraits(.isSelected) . For example: accessibilityAddTraits(isSelected ? .isSelected : [])","title":"Some of my more complex windows cannot have a preview. Are these values accessible if I dump the graph to Xcode in debug sessions? Or what would be a rule of thumb to actually make sure everything is properly accessible by looking at code only?"},{"location":"wwdc21/a11y.html#in-this-year-of-automatic-ux-testing-have-automation-started-being-shown-up-in-accessibility-i-feel-like-multiple-representations-children-and-alternate-ways-be-a-nightmare-of-maintainability-under-the-premises-of-great-features","text":"We have made quite a few changes to improve the information returned for SwiftUI accessibility elements for automation. Is that what you are asking? Automated testing in particular. You should see much more show up in automation now, including elements that were combined to make a new element and hidden elements. Elements should also have the right automation type.","title":"In this year of automatic UX testing, have automation started being shown up in accessibility? I feel like multiple representations, children and alternate ways be a nightmare of maintainability under the premises of great features."},{"location":"wwdc21/a11y.html#hello-what-are-best-practices-around-an-accessibility-label-being-different-to-the-content-on-screen-for-example-an-equation-such-as-xyz-x-would-x-times-y-times-z-divide-by-x-be-a-good-accessibility-label-or-would-xyz-divide-by-x-better-my-concern-is-the-accessibility-label-being-too-different-to-the-original-string-especially-when-the-equations-get-a-little-more-complicated-and-i-would-need-to-add-many-commas-to-an-accessibility-label-to-make-the-operations-clear","text":"It\u2019s fine to have Accessibility labels that differ a bit from what is on-screen. The best way to determine what is a good AX label is by trying the app with something like VoiceOver, and getting a sense of what it is like to use it that way. For example, a label might be too long, which might make it difficult to navigate the app. Or it might be not specific enough or clear, where it doesn\u2019t convey enough information to the user. (edited) We have a WWDC Session from an earlier year that talks about accessibility labels specifically and how to write them. https://developer.apple.com/videos/play/wwdc2019/254/","title":"Hello! What are best practices around an accessibility label being different to the content on screen. For example, an equation such as 'xyz / x', would 'x times y times z, divide by x' be a good accessibility label? Or would 'xyz divide by x' better? My concern is the accessibility label being too different to the original string, especially when the equations get a little more complicated and I would need to add many commas to an accessibility label to make the operations clear."},{"location":"wwdc21/a11y.html#it-is-not-a-question-but-i-want-to-say-thank-you-to-the-whole-swiftui-accessibility-team-for-the-great-work-you-have-done-these-new-apis-so-easy-to-use-to-achieve-great-ux","text":"Thank you! We are hoping that as some of these things like Rotors, synthetic elements, and AX Focus are brought into SwiftUI, and are easier to achieve, that will lead to more apps with exceptional and high quality VoiceOver experiences! I forgot to mention Accessibility Preview! It is so easy to monitor AX during development without need to run accessibility inspector.","title":"It is not a question! But I want to say thank you to the whole SwiftUI Accessibility team for the great work you have done. These new APIs so easy to use to achieve great UX."},{"location":"wwdc21/a11y.html#what-are-the-best-practices-around-accessibility-and-displaying-progress-or-loading-states-to-users","text":"For example if there is a HUD indicate a loading state, should developer implement special handling for voiceover users by announcing the loading state is still occurring? The best practice here would be to make sure your indicator has an appropriate accessibility label, like \"Loading\" or \"Downloading\". If you know the progress of the loading state, you could add an accessibility value like \"45%\" and include the .updatesFrequently trait. Is this a blocking loading state? Can the user interact with your app while this is happening meaningfully? Originally, I was thinking of a blocking loading state. But I guess it's applicable to also non-blocking state. So if a state is non-blocking, and the loading indicator is not interactive, it might make sense just to use an announcement. I believe that is what pull to refresh does. You let the user know they are refreshing, but you don\u2019t need to interrupt their VoiceOver focus, etc. However, if the loading state is blocking, and certainly if it might be interactive such as allow a cancel action, it would probably make sense to have the VoiceOver user land on the indicator. Terence, you can use accessibilityRepresentation { ProgressView(...) } as a starting point to make a custom progress view accessible. If it works in your app, you can also make a custom ProgressViewStyle and use that for your ProgressView. Then you dont need accessibilityRepresentation since you are using ProgressView directly.","title":"What are the best practices around accessibility and displaying progress or loading states to users?"},{"location":"wwdc21/a11y.html#is-there-a-string-for-accessibilityvalue-or-accessibilitylabel-that-is-interrupted-as-silence","text":"Context: I use accessibilityIncrement() and accessibilityDecrement() to control media. But these function always end up calling accessibilityValue, interrupting media playback. I can't use \" \" (space), or punctuation. I used \" \" 2 spaces which is voiced as drum banging. Add the startsMediaSession trait to the element with accessibilityAddTraits so that VoiceOver knows not to interrupt the audio. Tried that. It doesn\u2019t work: it appears that startsMediaSession does not apply to accessibilityIncrement() and accessibilityDecrement(). startsMediaSession only applies when you activate an object (not necessarily for incrementing) if you just return nil for axValue is that not what you want? If I return nil, it\u2019ll read accessibilityLabel and try to speak that. Is there a string that is interpreted as silence? when you adjust (swipe up or down) it reads the label again? \" \" should be intrepreted as silence","title":"Is there a string for accessibilityValue or accessibilityLabel that is interrupted as Silence?"},{"location":"wwdc21/a11y.html#is-there-a-uikit-equivalent-to-accessibilityrepresentation-or-is-it-swiftui-only-either-way-this-is-an-awesome-idea-thank-you-for-building-it","text":"Sorry there isn't an equivalent in UIKit. We welcome any feedback if thats something you would be interested in! Well you can achieve this similarly by overriding accessibilityElements What are you trying to do with it? There is usually a way to achieve the same with UIKit, but those ways might differ depending on what you would be using accessibilityRepresentation for. Didnt have a specific case in mind but we pretty notoriously re-write native UI components for various designs. In the event we can subclass it all works great, but if theyre really custom it might be nice to get the native UI accessibility behavior \"for free\" Ah I see. Yes in that case pretty much anything should be achieve-able with UIKit AX API, but it might require a couple more lines of code and might be a little differently abstracted, i.e. you might want to add an action + a value + a label, for example. But yes, simplifying that is a part of why accessibilityRepresentation was created.","title":"Is there a UIKit equivalent to accessibilityRepresentation or is it SwiftUI only? Either way this is an awesome idea thank you for building it!"},{"location":"wwdc21/a11y.html#if-i-have-a-custom-complex-view-that-doesnt-look-like-a-button-but-i-want-to-add-functionality-when-tapped-i-may-just-add-a-tap-gesture-recognizer-to-it-is-there-an-accessible-alternative-so-a-voiceover-user-can-know-the-view-is-tappable","text":"Usually VoiceOver users expect that buttons are tappable. So add the isButton trait. Is this complex view a singular control? Yep it is! So I could just add the isButton trait to the base view then? Yes. You may want to consider creating a custom ButtonStyle. This has a few benefits, 1) you get all the AX stuff we do for Button for free, and 2) all the other SwiftUI defaults for Button work, like keyboard shortcuts","title":"If I have a custom, complex view that doesn't look like a button but  I want to add functionality when tapped, I may just add a tap gesture recognizer to it. Is there an accessible alternative so a VoiceOver user can know the view is tappable?"},{"location":"wwdc21/a11y.html#is-there-a-native-swiftui-way-to-add-an-attributed-label-or-hint-i-asked-a-question-on-so-here-httpsstackoverflowcomq6686376414351818-but-ended-up-using-uiviewrepresentable","text":"SwiftUI Text can contain attributes. Although there is no way to add those specific attributes, yet. There are also new swiftUI modifiers for accessibility related text stuff, like zspeechAdjustedPitch`. SwiftUI now supports attributed values and labels based on how the Text is marked up automatically, like font, color, etc","title":"Is there a native-SwiftUI way to add an attributed label or hint? I asked a question on SO here: https://stackoverflow.com/q/66863764/14351818, but ended up using UIViewRepresentable."},{"location":"wwdc21/a11y.html#should-we-expect-to-change-our-limiting-sizecategory-based-on-the-watch-screen-size-38mm-vs-44mm-it-seems-like-on-the-38mm-it-would-need-a-much-lower-limit-before-for-going-vertical","text":"That's definitely one approach! If possible stick with a smaller number of cases here though, and if your UI allows, do try to wrap the content in a way that allows the content size to grow without needing to adjust the layout at all","title":"Should we expect to change our limiting .sizeCategory based on the watch screen size (38mm vs 44mm)? It seems like on the 38mm it would need a much lower limit before for going vertical."},{"location":"wwdc21/a11y.html#just-a-quick-question-i-have-a-free-watchos-complication-called-roughly-its-on-the-app-store-now-it-tells-the-approximate-time-in-words-in-many-languages-but-im-not-a-good-programmer-it-would-be-great-to-see-this-rolled-into-watchos-properly-by-apple-some-people-who-suffer-from-dyscalculia-use-this-to-tell-time-without-reading-numbers-supporting-many-more-languages-is-a-tricky-problem-too-as-different-countries-tell-time-in-very-different-ways-also-ive-got-a-minor-issue-with-voiceover-although-the-one-line-complications-are-read-out-correctly-when-tapped-the-three-line-complication-is-not-only-the-first-line-eg-its-about-instead-of-its-about-ten-to-three-is-read-out-any-ideas-why-that-might-be","text":"Thanks in advance, and please keep up the great work on Accessibility. Thanks for the idea! This sounds like a bug. Do you have a code snippet of the complication type you're using so we can confirm we can check the same thing? The one that has issues is .modularLarge swift case .modularLarge: > let template = CLKComplicationTemplateModularLargeStandardBody() I\u2019m just using the standard template and populating all three lines: swift template.headerTextProvider = CLKSimpleTextProvider(text: theItsAbout, shortText: theItsAbout) > template.body1TextProvider = CLKSimpleTextProvider(text: thisFirstLine, shortText: thisFirstLine) > template.body2TextProvider = CLKSimpleTextProvider(text: thisSecondLine, shortText: thisSecondLine) thanks! And just to be clear, only the headerTextProvider is being read out. k, writing up a radar now","title":"Just a quick question. I have a free watchOS complication called Roughly; it's on the App Store now. It tells the approximate time in words, in many languages, but I'm not a good programmer! It would be great to see this rolled into watchOS properly by Apple; some people who suffer from dyscalculia use this to tell time without reading numbers. Supporting many more languages is a tricky problem too, as different countries tell time in very different ways. Also, I've got a minor issue with VoiceOver. Although the one-line complications are read out correctly when tapped, the three-line complication is not \u2014 only the first line (e.g. \"It's about\" instead of \"It's about ten to three\") is read out. Any ideas why that might be?"},{"location":"wwdc21/a11y.html#i-dont-remember-the-name-of-it-but-there-is-a-new-accessibilitymodifier-in-swiftui-that-allows-you-to-add-a-hierarchy-of-swiftui-views-and-have-voiceover-look-at-those-instead-of-the-non-accessibility-views","text":"Are there any issues of syncing the non-accessibility views with the accessibility views during dynamic changes? I'm just curious about best practices. I think you are referring to accessibilityElement(children: ..) Im not sure I understand your question though. Are you referring to how it works with dynamic number of elements? Yes that\u2019s the one I\u2019m referring to. if I understand correctly accessibilityElement(children: ..) is replacing the view hierarchy in VoiceOver with whatever you input as the children, correct? If so, could there be issues if the view hierarchy inside of accessibilityElement(children: ..) doesn\u2019t match the hierarchy of SwiftUI views for your sighted users? zaccessibilityElement(children: )z creates or updates an accessibility elements visibility. Such as, accessibilityElement(children: .contain) would wrap children in an new accessibility container element. Are you perhaps mixing up accessibilityChildren , which allows you to pass in views as children? No I guess I was misunderstanding the purpose of .accessibilityElement(children: ..) I guess the purpose of it is to add accessibilityChildren if the view doesn\u2019t already have children (like in the example of that custom Canvas View)? Yes accessibilityChildren is used to add \"synthetic\" children, which are not directly visible (though could be positioned to match whats drawn in Canvas). accessibilityElement(children: ) transforms the exiting accessibility tree, to make a new container or combine child properties into a new element Is it possible to use accessibilityChildren in the use case of replacing the children in the accessibility tree (if the children in the tree are problematic)? Yes it can be used anywhere. I go more into details in the Beyond the Basics talk: https://developer.apple.com/videos/play/wwdc2021/10119/ Attached to that talk is a sample project where we have some examples of accessibilityChildren","title":"I don't remember the name of it but there is a new accessibilityModifier in SwiftUI that allows you to add a hierarchy of SwiftUI views and have VoiceOver look at those instead of the non accessibility Views."},{"location":"wwdc21/a11y.html#how-do-you-handle-potential-over-verbosity-when-using-voiceover-sometimes-if-a-table-cell-for-instance-has-a-great-deal-of-content-i-can-sometimes-be-unsure-if-i-should-err-on-the-side-of-reading-most-of-it-and-the-user-potentially-have-a-bunch-of-stuff-read-at-them-or-read-less-so-they-can-quickly-scan-do-you-have-any-advice-on-how-you-manage-this","text":"Hey Christian! We have a session coming up this Friday called \u201cTailor the VoiceOver experience in your data-rich apps\u201d, and it will cover precisely this, so stay tuned! I\u2019d ask the presenter any questions you have afterward during that watch party.","title":"How do you handle potential \u201cover verbosity\u201d when using VoiceOver. Sometimes if a table cell for instance has a great deal of content I can sometimes be unsure if I should err on the side of reading most of it (and the user potentially have a bunch of stuff read at them), or read less so they can quickly scan. Do you have any advice on how you manage this?"},{"location":"wwdc21/a11y.html#thursday","text":"","title":"\ud83d\uddd3 Thursday"},{"location":"wwdc21/a11y.html#when-designing-accessibility-labelvaluehint-content-what-considerations-do-we-need-to-think-about-for-refreshable-braille-displays","text":"VoiceOver already abbreviates common UI words, like button to shorter forms. There's not too much API level control over what gets sent to the Braille display at this time I think in general, the same advice applies for spoken axLabels - which is try to be concise, but accurate. Don't be overly verbose, and front-load the important information","title":"When designing Accessibility Label/Value/Hint content, what considerations do we need to think about for refreshable braille displays?"},{"location":"wwdc21/a11y.html#i-learned-that-apple-created-a-people-locator-that-helped-blind-people-during-the-pandemic","text":"https://support.apple.com/guide/iphone/people-detection-iph41bdfe6c7/ios","title":"I learned that apple created a people locator that helped blind people during the pandemic!"},{"location":"wwdc21/a11y.html#do-you-know-of-any-good-guides-for-learning-how-to-use-voiceover-on-macos","text":"Try this! It should get you started. https://support.apple.com/guide/iphone/turn-on-and-practice-voiceover-iph3e2e415f/ios","title":"Do you know of any good guides for learning how to use VoiceOver on macOS?"},{"location":"wwdc21/a11y.html#when-should-we-be-using-the-link-trait-rather-than-the-button-trait-on-web-the-general-rule-is-that-a-link-goes-somewhere-and-a-button-does-something-but-this-doesnt-always-match-up-in-a-native-app","text":"Should a text button be presented as a link? Should links only be links that are external to your app - say opening web pages in safari or making phone calls? Is it ok to have a button that opens a web link, or should this always be a link? If a control takes you out to a webpage usually we use link. If the control operates some function within the app we call it a button. I think we have usually avoided marking something as a button AND a link","title":"When should we be using the link trait rather than the button trait? On web the general rule is that a link goes somewhere and a button does something, but this doesn't always match up in a native app."},{"location":"wwdc21/a11y.html#whats-the-recommendation-when-working-with-a-long-list-of-items-in-a-table-view-and-voice-control","text":"should we put the same label in the accessibilityUserInputLabels so the user will say it's name then automatically after the OS will shows the indices or is it better to expose instead the specific cell title for example ? thanks It would depend on your label and what\u2019s appropriate for it. Generally you should put the name the cell or the relevant content. But if the cell has a super long label, you might want to put something shorter in userInputLabels . Like if it\u2019s a travel app and the cell label is like \u201cNew York, a bustling city with tons of nightlife and famous attractions\u201d a good userInputLabel might be just \u201cNew York\u201d \u2014 this makes it easier to speak. Today\u2019s Voice Control Challenge will actually have some good tips on this topic. But if you have a screenshot I can take a more detailed look.","title":"What's the recommendation when working with a long list of items in a table view and voice control."},{"location":"wwdc21/a11y.html#our-app-has-over-20-different-font-text-styles-if-we-want-to-support-dynamic-type-through-uifontmetrics-is-there-any-way-we-can-extend-the-11-we-get-with-uifonttextstyle","text":"Gold to hear your interest in fonts! We have a talk from WWDC17 that I think might help. Take a look: https://developer.apple.com/wwdc17/245 Check out Building Apps with Dynamic Type UIFontMetrics can also give you a scalar to scale a custom font appropriately based on the user\u2019s text size.","title":"Our app has over 20 different Font text styles. If we want to support dynamic type through UIFontMetrics, is there any way we can extend the 11 we get with UIFont.TextStyle?"},{"location":"wwdc21/a11y.html#how-can-i-incorporate-accessibility-inspector-command-line-interface-into-my-ci-pipeline-to-provide-me-insight-into-my-current-accessibility-audit-level","text":"We are aware of this limitation, and unfortunately we do not have this functionality at the present time. Thank you for your feedback!","title":"How can I incorporate accessibility inspector (command line interface) into my CI pipeline to provide me insight into my current accessibility audit level?"},{"location":"wwdc21/a11y.html#im-working-on-a-ui-for-a-tooltip-on-ios-13-it-has-some-text-and-a-close-button-its-not-modal-so-you-can-still-read-content-without-dismissing-it-do-you-have-any-tips-or-examples-for-the-best-accessibility-specifically-voiceover-experience-for-a-component-like-this","text":"I think the main question to answer is where in the list of elements should this be placed. Either at the beginning of everything, end of everything or inter-mixed. If this is for a specific component in the UI, i would try to put it in the UI element list after the component it references. This could be done by overriding accessibilityElements for a containerView that contains both of those views.","title":"I'm working on a UI for a tooltip on iOS 13+. It has some text and a close button. It's not modal, so you can still read content without dismissing it. Do you have any tips or examples for the best accessibility (specifically VoiceOver) experience for a component like this?"},{"location":"wwdc21/a11y.html#what-is-apples-recommended-methods-to-using-or-creating-numeric-telephone-specific-keyboard","text":"If you use our standard keyboard, and set the type to phonePad, then this should already be accessible. https://developer.apple.com/documentation/uikit/uikeyboardtype/phonepad If you\u2019re rolling your own, I\u2019d recommend keeping it as similar to the the stock on for VO, etc. as possible. You\u2019ll also want to use (on phone number text) UITextContentType of .TelephoneNumber And for SwiftUI: https://developer.apple.com/documentation/swiftui/menu/keyboardtype(_:) Also some related talks just for good measure! https://developer.apple.com/wwdc20/10115 https://developer.apple.com/wwdc17/242","title":"What is Apple's recommended methods to using or creating numeric telephone specific keyboard?"},{"location":"wwdc21/a11y.html#not-totally-related-to-the-talk-but-i-tried-using-voicecontrol-on-my-app-that-has-datepickers-i-must-be-missing-something-because-i-find-moving-the-picker-to-be-impossible-it-says-swipe-up-or-down-with-1-finger-to-adjust-the-value-but-that-doesnt-work","text":"You can say \u201cIncrement \u201d or \u201cDecrement \u201d to increment and decrement date pickers The \u201cswipe up or down with 1 finger to adjust the value\u201d comes from VoiceOver. Are you using VoiceOver at the same time? Yes - I have voiceover turned on and I selected the element of the picker Ok got it. So a UIDatePicker should be accessible by default via and up/down swipe when the cursor is on it. (This is b/c it uses the .adjustable trait). Are you doing anything particularly custom with this item? Don\u2019t think so - I was trying to find another stock example - but when I\u2019m in VoiceOver I don\u2019t know how to get the control center. And it seems like the Things app removes the \u201c+ Add Reminder\u201d control when VoiceOver is on VO gestures (for Control Center, etc) are explained here: https://support.apple.com/guide/iphone/operate-iphone-using-voiceover-gestures-iph3e2e2329/ios OK - we can\u2019t do VoiceOver in the simulator can we? VoiceOver is only supported on device.","title":"Not totally related to the talk - but I tried using VoiceControl on my app that has DatePickers. I must be missing something because I find moving the picker to be impossible. It says \"swipe up or down with 1 finger to adjust the value\" but that doesn't work"},{"location":"wwdc21/a11y.html#i-never-knew-about-tab-z-during-the-talk-i-hit-it-and-slack-gave-me-a-summary-of-how-to-arrow-around-and-now-its-gone-is-it-a-one-time-thing-or-am-i-doing-something-wrong","text":"Tab + Z while Full Keyboard Access is running should bring up the Custom Actions for the currently selected element. Tab + H should bring up the help menu which shows you all your FKA commands! Tab + Z will not show anything if the currently selected element has no custom actions associated with it. Something like a \u201csend\u201d button may only have 1 operation and thus would likely not have custom actions, for example.","title":"I never knew about Tab-Z! During the talk I hit it and Slack gave me a summary of how to arrow around. And now it's gone - is it a one time thing, or am I doing something wrong?"},{"location":"wwdc21/a11y.html#thank-you-for-the-fantastic-talk-i-was-wondering-if-there-are-any-special-considerations-we-need-to-make-with-regards-to-full-keyboard-access-when-the-user-has-mirrored-their-ipad-display-to-an-external-display-for-a-larger-view-of-their-screen","text":"Full Keyboard Access should work exactly the same when the screen is mirrored to another device! If you\u2019re doing a presentation and want the cursor to be larger or brighter, there are color and thickness settings in the Full Keyboard Access settings area!","title":"Thank you for the fantastic talk! I was wondering if there are any special considerations we need to make with regards to Full Keyboard Access when the user has mirrored their iPad display to an external display for a larger view of their screen?"},{"location":"wwdc21/a11y.html#hi-can-i-ask-for-any-advice-on-how-to-make-sure-a-ml-model-is-accessible-for-any-user-you-might-say-they-inherently-are-especially-if-theyre-performing-sound-recognition-however-it-would-be-great-to-know-which-accessibility-features-can-make-sure-they-are-as-straightforward-as-possible-to-use-for-everyone-thank-you","text":"This will be a great question for the Accessibility + ML event happening in at 4PM! Both these videos talk about this topic, in terms of inclusion, https://developer.apple.com/wwdc21/10275 https://developer.apple.com/wwdc21/10304 It's all about making sure your data is collected and annotated in a way that honors the differences in us all","title":"Hi! Can I ask for any advice on how to make sure a ML model is accessible for any user? You might say they inherently are, especially if they're performing sound recognition. However, it would be great to know which accessibility features can make sure they are as straightforward as possible to use, for everyone. Thank you!"},{"location":"wwdc21/a11y.html#is-full-keyboard-access-a-good-way-for-developers-to-test-our-apps-experience-with-switch-control-or-is-there-a-better-way-to-do-that-without-specialized-hardware","text":"You can test SC w/o specialized hardware by adding a Screen switch in the Switch Control menu - this allows you to tap anywhere on the screen to activate the switch. You can also use (new in iOS 15) Sound Actions to test w/o specialized hardware - just my making sounds like \u201cshh\u201d or \u201cpop\u201d","title":"Is Full Keyboard Access a good way for developers to test our apps' experience with Switch Control? Or is there a better way to do that without specialized hardware?"},{"location":"wwdc21/a11y.html#friday","text":"","title":"\ud83d\uddd3 Friday"},{"location":"wwdc21/a11y.html#one-of-my-favorite-features-on-apple-tv-is-the-high-contrast-focus-style-this-feature-adds-an-additional-white-border-around-focused-cells-ive-never-been-able-to-find-an-api-to-implement-this-for-a-custom-collection-view-cell-a-similar-question-was-asked-in-the-forums-a-few-years-ago-and-has-more-details-httpsdeveloperapplecomforumsthread99313","text":"Good point Christopher. We dont currently have public API for this setting but we should add it.","title":"One of my favorite features on Apple TV is the High-Contrast Focus Style. This feature adds an additional white border around focused cells. I've never been able to find an API to implement this for a custom collection view cell. A similar question was asked in the forums a few years ago and has more details: https://developer.apple.com/forums/thread/99313"},{"location":"wwdc21/a11y.html#is-the-voiceover-image-description-available-on-macos-or-only-iosipados","text":"It is available on both. It is on macOS as well! Once enabled in VoiceOver Utility, you can get a description by focusing on an element and pressing VO+Shift+L","title":"Is the VoiceOver Image Description available on macOS or only iOS/iPadOS?"},{"location":"wwdc21/a11y.html#do-you-know-of-any-good-examples-of-apps-that-support-drawing-via-voiceovervoice-control-or-switch-control-annotating-using-switch-controlvoice-over-would-be-an-awesome-feature-to-provide","text":"Switch Control itself provide freehand drawing tools in the Switch Control menu. These allow SC-users to draw beautiful art, etc using Switch Control. I\u2019m trying to find the name of an App that\u2019s particularly popular with some of our SC users. Procreate is the app - you can see a video it in use here: https://www.youtube.com/watch?v=N034rhJJe8g","title":"Do you know of any good examples of apps that support drawing via VoiceOver/Voice Control or Switch Control? Annotating using Switch Control/Voice Over would be an awesome feature to provide."},{"location":"wwdc21/a11y.html#what-would-be-ideal-experience-from-auto-capture-perspective-and-voice-over-we-have-sdk-where-one-of-the-entry-point-allows-user-to-change-between-auto-capture-and-manual-capture-if-person-who-needs-accessibility-starts-screen-with-auto-capture-enabled-our-logic-announces-detecting-object-and-captures-it-sometimes-its-too-fast-and-doesnt-allow-breathing-room-to-let-user-understand-what-is-happening-any-suggestion","text":"That's a great question. One idea might be to give more feedback about the capture before it happens. For example you could use the UIAcccessibilityPostNotification() function to make announcements about the orientation of what's going to be captured, or other feedback that might be useful if someone could not see the screen. Additionally there could be a small timer announcement of a second or two where if the user holds the phone steady for that time, only then does the capture occur. I believe Vision framework has API called image registration that would be useful in determining if the camera frames appear constant (i.e. little movement)","title":"What would be ideal experience from auto capture perspective and Voice Over? We have SDK where one of the entry point allows user to change between Auto Capture and Manual Capture.  If person who needs accessibility starts screen with auto capture enabled, our logic announces detecting object and captures it. Sometimes its too fast and doesn't allow breathing room to let user understand what is happening. Any Suggestion?"},{"location":"wwdc21/a11y.html#what-considerations-should-we-give-to-accessibility-when-using-a-uipagecontrol","text":"You should include the label: \"Page\", value: \"1 of 5\", traits: adjustable, button then implement accessibilityIncrement/Decrement and accessibilityActivate (which moves forward one page at a time)","title":"What considerations should we give to accessibility when using a UIPageControl?"},{"location":"wwdc21/a11y.html#i-had-a-question-related-to-languages-i-have-a-dutch-soccer-app-with-a-lot-of-dutch-names-and-terms-we-know-that-we-have-some-users-that-use-voice-over-and-have-their-system-language-set-to-english-other-then-forcing-the-accessibility-language-to-dutch-is-there-a-better-way-to-let-the-system-and-user-know-the-app-is-in-dutch-translating-the-entire-app-to-english-wouldnt-help-much-because-of-all-the-dutch-names-and-their-pronunciations","text":"I think in this case I would recommend using accessibilityLanguage property or the UIAccessibility or UIAccessibilitySpeechAttributeLanguage in the attributed string to mark up certain words in the right language","title":"I had a question related to languages. I have a Dutch soccer app (with a lot of Dutch names and terms). We know that we have some users that use Voice over and have their system language set to English. Other then forcing the accessibility language to dutch, is there a better way to let the system and user know the app is in Dutch? Translating the entire app to English wouldn't help much because of all the dutch names and their pronunciations."},{"location":"wwdc21/a11y.html#is-axcustomcontent-used-in-any-apple-apps","text":"Photos and Calendar (in the detail view)","title":"Is AXCustomContent used in any Apple apps?"},{"location":"wwdc21/a11y.html#does-anyone-have-any-advice-or-inspiring-examples-of-a-great-accessibility-experience-for-color-swatches-specifically-im-experimenting-with-the-differentiate-without-color-feature-when-choosing-the-color-of-shoes-clothing-and-jewelry-in-our-app","text":"There\u2019s a fantastic talk from last year\u2019s WWDC on combining colors, symbols, and text together to make a really solid experience. Might not be 100% what you\u2019re going for, but it\u2019s definitely worth a look! I\u2019ll attach the link","title":"Does anyone have any advice or inspiring examples of a great accessibility experience for color swatches? Specifically I'm experimenting with the differentiate without color feature when choosing the color of shoes, clothing, and jewelry in our app."},{"location":"wwdc21/a11y.html#can-swiftui-views-support-axcustomcontent","text":"yes! hang on :slightly_smiling_face: details at the end of the video!","title":"Can SwiftUI views support AXCustomContent?"},{"location":"wwdc21/a11y.html#this-is-excellent-it-is-absolutely-relevant-to-my-app-its-just-the-dogs-are-people-this-gets-at-a-challenge-i-have-as-a-sighted-developer-i-use-voiceover-myself-for-some-functional-tasks-such-as-reading-out-content-id-rather-hear-than-read-myself-but-it-is-hard-to-get-to-know-the-deeper-layers-of-voiceover-one-key-third-party-app-for-teaching-even-the-main-voiceover-gestures-and-interactions-has-been-discontinued-what-resources-do-you-recommend-for-people-to-learn-good-interaction-patterns-for-voiceover-beyond-the-surface-level","text":"Check this out.. https://support.apple.com/guide/iphone/learn-voiceover-gestures-iph3e2e2281/ios","title":"This is excellent. It is absolutely relevant to my app, it's just the dogs are people. :) This gets at a challenge I have as a sighted developer. I use VoiceOver myself for some functional tasks, such as reading out content I'd rather hear than read myself. But it is hard to get to know the deeper layers of VoiceOver. One key third party app for teaching even the main VoiceOver gestures and interactions has been discontinued. What resources do you recommend for people to learn good interaction patterns for VoiceOver beyond the surface level?"},{"location":"wwdc21/a11y.html#this-has-been-really-helpful-to-understand-how-to-move-content-rich-material-to-the-more-content-section-of-the-rotor-are-there-other-features-of-the-rotor-that-likewise-require-explicit-developer-implementation-like-this","text":"Checkout Accessibility Custom Rotors session from WWDC 2020 https://developer.apple.com/videos/play/wwdc2020/10116/ (edited)","title":"This has been really helpful to understand how to move content rich material to the \"More Content\" section of the Rotor. Are there other features of the Rotor that likewise require explicit developer implementation like this?"},{"location":"wwdc21/a11y.html#what-has-been-the-most-challenging-apple-app-to-work-on-for-accessibility","text":"Personally, I would say, non UIKit based apps, like PDFs and Photos app!","title":"What has been the most challenging Apple app to work on for accessibility?"},{"location":"wwdc22/localization-and-internationalization.html","text":"Localization and internationalization Lounge QAs by emin Sometimes there is a difference in font size(width/height) between LTR and RTL , how can we make this better? There are a couple of things you could be seeing and I\u2019d like to understand which it might be. The System Font for some languages like Arabic (which is RTL) uses a taller line height than other languages, which you will notice if you\u2019re using Text Styles and have multiline labels or even in the default cell heights in Table Views. In fact, we recommend using Text Styles to ensure that you do get this language-specific tailoring. Different System Fonts also may have different relative font weights and sizing and it\u2019s possible that what you\u2019re seeing is as a result of that. Do either of these sound like what you may be observing? yep, the first one. In that case, this is correct and expected behaviour, because different languages require different line heights to ensure that text doesn\u2019t overlap across lines and has room to breathe. Are you encountering any problems with this? Sometimes when let's say my use case when u have a cell with both English and Hebrew together, it looks abit weird, thought mby equaling their actual height of one of them is the best practice but i'm not sure. a 10.0 font size in some Hebrew font can be smaller than a 10,0 font size of SF English f.e That\u2019s true. For example, if we compare \u201cWelcome\u201d and \u201c\u05d1\u05e8\u05d5\u05db\u05d9\u05dd\u201c, Hebrew will not be as tall as the capital letters in English and the Hebrew letters are slightly taller than the small letters in English. This is something that varies by script and we cannot expect that the heights will be equal. Generally speaking, the way the System Fonts on iOS, macOS, etc. are designed, if you are using a Text Style, you should get a reasonable size for the text across various scripts. Thank you! To be clear, Hebrew does not use a different line height compared to English. It does, however, use a different UI font, which is why you're seeing this difference, as it is difficult to perfectly match up metrics between two independent fonts. Our app includes multiple tutorials. Each tutorial is in its own directory with tutorial data, images and Localizable.strings files for localized text for just this tutorial. This makes it easy for us to add new localized tutorials without having to modify the app's main Localizable.strings file. Is there a way to include these Localizable.strings files for the many tutorials in the output when we use Export for Localization in Xcode? Or are we going about this wrong? Hi! Can you elaborate a little on how you are setting up these files in your projects? For example, are they part of a target, or do you save them as a pre-created bundle? They are currently in reference folders in Xcode. In the main project and target. Our recommendation would be to convert these to bona fide bundle targets in your project. That would allow them to be properly extracted automatically. As long as the localizable assets are part of a \u201cCopy Resources\u201d phase in your target, they should be extracted when doing Product > Export for Localization. As <@U03HW7PE3SM> mentioned, you can have a \u201cBundle\u201d target for each of your tutorials and then include the localizable resources in each bundle. Then you can include these bundles in your main application target. I'm not familiar with the process of creating bundle targets. But we have over 1000 tutorials and that may be a lot of overhead. The root Tutorials reference folder is included in the Copy Bundle Resources build phase. But I don't see the Localized.strings files, which are in sub folders, in the results from Export for Localization. Yeah, unfortunately Xcode does not look through folder references for strings files \u2014 they are meant to add a folder to your product as-is, without any postprocessing. As <@U03HWDD6RED> mentioned, Xcode does not export the \u201cblue\u201d folder references. One thing you might be able to try is moving all of your tutorials into a Swift package. Xcode 14 adds support for exporting Swift packages for localization and Swift packages are represented by a folder on-disk. Any other suggestions for organizing tutorial or lesson files to be localized? We would like to use Xcode's great localization tools as much as possible. <@U03HJA9JVGA>\u2019s suggestion will let you do just that, for when you can adopt Xcode 14, and is probably your best bet going forward. You can include the \u201cTutorials\u201d Swift package inside of your app\u2019s Xcode project and then when you export for localization\u2014it should include all of the localizable assets and strings in the .xcloc Ok. Thanks! Give it a try and if you run into issues, please feel free to file a report with Feedback Assistant! Hi all! When editing an .xloc file in XCode, I'm missing one key feature: filtering or sorting the list of keys by whether or not they were translated into the second language. I seem to only be able to sort alphabetically. Am I missing something? Hi Jan! As you pointed out, Xcloc Editor supports sorting alphabetically and filtering by search terms, but does not support filtering by \u201ctranslated\u201d or \u201cuntranslated\u201d strings. This is great feedback though! If you would benefit from this feature, please file a feedback report and paste the ID in this thread. Thank you <@U03H3NEH4CX>, submitted at FB10114561 Perfect, thank you! Hi! Is there a built-in workflow in Xcode to localize settings bundles? In a way that Xcode would export all the relevant strings to .string files and the Export Localizations menu command would include those automatically into the exported .xliff files? Hi Daniel! Xcode supports localization export for Settings bundles that are named \u201cSettings.bundle\u201d and contain .strings files. If this isn\u2019t working for you, can you explain the setup you\u2019re using and the behavior you\u2019re experiencing? Hi Matt, ok, I understand what my problem was. As you mentioned, the strings from the Settings.bundle plist are actually exported correctly. I'm in addition using the third party https://github.com/futuretap/InAppSettingsKit|InAppSettings framework , which builds on the Settings.bundle format but supports additional key/values and can be embedded into the app. It was its InAppSettings.bundle where the strings weren't automatically exported from the plist. Thanks for the answer! Ahh, glad you were able to find the problem! Yes, thanks again! How would you handle the case where you want to provide variations in a language? For example I want to provide localization for the word colour. UK people would see colour, but US people would see color. Is there a way so all other text is shared but I could localize that one word? Hi! Unfortunately, once we find a strings table for a specific lproj, we use the contents of that table as they are without doing any more fallbacks. For example, you can localize a table for en_GB, but it has to contain all strings, even those that are the same as other English localizations. Seems like their should be a hierarchy in the string handling where you can have an overlay (e.g for GB) that only needs to contain the differences to another version (e.g US) Ah ok, that's too bad. Are there any plans to be able to do so? Is it worth it to file feedback about it? On the plus side, you can in fact localize for English variants, like English (UK), English (Ireland), and so on. Yeah, it would be wonderful to have a feedback! Thanks! Created FB10115590 :blush: How do we format and sort time values in a localized way? for example, if i'm showing a list of hours of operation for the week, the time strings will be different (24 hr vs 12 hr), and the order of the week days will be different (starting on monday vs sunday). Hi! For sorting, it would be best to sort based on the original binary data, then use .formatted() to produce a localized time and/or date. could you clarify what \u201coriginal binary data\u201d means? How are you storing the days/hours prior to localization? For example, is it a Date , or are you receiving the data in some other form? it would be a JSON from an API response in english, { day: 0, start: \"0700\", end: \"2300\" } and 0 means sunday as specified in the API Got it. You should be able to sort directly on those strings. For the first day of the week issue, you can check Calendar.firstWeekday . (on the current user default calendar) To produce formatted times, you'll need to convert the strings to a Date object, then use .formatted() with the appropriate options to produce the string you want. thank you!! You should be able to put a weekday/hour/minute in DateComponents and then use Calendar to make a Date from that. You can then make a DateInterval from two Dates for the range (e.g. \"9 AM - 5 PM\") and then use .formatted() on that. One more note: when using Calendar to convert DateComponents to Date , set the time zone to GMT to avoid Daylight Time issues. Same with .formatted() We have an app that has English only features. Let's imagine that's as an advanced assistant for editing English texts and our assistant doesn't support other languages. If we localize our app, would it improve user experience for people who use English as a second language, or would it only confuse them on why their main language is not supported, since we only expect English texts for now? Hi Roman, I think it\u2019ll depend on exactly what your app does. For example, hypothetically, if you have an app that points out grammar notes about English, it might still be useful for people to see that information in a language they find easier to understand than English. So, if you can share details, I might be able to help give you a more specific, helpful answer :slightly_smiling_face: Basically, it is an editor app, which has users' documents. When user creates the doc and fills it with a text, he receives grammar suggestions, as well as clarity, fluency, readability and other suggestions. Each suggestion is a card that has: \u2022 previous word/sentence and the resulting sentence \u2022 detailed explanation of why the user should apply this suggestion in that particular context - like because it sounds unconfident, or because it has a grammatical error, and so on Right\u2026 I think some users\u2014especially those who have less familiarity with English to begin with\u2014could certainly benefit from localization. However, you may want to be cautious about (a) which languages you choose, and (b) how you separate out the \u201ccontent language\u201d (English) from the \u201cUI language\u201d so that there\u2019s no confusion or aesthetically displeasing mixture of languages. I've been thinking about some extra flow to suggest users who are not from EFL countries to have some pieces of the content being translated to their native language, just like that hint on why they should apply that alert. However, I dunno if users would be ok with English interface since they already write some English texts and the interface is primitive enough to be understandable. But at the same time having some interface parts in the native language, like we as an app just forgot to translate everything :sweat_smile::sweat_smile: You\u2019re thinking about all the right things! And it\u2019s true that with English being the lingua franca in today\u2019s world, many people might be familiar enough with the English user interface such that they won\u2019t need localization. However, it\u2019s always handy to have choices, and your users can also go into Settings to switch your app to English if that\u2019s what they prefer. In terms of making sure that the localization doesn\u2019t look partial or incomplete, I would definitely suggest making sure that any \u201cchrome\u201d (i.e. UI elements) is translated consistently in each of the languages you target. For example, if the tables are turned and your app is actually for helping people with French, as a French learner, I would appreciate it if I could use it in English and see suggestions like this: > The verb bouffer could be too formal. Consider using d\u00e9jeuner or manger . I\u2019m limited by what I can do in Slack here stylistically, but you can see that I have marked the text in the content language in a different style than the UI language, which gives me clarity as the user as to what\u2019s going on and where the language boundaries are. That's exactly what I've been thinking about. Last one - if you will have those suggestions in English, having French texts, would you as a new user prefer having whole app interface in English? Wouldn't you start typing in English instead of French, since the app is fully localized?)) Yes, I suppose I might! It\u2019s hard to answer that in the abstract though without knowing exactly what the app looks and feels like. It all depends on which direction your app\u2019s design steers the user in. Yeah, well... I'm talking about Grammarly app for iOS. Would be great to learn your thoughts on that. Oh, interesting! I was guessing that this sounded like Grammarly! I would suggest looking at your app\u2019s usage and tackling one market as an initial foray, e.g. China or Japan, and see what feedback you get from your customers :slightly_smiling_face: Personally, I don't know that the app being localized in a given language would necessarily imply that I can input text in that language (though obviously it's ideal!). Taking for example our own products, we localize all features of the OS into all languages completely, including things like Apple Pay Later that might only be available in some regions. There's probably no right way to do this, but when working with localized strings in code, do you recommend using the new string initializer (which looks great btw!) directly throughout the app, or creating, for example, a file with enums that return those localized strings? We strongly recommend that you use String(localized:\u2026) , AttributedString(localized:\u2026) or in Objective-C NSLocalizedString and NSAttributedLocalizedString ! If you do that, Xcode can extract strings for you to provide to your localizers \u2014 it knows how to recognize these macros and initializers and how to produce a xcloc bundle that contains them all, and then reintegrate it into your project. String constants used with other mechanism will not be recognized by this mechanism, and you will have to manually handle extraction into .strings files and any changes going forward. Note that SwiftUI also uses the LocalizedStringKey type, and Xcode also knows about it. So, when you write Text(\"Hello, world!\") , since Text(\u2026) takes a LocalizedStringKey , Xcode will also know to extract it. In Swift, you can even use String interpolation to include variables directly in the initializer String(localized: \"Welcome to \\(newCity)\", comment:\"Large headline label welcoming the user to their new location, the variable refers to the city name.\") Please make sure to explain what the variable refers to, so that translators have that knowledge, too :slightly_smiling_face: Yup! This works in String(localized:\u2026) , AttributedString(localized:\u2026) and in SwiftUI. As long as you\u2019re using this setup, in general, you\u2019re golden \u2014 if you\u2019re using enums to represent your strings, just make sure that they\u2019re calling into these functions. In general, using enums may complicate your patches a little and interact weirdly with SwiftUI if you try to pass String s to SwiftUI initializers that expect localized keys. Hello. Can the Localizable.strings updates itself? The first time export and import is okay. However, when the project contains a Localizable.strings file then the next export will not contain new strings added. Hi ChakMing! The expected flow is as follows: 1. Have some strings in your project (either .strings files or strings in code) 2. Export Localizations, which includes all strings in an xcloc 3. Translate the xcloc 4. Import Localizations with the translated xcloc (This step updates/adds .strings files in/to the project.) 5. Exporting again should include all strings in the project (including those previously imported) in the xcloc If this is not working as expected, please file a feedback so that we can take a look. <@U03H3NEH4CX> Hello again. Here\u2019s what I found. At initial, the export will include all strings. If I imported the xcloc, it will generate Localizable Files. Then I add more words on SwiftUI, and export. The xcloc is still using the old localizable file. I thought it had been happening for a long time\u2026 Do you think it is a bug, or is this correct? So my expectation here is that the second export would include both the strings in your SwiftUI code and the strings in the .strings files that the import created. Xcode won\u2019t remove stale translations automatically, because those translated strings can be a valuable resource if you ever need to translate them again. However, please feel free to file a feedback request if you think we should change the flow here! I just re-export and seems it works this time! Thanks, <@U03H3NEH4CX> <@U03HBMCRX0E> Hello. How can we make sure the system and VoiceOver identify a certain text\u2019s language correctly. Is there a tag we can set somewhere? I\u2019m asking for both web and apps. It happens from time to time where the system falsely identifies Urdu for Arabic, or recently on iOS 16, Persian for Arabic. How can we improve this? If you know the language of your text, you can annotate it with that language. For web content, you can use the https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang|lang attribute, which can be applied to any HTML element, including &lt;p&gt; , &lt;span&gt; , and &lt;body&gt; . For app content, you can create an attributed string and set the NSLanguageIdentifierAttributeName to the language code of the corresponding text. If you have reproducible strings that are incorrectly identified, we would love to have feedback with those examples as well! Here\u2019s the feedback ID: FB10152753 It fails on everything. Here are some example texts: \u0645\u0646 \u0633\u0639\u06cc\u062f \u0647\u0633\u062a\u0645 \u0627\u0645\u0631\u0648\u0632 \u0628\u0631\u06cc\u0645 \u0631\u0633\u062a\u0648\u0631\u0627\u0646\u061f \u0686\u0647 \u062e\u0628\u0631\u061f <@U03HW7PE3SM> Thanks! We\u2019ll be sure to pass this along. What\u2019s the best way to use two custom fonts (non SF Pro for marketing reasons) for Arabic and Latin scripts? The most challenging part is that the text could be bilingual and it may come from the server. For instance, \u201c\u0628\u0647 WWDC \u062e\u0648\u0634 \u0622\u0645\u062f\u06cc\u062f\u201d. I want two fonts to be used for this snippet. It looks you forgot to answer this. You can do it by setting https://developer.apple.com/documentation/coretext/kctfontcascadelistattribute|kCTFontCascadeListAttribute , either have the primary font be the Latin font, then have the cascade list contain your Arabic font (the way we do it for our system), or the other way around. Another option is to use (NS)AttributedString and set the fonts on the individual segments of the string. The thing is I mostly don\u2019t have access to the text beforehand. Let\u2019s say it\u2019s coming from a server. Then the font fallback list (as above) is best. Note that in addition to the CoreText version above, there's also https://developer.apple.com/documentation/uikit/uifontdescriptorcascadelistattribute/|UIFontDescriptorCascadeListAttribute and https://developer.apple.com/documentation/appkit/nsfontcascadelistattribute/|NSFontCascadeListAttribute , if you're using higher-level text APIs. Is there a non-hacky way to force a single language for an app? Let\u2019s say the app only supports \u201car-SA\u201d and the user\u2019s device language is set to \u201cen-US\u201d. I used to set a value for a certain in key in UserDefaults at launch to make it work. You should not need to set any user defaults. Simply make sure that the developmentRegion in your project.pbxproj is set to the correct language and that all your localizable files are in the correct lproj. If your app does not have an lproj folder, you will need to be on iOS 16, macOS 13, tvOS 16, and watchOS 9 to get correct behavior. Is there a way to force the numeral system for an app? For instance, the user may have chosen \u2018\u06f1\u06f2\u06f3\u2019 as their numbering system of choice where it only make sense in our app to show numbers as \u2018123\u2019. One thing that\u2019s still missing and I\u2019d already filed a report as I remember, is choosing the numeral system when changing the language for a specific app. Now you can only change the numeral system when you change the device language as a whole. Simply don\u2019t localize the numbers (e.g. don\u2019t use a formatter) and the numbers should be preserved as the literals you are using in your code. Do you have a code sample to share to elaborate more on the issues you are seeing? I think I phrased my question wrong. For instance, install Whatsapp on a device whose locale is set to English - United States. Then, go to Whatsapp settings page inside system Settings and change its language to Persian. Now Open Whatsapp. You\u2019ll see the system keyboard has number row in Latin. Whereas in iMessage on the same device it\u2019s in \u06f1\u06f2\u06f3\u200d form. <@U03JPJ277SQ> IMHO, this may be a bug. Do you mind reporting this bug and sharing the FB # here? <@U03J83G0WQG> Here it is: FB9647599. I believe we already discussed this on Twitter as well. When I release my apps I can usually find some people to help me translate the initial release. But over time it makes it difficult for me to create updates which require new translation strings. Any best practices you would have there for indie developers that don't have a lot of resources to pay 20+ translators for each release? It is understood that adding languages to your application can become quite the commitment \u2014 not just a commitment in the moment, but also going forward. It does pay off to make a plan in which you can sit down and think whether you can do so sustainably for every single feature you do, including adding languages to your application. Sometimes, it is a valid choice to know that the time may just not be there every release, and to choose perhaps to support fewer languages. At other times, community-supported projects may be able to elicit contributions from the community that can help where a single developer may not, depending on what your relationship is with that community. But it is very much a commitment \u2014 often an economic one \u2014 you may want to think about as an ongoing task that requires care and maintenance. Just to clarify \u2014 you are not having issues with filtering out new strings from old ones, correct? in other words, using the Xcode import/export workflow, you should be able to only have to deal with new/changed strings on every release, rather than re-translating the entire app. There are third-party services that offer (human) translation as a service for your localizable strings. But you'll have to document your strings well, or they may get the context wrong and mistranslate. We saw that this year you're adding punctuation to Hebrew (Thank you for that! \u05ea\u05d5\u05d3\u05d4 \u05e8\u05d1\u05d4) Besides the obvious addition to the Hebrew Keyboard is there anything else we should know about that? Hi <@U03J1TN6WBD>, we have indeed added niqqud support to the iPhone & iPad keyboard layouts this year. There\u2019s nothing else new for Hebrew this year per se, but it\u2019s worth mentioning that Yiddish is also now supported as a separate keyboard language. Thank you! a dank Maybe a slightly tangential question, but are there learnings or strategies used during RTL localization that could be beneficial for adapting a UI with significant lateral elements for left handed use? Does \u201chandedness\u201d come into play when considering the design of RTL UIs? We treat Handedness and Layout Directionality as distinct elements and handle each of those in different ways. For example, for the One-Handed Keyboard, we offer both Left-Handed and Right-Handed modes. UI elements or gestures that indicate a progression that go left-to-right in an LTR language do mirror to go right-to-left in an RTL language. So, handedness does not come into play here. This is all fairly abstract, of course. If you have a concrete example that you want to ask about, do feel free to share it :) I guess, as a lefty, I never really understood how an adaptive layout could really change how someone uses a device until I started looking at how RTL languages are handled in the HIG. The chevrons in lists are meant to point towards the thumb you use to tap them :exploding_head:. I would imagine that the inverse could be true in RTL situations\u2026 has that changed your design strategy? For example, an iPad in portrait orientation puts the capture button on the right hand side. This seems like a place where handedness would take priority. But there are other situations where the inverse would be true? I didn't see specifics about gestures in the HIG article, so I was wondering if I just missed something or if there was some type of helpful underlying principle to keep in mind. Those are thought-provoking questions, <@U03JCRFMPHV>, and I likely won\u2019t have any satisfying answers to your larger question in this forum. It does seem like Handedness and how it applies to User Interface Design is a topic that I\u2019m not the best person to answer, though I\u2019ll see if there are any other colleagues of mine who may have an answer for you. The overall rule is that the design layout in RTL matches the flow that the user would expect elements to flow in the UI - including the text strings, animation, navigation (E.g. If the heat map of people that uses an LTR layout - e.g. website - is on the top left corner, it would be top right corner in RTL). The only thing that we should take care of is: Reachability: if the design intention is to have an element closer to the right hand - then it should not be changing because of the RTL layout (E.g. the keyboard layout does not change when you switch LTR or RTL / emojis entry point would be at the same exact place). Other elements that could impact our decisions while changing to RTL layout: 1. Memorization: If the UI component would be very connected to how user would remember things, it should not change (E.g. the order of the lock screen numbers remain the same in both RTL & LTR) 2. Images, videos, backgrounds should not also be impacted (E.g. the weather App background). <@U03JCRFMPHV> Let me know what do you think. This is very interesting, thank you for sharing some of the methodology in your design thinking. I was surprised to see elements like system level scroll bars flip to the left side. It's never been under my thumb before. Seems disadvantageous for RTL righties? <@U03J83F2TDE> That\u2019s a really great question <@U03JCRFMPHV> Two angles for this: (which are up for discussion too) :slightly_smiling_face: \u2022 In the layout, having scroll bars usually is on the other side where your attention should be. \u2022 And for reachability, I usually think about it device by device. On macOS - which I think is where scroll bars are used the most - there is no reachability issue as it is not touch based. Touch based devices are less likely to rely on it and it is used as an indicator more than an interactive piece of the UI as we use swipe instead. And even on iPad for example if we decide to use it, we mostly hold it with two hands and the left hand solves it too. Definitely. I can honestly say that having the scroll bar under my thumb for the first time\u2026 and to not have my scrolling thumb blocking the icons in lists for example, was a brand new experience. Especially on the larger phone, it makes reaching the compose button much easier :joy:. Interesting to see places where steps were taken to counteract reachability issues. Like floating the iPad portrait camera capture button to the right. Thank you for your thoughtful response! <@U03J83F2TDE> You\u2019re always welcome <@U03JCRFMPHV> Nice questions :D Hi there! Didn't have time to check out the new resources yet (but will do in the future for sure!). Could you tell me what are the main key points that we should take into account when designing apps targeting an international audience? Hi <@U03JRP87THN>, there\u2019s no succinct answer for this; so, I would highly recommend checking out https://developer.apple.com/videos/play/wwdc2018/201/?time=1665|Creating Apps for a Global Audience , https://developer.apple.com/videos/play/wwdc2022/10110/|Localization by example , and https://developer.apple.com/videos/play/wwdc2022/10107/|Get it Right (to Left) to build up an understanding of what you should take into account when designing apps for an international audience. <@U03JRP87THN> I would say, generally speaking look out for two things: 1. Language: design layouts may be impacted by RTL languages Orientation or the less dense text strings in CJK languages. Another example is that certain scripts require different bounding boxes or spacing whether less or more than latin (E.g. Thai needs more vertical spacing in the UI to avoid clipping). 2. Culture: What are the cultural behaviors and nuances that can impact the features you support, the hierarchy or the elements in the UI, or simply the visual language (E.g. colours that could be perceived differently in different cultures). Thank you! Will look into the resources. Should RTL (specifically Arabic) text work out of the box using SwiftUI on watchOS 8? Are there any configurations or SwiftUI properties that might break it? I have a Watch app and RTL seem to work fine (I can\u2019t read them but they look okay) but I\u2019ve gotten feedback that they fail for some users \u2014 Arabic text is \u201cbackwards\u201d and the characters aren\u2019t joined like they should be. I\u2019m just using Text so I can\u2019t see why this would happen. I can provide screenshots in the thread if possible. Hi Christopher! I think I may have an idea of what issue you\u2019re encountering, but to be sure, a screenshot would definitely help. Please feel free to share. Sure, here's the same text on watchOS and iOS. I've been unable to reproduce the this with my own strings but I don't have a copy of this exact text. I see; there are two different issues going on here. The Watch screenshot demonstrates broken and completely illegible Arabic text, and it\u2019s also not using the System Font. It\u2019s difficult to be sure about what\u2019s going on here without a sample app to reproduce this issue in. I am setting the Text\u2019s font using UIFont and a FontDescriptor so I'd guess that's the culprit One thing I will note is that in the Watch screenshot, the title \u0627\u0644\u062a\u062d\u0631\u064a\u0645 is rendering correctly, but the body text below that is what\u2019s completely broken. Not sure why it fails for some RTL strings and not others It\u2019s possible that the specific font you\u2019re using supports Arabic glyphs, but not the appropriate shaping. I should note that the alignment in both the iOS and watchOS screenshot is unnatural for Arabic, i.e. the text is left-aligned instead of right-aligned. Does this app localize into Arabic, i.e. have ar.lproj or is it localized into another language and this content is being loaded at runtime? The app is localized in Russian, which is what this user is set to. And then he's entered Arabic text. I'm using the system font but applying a design: Here's another example where (I think?) all the text is working fine: indeed that does look correct I see. Nothing jumps out to me immediately as being wrong here. I would really appreciate it if you could file a Feedback Report with a sample app which demonstrates this issue. I would love to look into this problem further. Yes, the second screenshot here looks correct; I also see that it\u2019s using the System Font. have you ever been able to reproduce this locally, or are your only reports of this from user(s)? I have not been able to reproduce (second screenshot is mine). I've asked the user to send me the text itself so I can try it. Unfortunately I haven't been able to copy that Arabic text out of the iPhone screenshot. To start, I think it would be good to file a feedback with as much of your watch app as you can reasonably include (with build instructions if needed beyond build and run) and these screenshots. Out of curiosity, was the iPhone screenshot above also from the same user? I happened to notice that one of the UI elements was rendering text using the Urdu font, and it\u2019s possible that that is the clue to when this issue reproduces, i.e. when Urdu is added to the preferred languages list (higher than Arabic, if Arabic is also present). Yes, that iPhone screenshot was from the same user. Okay, I'll put together a Feedback with whatever I can get. Thanks! Good spot! I was also wondering why the Arabic text was shaped like this on the navigation bar, but it\u2019s actually Urdu! Please do post the feedback number once you have that filed back in this thread. Thanks again! How can I right align Arabic text in push notifications efficiently when only the app language is Arabic not the entire device. Thanks for raising this use case. Can you please describe your use case in a bit more detail in a Feedback report, sharing the number here? We\u2019ll follow up there. I am working on an application which has two languages English and Arabic, now users can change the app language whenever they want. So ideally if the app language is English the text displayed in push notifications is left aligned as it should be, but when the app language is Arabic the text should be right aligned but it's not. Even when the app is in Arabic the text in push notifications is left aligned. While the rest of the app is completely right aligned. Thanks <@U03J6B7G2QN>, that is a great description. If you don\u2019t mind reporting that via the Feedback tool, it makes it easier for us to track a solution internally, and follow up with you beyond the Digital Lounge. Here FB10161536 Hi. Is the generated xcloc file will fetch all strings update in every export? Yes, running Export Localizations will re-process your source code to extract any newly added, removed, or changed strings and include them in the exported localization catalog. It will also include the existing translations when exporting for languages other than English. That\u2019s Weird. Becoz I found it only works at the 1st time. Then all xcloc will follow the version of the 1st import\u2026 https://wwdc22.slack.com/archives/C03H786M2V8/p1654879512571169?thread_ts=1654804988.358809&cid=C03H786M2V8 I can follow up in your other thread ok thx So if I have a SwiftUI or UIKit notes app that\u2019s not localized in any RTL languages but a user enters RTL text, am I correct that the expected behavior is that the text itself will appear RTL but will be left-aligned? Is there an easy way to get this to appear right-aligned, or would I have to analyze the language myself? Or is this undesirable behavior in an otherwise left-aligned app? On iOS, when a user enters text into a text field or text view, the alignment follows the default alignment of the keyboard, and you should not need to do anything extra on top of this. If that text is then displayed in a UILabel, for example, the alignment would be based on the UI language, rather than the content of the label itself. If you have a use case for something more automatic, please do file a feedback describing it in more detail. Okay thanks Hello Devs, We have localization Strings being delivered by Middle ware and get updated and stored in Application Directory on each app launch. Where we used to load them using \u2018Localizable. nocache\u2019 as mentioned on Apple Docs. However this slow down the Ul performance way too much. As it seems it would load whole strings map for each call to NSLocalizationString. Can you suggest a work around? Thanks Fahied Hi Muhammad! .nocache should only need to be used if: \u2022 the strings table has already been loaded during your app processes lifetime, \u2022 the table is known to have been updated based on some other signal Use of .nocache is expected to have some performance overhead so some techniques to reduce are : \u2022 Use it as sparingly as necessary (ie is it really user critical to get non-cached strings) \u2022 Consider re-organizing the strings tables into smaller tables that map to user activities so that unnecessary strings aren\u2019t being loaded into memory Hi Muhammad, can you also file a feedback report about your specific use case so we can look into enhancement in this area too? Sounds great, I ll do that. The problem is really If I load Strings without .nocache, It will not load the updated strings even though the same source files .strings is overriden or even you force load main bundle again. That's right. The strings files are cached by bundle when bundle is created. Since there's no way to really \"unload\" a bundle, the cached resources remained cached Depending on the scope of your project, you can consider having a separate XPC service to load the strings, and kill and relaunch the service when you get a notification when the strings are updated, if such feedback is available via your middle ware Would there be any possibility for iOS in term of XPC service? Ah.. sorry I didn't ask about your environment first. Unfortunately I don't think so I thought may be you guys holding on to something :smile: Not sure it's a bug bug if my development lanugage is english but if I don't add English in my Localization it going to display other language. The work around I did now is add empty english localization file for each file? Can you clarify your project setup? In general, your development localization should be one of your app localizations. Prior to iOS 16/macOS Ventura, it was required that your app bundle also contain a corresponding lproj folder for the development language, but you should not need any empty files.","title":"L10n & i18n"},{"location":"wwdc22/localization-and-internationalization.html#localization-and-internationalization-lounge-qas","text":"","title":"Localization and internationalization Lounge QAs"},{"location":"wwdc22/localization-and-internationalization.html#by-emin","text":"","title":"by emin"},{"location":"wwdc22/localization-and-internationalization.html#sometimes-there-is-a-difference-in-font-sizewidthheight-between-ltr-and-rtl-how-can-we-make-this-better","text":"There are a couple of things you could be seeing and I\u2019d like to understand which it might be. The System Font for some languages like Arabic (which is RTL) uses a taller line height than other languages, which you will notice if you\u2019re using Text Styles and have multiline labels or even in the default cell heights in Table Views. In fact, we recommend using Text Styles to ensure that you do get this language-specific tailoring. Different System Fonts also may have different relative font weights and sizing and it\u2019s possible that what you\u2019re seeing is as a result of that. Do either of these sound like what you may be observing? yep, the first one. In that case, this is correct and expected behaviour, because different languages require different line heights to ensure that text doesn\u2019t overlap across lines and has room to breathe. Are you encountering any problems with this? Sometimes when let's say my use case when u have a cell with both English and Hebrew together, it looks abit weird, thought mby equaling their actual height of one of them is the best practice but i'm not sure. a 10.0 font size in some Hebrew font can be smaller than a 10,0 font size of SF English f.e That\u2019s true. For example, if we compare \u201cWelcome\u201d and \u201c\u05d1\u05e8\u05d5\u05db\u05d9\u05dd\u201c, Hebrew will not be as tall as the capital letters in English and the Hebrew letters are slightly taller than the small letters in English. This is something that varies by script and we cannot expect that the heights will be equal. Generally speaking, the way the System Fonts on iOS, macOS, etc. are designed, if you are using a Text Style, you should get a reasonable size for the text across various scripts. Thank you! To be clear, Hebrew does not use a different line height compared to English. It does, however, use a different UI font, which is why you're seeing this difference, as it is difficult to perfectly match up metrics between two independent fonts.","title":"Sometimes there is a difference in font size(width/height) between LTR and RTL , how can we make this better?"},{"location":"wwdc22/localization-and-internationalization.html#our-app-includes-multiple-tutorials-each-tutorial-is-in-its-own-directory-with-tutorial-data-images-and-localizablestrings-files-for-localized-text-for-just-this-tutorial-this-makes-it-easy-for-us-to-add-new-localized-tutorials-without-having-to-modify-the-apps-main-localizablestrings-file-is-there-a-way-to-include-these-localizablestrings-files-for-the-many-tutorials-in-the-output-when-we-use-export-for-localization-in-xcode-or-are-we-going-about-this-wrong","text":"Hi! Can you elaborate a little on how you are setting up these files in your projects? For example, are they part of a target, or do you save them as a pre-created bundle? They are currently in reference folders in Xcode. In the main project and target. Our recommendation would be to convert these to bona fide bundle targets in your project. That would allow them to be properly extracted automatically. As long as the localizable assets are part of a \u201cCopy Resources\u201d phase in your target, they should be extracted when doing Product > Export for Localization. As <@U03HW7PE3SM> mentioned, you can have a \u201cBundle\u201d target for each of your tutorials and then include the localizable resources in each bundle. Then you can include these bundles in your main application target. I'm not familiar with the process of creating bundle targets. But we have over 1000 tutorials and that may be a lot of overhead. The root Tutorials reference folder is included in the Copy Bundle Resources build phase. But I don't see the Localized.strings files, which are in sub folders, in the results from Export for Localization. Yeah, unfortunately Xcode does not look through folder references for strings files \u2014 they are meant to add a folder to your product as-is, without any postprocessing. As <@U03HWDD6RED> mentioned, Xcode does not export the \u201cblue\u201d folder references. One thing you might be able to try is moving all of your tutorials into a Swift package. Xcode 14 adds support for exporting Swift packages for localization and Swift packages are represented by a folder on-disk. Any other suggestions for organizing tutorial or lesson files to be localized? We would like to use Xcode's great localization tools as much as possible. <@U03HJA9JVGA>\u2019s suggestion will let you do just that, for when you can adopt Xcode 14, and is probably your best bet going forward. You can include the \u201cTutorials\u201d Swift package inside of your app\u2019s Xcode project and then when you export for localization\u2014it should include all of the localizable assets and strings in the .xcloc Ok. Thanks! Give it a try and if you run into issues, please feel free to file a report with Feedback Assistant!","title":"Our app includes multiple tutorials. Each tutorial is in its own directory with tutorial data, images and Localizable.strings files for localized text for just this tutorial. This makes it easy for us to add new localized tutorials without having to modify the app's main Localizable.strings file.  Is there a way to include these Localizable.strings files for the many tutorials in the output when we use Export for Localization in Xcode?  Or are we going about this wrong?"},{"location":"wwdc22/localization-and-internationalization.html#hi-all-when-editing-an-xloc-file-in-xcode-im-missing-one-key-feature-filtering-or-sorting-the-list-of-keys-by-whether-or-not-they-were-translated-into-the-second-language-i-seem-to-only-be-able-to-sort-alphabetically-am-i-missing-something","text":"Hi Jan! As you pointed out, Xcloc Editor supports sorting alphabetically and filtering by search terms, but does not support filtering by \u201ctranslated\u201d or \u201cuntranslated\u201d strings. This is great feedback though! If you would benefit from this feature, please file a feedback report and paste the ID in this thread. Thank you <@U03H3NEH4CX>, submitted at FB10114561 Perfect, thank you!","title":"Hi all! When editing an .xloc file in XCode, I'm missing one key feature: filtering or sorting the list of keys by whether or not they were translated into the second language. I seem to only be able to sort alphabetically. Am I missing something?"},{"location":"wwdc22/localization-and-internationalization.html#hi-is-there-a-built-in-workflow-in-xcode-to-localize-settings-bundles-in-a-way-that-xcode-would-export-all-the-relevant-strings-to-string-files-and-the-export-localizations-menu-command-would-include-those-automatically-into-the-exported-xliff-files","text":"Hi Daniel! Xcode supports localization export for Settings bundles that are named \u201cSettings.bundle\u201d and contain .strings files. If this isn\u2019t working for you, can you explain the setup you\u2019re using and the behavior you\u2019re experiencing? Hi Matt, ok, I understand what my problem was. As you mentioned, the strings from the Settings.bundle plist are actually exported correctly. I'm in addition using the third party https://github.com/futuretap/InAppSettingsKit|InAppSettings framework , which builds on the Settings.bundle format but supports additional key/values and can be embedded into the app. It was its InAppSettings.bundle where the strings weren't automatically exported from the plist. Thanks for the answer! Ahh, glad you were able to find the problem! Yes, thanks again!","title":"Hi! Is there a built-in workflow in Xcode to localize settings bundles? In a way that Xcode would export all the relevant strings to .string files and the Export Localizations menu command would include those automatically into the exported .xliff files?"},{"location":"wwdc22/localization-and-internationalization.html#how-would-you-handle-the-case-where-you-want-to-provide-variations-in-a-language-for-example-i-want-to-provide-localization-for-the-word-colour-uk-people-would-see-colour-but-us-people-would-see-color-is-there-a-way-so-all-other-text-is-shared-but-i-could-localize-that-one-word","text":"Hi! Unfortunately, once we find a strings table for a specific lproj, we use the contents of that table as they are without doing any more fallbacks. For example, you can localize a table for en_GB, but it has to contain all strings, even those that are the same as other English localizations. Seems like their should be a hierarchy in the string handling where you can have an overlay (e.g for GB) that only needs to contain the differences to another version (e.g US) Ah ok, that's too bad. Are there any plans to be able to do so? Is it worth it to file feedback about it? On the plus side, you can in fact localize for English variants, like English (UK), English (Ireland), and so on. Yeah, it would be wonderful to have a feedback! Thanks! Created FB10115590 :blush:","title":"How would you handle the case where you want to provide variations in a language? For example I want to provide localization for the word colour. UK people would see colour, but US people would see color. Is there a way so all other text is shared but I could localize that one word?"},{"location":"wwdc22/localization-and-internationalization.html#how-do-we-format-and-sort-time-values-in-a-localized-way-for-example-if-im-showing-a-list-of-hours-of-operation-for-the-week-the-time-strings-will-be-different-24-hr-vs-12-hr-and-the-order-of-the-week-days-will-be-different-starting-on-monday-vs-sunday","text":"Hi! For sorting, it would be best to sort based on the original binary data, then use .formatted() to produce a localized time and/or date. could you clarify what \u201coriginal binary data\u201d means? How are you storing the days/hours prior to localization? For example, is it a Date , or are you receiving the data in some other form? it would be a JSON from an API response in english, { day: 0, start: \"0700\", end: \"2300\" } and 0 means sunday as specified in the API Got it. You should be able to sort directly on those strings. For the first day of the week issue, you can check Calendar.firstWeekday . (on the current user default calendar) To produce formatted times, you'll need to convert the strings to a Date object, then use .formatted() with the appropriate options to produce the string you want. thank you!! You should be able to put a weekday/hour/minute in DateComponents and then use Calendar to make a Date from that. You can then make a DateInterval from two Dates for the range (e.g. \"9 AM - 5 PM\") and then use .formatted() on that. One more note: when using Calendar to convert DateComponents to Date , set the time zone to GMT to avoid Daylight Time issues. Same with .formatted()","title":"How do we format and sort time values in a localized way? for example, if i'm showing a list of hours of operation for the week, the time strings will be different (24 hr vs 12 hr), and the order of the week days will be different (starting on monday vs sunday)."},{"location":"wwdc22/localization-and-internationalization.html#we-have-an-app-that-has-english-only-features-lets-imagine-thats-as-an-advanced-assistant-for-editing-english-texts-and-our-assistant-doesnt-support-other-languages-if-we-localize-our-app-would-it-improve-user-experience-for-people-who-use-english-as-a-second-language-or-would-it-only-confuse-them-on-why-their-main-language-is-not-supported-since-we-only-expect-english-texts-for-now","text":"Hi Roman, I think it\u2019ll depend on exactly what your app does. For example, hypothetically, if you have an app that points out grammar notes about English, it might still be useful for people to see that information in a language they find easier to understand than English. So, if you can share details, I might be able to help give you a more specific, helpful answer :slightly_smiling_face: Basically, it is an editor app, which has users' documents. When user creates the doc and fills it with a text, he receives grammar suggestions, as well as clarity, fluency, readability and other suggestions. Each suggestion is a card that has: \u2022 previous word/sentence and the resulting sentence \u2022 detailed explanation of why the user should apply this suggestion in that particular context - like because it sounds unconfident, or because it has a grammatical error, and so on Right\u2026 I think some users\u2014especially those who have less familiarity with English to begin with\u2014could certainly benefit from localization. However, you may want to be cautious about (a) which languages you choose, and (b) how you separate out the \u201ccontent language\u201d (English) from the \u201cUI language\u201d so that there\u2019s no confusion or aesthetically displeasing mixture of languages. I've been thinking about some extra flow to suggest users who are not from EFL countries to have some pieces of the content being translated to their native language, just like that hint on why they should apply that alert. However, I dunno if users would be ok with English interface since they already write some English texts and the interface is primitive enough to be understandable. But at the same time having some interface parts in the native language, like we as an app just forgot to translate everything :sweat_smile::sweat_smile: You\u2019re thinking about all the right things! And it\u2019s true that with English being the lingua franca in today\u2019s world, many people might be familiar enough with the English user interface such that they won\u2019t need localization. However, it\u2019s always handy to have choices, and your users can also go into Settings to switch your app to English if that\u2019s what they prefer. In terms of making sure that the localization doesn\u2019t look partial or incomplete, I would definitely suggest making sure that any \u201cchrome\u201d (i.e. UI elements) is translated consistently in each of the languages you target. For example, if the tables are turned and your app is actually for helping people with French, as a French learner, I would appreciate it if I could use it in English and see suggestions like this: > The verb bouffer could be too formal. Consider using d\u00e9jeuner or manger . I\u2019m limited by what I can do in Slack here stylistically, but you can see that I have marked the text in the content language in a different style than the UI language, which gives me clarity as the user as to what\u2019s going on and where the language boundaries are. That's exactly what I've been thinking about. Last one - if you will have those suggestions in English, having French texts, would you as a new user prefer having whole app interface in English? Wouldn't you start typing in English instead of French, since the app is fully localized?)) Yes, I suppose I might! It\u2019s hard to answer that in the abstract though without knowing exactly what the app looks and feels like. It all depends on which direction your app\u2019s design steers the user in. Yeah, well... I'm talking about Grammarly app for iOS. Would be great to learn your thoughts on that. Oh, interesting! I was guessing that this sounded like Grammarly! I would suggest looking at your app\u2019s usage and tackling one market as an initial foray, e.g. China or Japan, and see what feedback you get from your customers :slightly_smiling_face: Personally, I don't know that the app being localized in a given language would necessarily imply that I can input text in that language (though obviously it's ideal!). Taking for example our own products, we localize all features of the OS into all languages completely, including things like Apple Pay Later that might only be available in some regions.","title":"We have an app that has English only features. Let's imagine that's as an advanced assistant for editing English texts and our assistant doesn't support other languages.  If we localize our app, would it improve user experience for people who use English as a second language, or would it only confuse them on why their main language is not supported, since we only expect English texts for now?"},{"location":"wwdc22/localization-and-internationalization.html#theres-probably-no-right-way-to-do-this-but-when-working-with-localized-strings-in-code-do-you-recommend-using-the-new-string-initializer-which-looks-great-btw-directly-throughout-the-app-or-creating-for-example-a-file-with-enums-that-return-those-localized-strings","text":"We strongly recommend that you use String(localized:\u2026) , AttributedString(localized:\u2026) or in Objective-C NSLocalizedString and NSAttributedLocalizedString ! If you do that, Xcode can extract strings for you to provide to your localizers \u2014 it knows how to recognize these macros and initializers and how to produce a xcloc bundle that contains them all, and then reintegrate it into your project. String constants used with other mechanism will not be recognized by this mechanism, and you will have to manually handle extraction into .strings files and any changes going forward. Note that SwiftUI also uses the LocalizedStringKey type, and Xcode also knows about it. So, when you write Text(\"Hello, world!\") , since Text(\u2026) takes a LocalizedStringKey , Xcode will also know to extract it. In Swift, you can even use String interpolation to include variables directly in the initializer String(localized: \"Welcome to \\(newCity)\", comment:\"Large headline label welcoming the user to their new location, the variable refers to the city name.\") Please make sure to explain what the variable refers to, so that translators have that knowledge, too :slightly_smiling_face: Yup! This works in String(localized:\u2026) , AttributedString(localized:\u2026) and in SwiftUI. As long as you\u2019re using this setup, in general, you\u2019re golden \u2014 if you\u2019re using enums to represent your strings, just make sure that they\u2019re calling into these functions. In general, using enums may complicate your patches a little and interact weirdly with SwiftUI if you try to pass String s to SwiftUI initializers that expect localized keys.","title":"There's probably no right way to do this, but when working with localized strings in code, do you recommend using the new string initializer (which looks great btw!) directly throughout the app, or creating, for example, a file with enums that return those localized strings?"},{"location":"wwdc22/localization-and-internationalization.html#hello-can-the-localizablestrings-updates-itself-the-first-time-export-and-import-is-okay-however-when-the-project-contains-a-localizablestrings-file-then-the-next-export-will-not-contain-new-strings-added","text":"Hi ChakMing! The expected flow is as follows: 1. Have some strings in your project (either .strings files or strings in code) 2. Export Localizations, which includes all strings in an xcloc 3. Translate the xcloc 4. Import Localizations with the translated xcloc (This step updates/adds .strings files in/to the project.) 5. Exporting again should include all strings in the project (including those previously imported) in the xcloc If this is not working as expected, please file a feedback so that we can take a look. <@U03H3NEH4CX> Hello again. Here\u2019s what I found. At initial, the export will include all strings. If I imported the xcloc, it will generate Localizable Files. Then I add more words on SwiftUI, and export. The xcloc is still using the old localizable file. I thought it had been happening for a long time\u2026 Do you think it is a bug, or is this correct? So my expectation here is that the second export would include both the strings in your SwiftUI code and the strings in the .strings files that the import created. Xcode won\u2019t remove stale translations automatically, because those translated strings can be a valuable resource if you ever need to translate them again. However, please feel free to file a feedback request if you think we should change the flow here! I just re-export and seems it works this time! Thanks, <@U03H3NEH4CX> <@U03HBMCRX0E>","title":"Hello. Can the Localizable.strings updates itself? The first time export and import is okay. However, when the project contains a  Localizable.strings file then the next export will not contain new strings added."},{"location":"wwdc22/localization-and-internationalization.html#hello-how-can-we-make-sure-the-system-and-voiceover-identify-a-certain-texts-language-correctly-is-there-a-tag-we-can-set-somewhere-im-asking-for-both-web-and-apps-it-happens-from-time-to-time-where-the-system-falsely-identifies-urdu-for-arabic-or-recently-on-ios-16-persian-for-arabic-how-can-we-improve-this","text":"If you know the language of your text, you can annotate it with that language. For web content, you can use the https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang|lang attribute, which can be applied to any HTML element, including &lt;p&gt; , &lt;span&gt; , and &lt;body&gt; . For app content, you can create an attributed string and set the NSLanguageIdentifierAttributeName to the language code of the corresponding text. If you have reproducible strings that are incorrectly identified, we would love to have feedback with those examples as well! Here\u2019s the feedback ID: FB10152753 It fails on everything. Here are some example texts: \u0645\u0646 \u0633\u0639\u06cc\u062f \u0647\u0633\u062a\u0645 \u0627\u0645\u0631\u0648\u0632 \u0628\u0631\u06cc\u0645 \u0631\u0633\u062a\u0648\u0631\u0627\u0646\u061f \u0686\u0647 \u062e\u0628\u0631\u061f <@U03HW7PE3SM> Thanks! We\u2019ll be sure to pass this along.","title":"Hello. How can we make sure the system and VoiceOver identify a certain text\u2019s language correctly. Is there a tag we can set somewhere? I\u2019m asking for both web and apps. It happens from time to time where the system falsely identifies Urdu for Arabic, or recently on iOS 16, Persian for Arabic. How can we improve this?"},{"location":"wwdc22/localization-and-internationalization.html#whats-the-best-way-to-use-two-custom-fonts-non-sf-pro-for-marketing-reasons-for-arabic-and-latin-scripts-the-most-challenging-part-is-that-the-text-could-be-bilingual-and-it-may-come-from-the-server-for-instance-wwdc-i-want-two-fonts-to-be-used-for-this-snippet","text":"It looks you forgot to answer this. You can do it by setting https://developer.apple.com/documentation/coretext/kctfontcascadelistattribute|kCTFontCascadeListAttribute , either have the primary font be the Latin font, then have the cascade list contain your Arabic font (the way we do it for our system), or the other way around. Another option is to use (NS)AttributedString and set the fonts on the individual segments of the string. The thing is I mostly don\u2019t have access to the text beforehand. Let\u2019s say it\u2019s coming from a server. Then the font fallback list (as above) is best. Note that in addition to the CoreText version above, there's also https://developer.apple.com/documentation/uikit/uifontdescriptorcascadelistattribute/|UIFontDescriptorCascadeListAttribute and https://developer.apple.com/documentation/appkit/nsfontcascadelistattribute/|NSFontCascadeListAttribute , if you're using higher-level text APIs.","title":"What\u2019s the best way to use two custom fonts (non SF Pro for marketing reasons) for Arabic and Latin scripts? The most challenging part is that the text could be bilingual and it may come from the server. For instance, \u201c\u0628\u0647 WWDC \u062e\u0648\u0634 \u0622\u0645\u062f\u06cc\u062f\u201d. I want two fonts to be used for this snippet."},{"location":"wwdc22/localization-and-internationalization.html#is-there-a-non-hacky-way-to-force-a-single-language-for-an-app-lets-say-the-app-only-supports-ar-sa-and-the-users-device-language-is-set-to-en-us-i-used-to-set-a-value-for-a-certain-in-key-in-userdefaults-at-launch-to-make-it-work","text":"You should not need to set any user defaults. Simply make sure that the developmentRegion in your project.pbxproj is set to the correct language and that all your localizable files are in the correct lproj. If your app does not have an lproj folder, you will need to be on iOS 16, macOS 13, tvOS 16, and watchOS 9 to get correct behavior.","title":"Is there a non-hacky way to force a single language for an app? Let\u2019s say the app only supports \u201car-SA\u201d and the user\u2019s device language is set to \u201cen-US\u201d. I used to set a value for a certain in key in UserDefaults at launch to make it work."},{"location":"wwdc22/localization-and-internationalization.html#is-there-a-way-to-force-the-numeral-system-for-an-app-for-instance-the-user-may-have-chosen-as-their-numbering-system-of-choice-where-it-only-make-sense-in-our-app-to-show-numbers-as-123-one-thing-thats-still-missing-and-id-already-filed-a-report-as-i-remember-is-choosing-the-numeral-system-when-changing-the-language-for-a-specific-app-now-you-can-only-change-the-numeral-system-when-you-change-the-device-language-as-a-whole","text":"Simply don\u2019t localize the numbers (e.g. don\u2019t use a formatter) and the numbers should be preserved as the literals you are using in your code. Do you have a code sample to share to elaborate more on the issues you are seeing? I think I phrased my question wrong. For instance, install Whatsapp on a device whose locale is set to English - United States. Then, go to Whatsapp settings page inside system Settings and change its language to Persian. Now Open Whatsapp. You\u2019ll see the system keyboard has number row in Latin. Whereas in iMessage on the same device it\u2019s in \u06f1\u06f2\u06f3\u200d form. <@U03JPJ277SQ> IMHO, this may be a bug. Do you mind reporting this bug and sharing the FB # here? <@U03J83G0WQG> Here it is: FB9647599. I believe we already discussed this on Twitter as well.","title":"Is there a way to force the numeral system for an app? For instance, the user may have chosen \u2018\u06f1\u06f2\u06f3\u2019 as their numbering system of choice where it only make sense in our app to show numbers as \u2018123\u2019. One thing that\u2019s still missing and I\u2019d already filed a report as I remember, is choosing the numeral system when changing the language for a specific app. Now you can only change the numeral system when you change the device language as a whole."},{"location":"wwdc22/localization-and-internationalization.html#when-i-release-my-apps-i-can-usually-find-some-people-to-help-me-translate-the-initial-release-but-over-time-it-makes-it-difficult-for-me-to-create-updates-which-require-new-translation-strings-any-best-practices-you-would-have-there-for-indie-developers-that-dont-have-a-lot-of-resources-to-pay-20-translators-for-each-release","text":"It is understood that adding languages to your application can become quite the commitment \u2014 not just a commitment in the moment, but also going forward. It does pay off to make a plan in which you can sit down and think whether you can do so sustainably for every single feature you do, including adding languages to your application. Sometimes, it is a valid choice to know that the time may just not be there every release, and to choose perhaps to support fewer languages. At other times, community-supported projects may be able to elicit contributions from the community that can help where a single developer may not, depending on what your relationship is with that community. But it is very much a commitment \u2014 often an economic one \u2014 you may want to think about as an ongoing task that requires care and maintenance. Just to clarify \u2014 you are not having issues with filtering out new strings from old ones, correct? in other words, using the Xcode import/export workflow, you should be able to only have to deal with new/changed strings on every release, rather than re-translating the entire app. There are third-party services that offer (human) translation as a service for your localizable strings. But you'll have to document your strings well, or they may get the context wrong and mistranslate.","title":"When I release my apps I can usually find some people to help me translate the initial release. But over time it makes it difficult for me to create updates which require new translation strings. Any best practices you would have there for indie developers that don't have a lot of resources to pay 20+ translators for each release?"},{"location":"wwdc22/localization-and-internationalization.html#we-saw-that-this-year-youre-adding-punctuation-to-hebrew-thank-you-for-that-besides-the-obvious-addition-to-the-hebrew-keyboard-is-there-anything-else-we-should-know-about-that","text":"Hi <@U03J1TN6WBD>, we have indeed added niqqud support to the iPhone & iPad keyboard layouts this year. There\u2019s nothing else new for Hebrew this year per se, but it\u2019s worth mentioning that Yiddish is also now supported as a separate keyboard language. Thank you! a dank","title":"We saw that this year you're adding punctuation to Hebrew (Thank you for that! \u05ea\u05d5\u05d3\u05d4 \u05e8\u05d1\u05d4) Besides the obvious addition to the Hebrew Keyboard is there anything else we should know about that?"},{"location":"wwdc22/localization-and-internationalization.html#maybe-a-slightly-tangential-question-but-are-there-learnings-or-strategies-used-during-rtl-localization-that-could-be-beneficial-for-adapting-a-ui-with-significant-lateral-elements-for-left-handed-use-does-handedness-come-into-play-when-considering-the-design-of-rtl-uis","text":"We treat Handedness and Layout Directionality as distinct elements and handle each of those in different ways. For example, for the One-Handed Keyboard, we offer both Left-Handed and Right-Handed modes. UI elements or gestures that indicate a progression that go left-to-right in an LTR language do mirror to go right-to-left in an RTL language. So, handedness does not come into play here. This is all fairly abstract, of course. If you have a concrete example that you want to ask about, do feel free to share it :) I guess, as a lefty, I never really understood how an adaptive layout could really change how someone uses a device until I started looking at how RTL languages are handled in the HIG. The chevrons in lists are meant to point towards the thumb you use to tap them :exploding_head:. I would imagine that the inverse could be true in RTL situations\u2026 has that changed your design strategy? For example, an iPad in portrait orientation puts the capture button on the right hand side. This seems like a place where handedness would take priority. But there are other situations where the inverse would be true? I didn't see specifics about gestures in the HIG article, so I was wondering if I just missed something or if there was some type of helpful underlying principle to keep in mind. Those are thought-provoking questions, <@U03JCRFMPHV>, and I likely won\u2019t have any satisfying answers to your larger question in this forum. It does seem like Handedness and how it applies to User Interface Design is a topic that I\u2019m not the best person to answer, though I\u2019ll see if there are any other colleagues of mine who may have an answer for you. The overall rule is that the design layout in RTL matches the flow that the user would expect elements to flow in the UI - including the text strings, animation, navigation (E.g. If the heat map of people that uses an LTR layout - e.g. website - is on the top left corner, it would be top right corner in RTL). The only thing that we should take care of is: Reachability: if the design intention is to have an element closer to the right hand - then it should not be changing because of the RTL layout (E.g. the keyboard layout does not change when you switch LTR or RTL / emojis entry point would be at the same exact place). Other elements that could impact our decisions while changing to RTL layout: 1. Memorization: If the UI component would be very connected to how user would remember things, it should not change (E.g. the order of the lock screen numbers remain the same in both RTL & LTR) 2. Images, videos, backgrounds should not also be impacted (E.g. the weather App background). <@U03JCRFMPHV> Let me know what do you think. This is very interesting, thank you for sharing some of the methodology in your design thinking. I was surprised to see elements like system level scroll bars flip to the left side. It's never been under my thumb before. Seems disadvantageous for RTL righties? <@U03J83F2TDE> That\u2019s a really great question <@U03JCRFMPHV> Two angles for this: (which are up for discussion too) :slightly_smiling_face: \u2022 In the layout, having scroll bars usually is on the other side where your attention should be. \u2022 And for reachability, I usually think about it device by device. On macOS - which I think is where scroll bars are used the most - there is no reachability issue as it is not touch based. Touch based devices are less likely to rely on it and it is used as an indicator more than an interactive piece of the UI as we use swipe instead. And even on iPad for example if we decide to use it, we mostly hold it with two hands and the left hand solves it too. Definitely. I can honestly say that having the scroll bar under my thumb for the first time\u2026 and to not have my scrolling thumb blocking the icons in lists for example, was a brand new experience. Especially on the larger phone, it makes reaching the compose button much easier :joy:. Interesting to see places where steps were taken to counteract reachability issues. Like floating the iPad portrait camera capture button to the right. Thank you for your thoughtful response! <@U03J83F2TDE> You\u2019re always welcome <@U03JCRFMPHV> Nice questions :D","title":"Maybe a slightly tangential question, but are there learnings or strategies used during RTL localization that could be beneficial for adapting a UI with significant lateral elements for left handed use? Does \u201chandedness\u201d come into play when considering the design of RTL UIs?"},{"location":"wwdc22/localization-and-internationalization.html#hi-there-didnt-have-time-to-check-out-the-new-resources-yet-but-will-do-in-the-future-for-sure-could-you-tell-me-what-are-the-main-key-points-that-we-should-take-into-account-when-designing-apps-targeting-an-international-audience","text":"Hi <@U03JRP87THN>, there\u2019s no succinct answer for this; so, I would highly recommend checking out https://developer.apple.com/videos/play/wwdc2018/201/?time=1665|Creating Apps for a Global Audience , https://developer.apple.com/videos/play/wwdc2022/10110/|Localization by example , and https://developer.apple.com/videos/play/wwdc2022/10107/|Get it Right (to Left) to build up an understanding of what you should take into account when designing apps for an international audience. <@U03JRP87THN> I would say, generally speaking look out for two things: 1. Language: design layouts may be impacted by RTL languages Orientation or the less dense text strings in CJK languages. Another example is that certain scripts require different bounding boxes or spacing whether less or more than latin (E.g. Thai needs more vertical spacing in the UI to avoid clipping). 2. Culture: What are the cultural behaviors and nuances that can impact the features you support, the hierarchy or the elements in the UI, or simply the visual language (E.g. colours that could be perceived differently in different cultures). Thank you! Will look into the resources.","title":"Hi there! Didn't have time to check out the new resources yet (but will do in the future for sure!). Could you tell me what are the main key points that we should take into account when designing apps targeting an international audience?"},{"location":"wwdc22/localization-and-internationalization.html#should-rtl-specifically-arabic-text-work-out-of-the-box-using-swiftui-on-watchos-8-are-there-any-configurations-or-swiftui-properties-that-might-break-it-i-have-a-watch-app-and-rtl-seem-to-work-fine-i-cant-read-them-but-they-look-okay-but-ive-gotten-feedback-that-they-fail-for-some-users-arabic-text-is-backwards-and-the-characters-arent-joined-like-they-should-be-im-just-using-text-so-i-cant-see-why-this-would-happen-i-can-provide-screenshots-in-the-thread-if-possible","text":"Hi Christopher! I think I may have an idea of what issue you\u2019re encountering, but to be sure, a screenshot would definitely help. Please feel free to share. Sure, here's the same text on watchOS and iOS. I've been unable to reproduce the this with my own strings but I don't have a copy of this exact text. I see; there are two different issues going on here. The Watch screenshot demonstrates broken and completely illegible Arabic text, and it\u2019s also not using the System Font. It\u2019s difficult to be sure about what\u2019s going on here without a sample app to reproduce this issue in. I am setting the Text\u2019s font using UIFont and a FontDescriptor so I'd guess that's the culprit One thing I will note is that in the Watch screenshot, the title \u0627\u0644\u062a\u062d\u0631\u064a\u0645 is rendering correctly, but the body text below that is what\u2019s completely broken. Not sure why it fails for some RTL strings and not others It\u2019s possible that the specific font you\u2019re using supports Arabic glyphs, but not the appropriate shaping. I should note that the alignment in both the iOS and watchOS screenshot is unnatural for Arabic, i.e. the text is left-aligned instead of right-aligned. Does this app localize into Arabic, i.e. have ar.lproj or is it localized into another language and this content is being loaded at runtime? The app is localized in Russian, which is what this user is set to. And then he's entered Arabic text. I'm using the system font but applying a design: Here's another example where (I think?) all the text is working fine: indeed that does look correct I see. Nothing jumps out to me immediately as being wrong here. I would really appreciate it if you could file a Feedback Report with a sample app which demonstrates this issue. I would love to look into this problem further. Yes, the second screenshot here looks correct; I also see that it\u2019s using the System Font. have you ever been able to reproduce this locally, or are your only reports of this from user(s)? I have not been able to reproduce (second screenshot is mine). I've asked the user to send me the text itself so I can try it. Unfortunately I haven't been able to copy that Arabic text out of the iPhone screenshot. To start, I think it would be good to file a feedback with as much of your watch app as you can reasonably include (with build instructions if needed beyond build and run) and these screenshots. Out of curiosity, was the iPhone screenshot above also from the same user? I happened to notice that one of the UI elements was rendering text using the Urdu font, and it\u2019s possible that that is the clue to when this issue reproduces, i.e. when Urdu is added to the preferred languages list (higher than Arabic, if Arabic is also present). Yes, that iPhone screenshot was from the same user. Okay, I'll put together a Feedback with whatever I can get. Thanks! Good spot! I was also wondering why the Arabic text was shaped like this on the navigation bar, but it\u2019s actually Urdu! Please do post the feedback number once you have that filed back in this thread. Thanks again!","title":"Should RTL (specifically Arabic) text work out of the box using SwiftUI on watchOS 8? Are there any configurations or SwiftUI properties that might break it? I have a Watch app and RTL seem to work fine (I can\u2019t read them but they look okay) but I\u2019ve gotten feedback that they fail for some users \u2014 Arabic text is \u201cbackwards\u201d and the characters aren\u2019t joined like they should be. I\u2019m just using Text so I can\u2019t see why this would happen. I can provide screenshots in the thread if possible."},{"location":"wwdc22/localization-and-internationalization.html#how-can-i-right-align-arabic-text-in-push-notifications-efficiently-when-only-the-app-language-is-arabic-not-the-entire-device","text":"Thanks for raising this use case. Can you please describe your use case in a bit more detail in a Feedback report, sharing the number here? We\u2019ll follow up there. I am working on an application which has two languages English and Arabic, now users can change the app language whenever they want. So ideally if the app language is English the text displayed in push notifications is left aligned as it should be, but when the app language is Arabic the text should be right aligned but it's not. Even when the app is in Arabic the text in push notifications is left aligned. While the rest of the app is completely right aligned. Thanks <@U03J6B7G2QN>, that is a great description. If you don\u2019t mind reporting that via the Feedback tool, it makes it easier for us to track a solution internally, and follow up with you beyond the Digital Lounge. Here FB10161536","title":"How can I right align Arabic text in push notifications efficiently when only the app language is Arabic not the entire device."},{"location":"wwdc22/localization-and-internationalization.html#hi-is-the-generated-xcloc-file-will-fetch-all-strings-update-in-every-export","text":"Yes, running Export Localizations will re-process your source code to extract any newly added, removed, or changed strings and include them in the exported localization catalog. It will also include the existing translations when exporting for languages other than English. That\u2019s Weird. Becoz I found it only works at the 1st time. Then all xcloc will follow the version of the 1st import\u2026 https://wwdc22.slack.com/archives/C03H786M2V8/p1654879512571169?thread_ts=1654804988.358809&cid=C03H786M2V8 I can follow up in your other thread ok thx","title":"Hi. Is the generated xcloc file will fetch all strings update in every export?"},{"location":"wwdc22/localization-and-internationalization.html#so-if-i-have-a-swiftui-or-uikit-notes-app-thats-not-localized-in-any-rtl-languages-but-a-user-enters-rtl-text-am-i-correct-that-the-expected-behavior-is-that-the-text-itself-will-appear-rtl-but-will-be-left-aligned-is-there-an-easy-way-to-get-this-to-appear-right-aligned-or-would-i-have-to-analyze-the-language-myself-or-is-this-undesirable-behavior-in-an-otherwise-left-aligned-app","text":"On iOS, when a user enters text into a text field or text view, the alignment follows the default alignment of the keyboard, and you should not need to do anything extra on top of this. If that text is then displayed in a UILabel, for example, the alignment would be based on the UI language, rather than the content of the label itself. If you have a use case for something more automatic, please do file a feedback describing it in more detail. Okay thanks","title":"So if I have a SwiftUI or UIKit notes app that\u2019s not localized in any RTL languages but a user enters RTL text, am I correct that the expected behavior is that the text itself will appear RTL but will be left-aligned? Is there an easy way to get this to appear right-aligned, or would I have to analyze the language myself? Or is this undesirable behavior in an otherwise left-aligned app?"},{"location":"wwdc22/localization-and-internationalization.html#hello-devs-we-have-localization-strings-being-delivered-by-middle-ware-and-get-updated-and-stored-in-application-directory-on-each-app-launch-where-we-used-to-load-them-using-localizable-nocache-as-mentioned-on-apple-docs-however-this-slow-down-the-ul-performance-way-too-much-as-it-seems-it-would-load-whole-strings-map-for-each-call-to-nslocalizationstring-can-you-suggest-a-work-around-thanks-fahied","text":"Hi Muhammad! .nocache should only need to be used if: \u2022 the strings table has already been loaded during your app processes lifetime, \u2022 the table is known to have been updated based on some other signal Use of .nocache is expected to have some performance overhead so some techniques to reduce are : \u2022 Use it as sparingly as necessary (ie is it really user critical to get non-cached strings) \u2022 Consider re-organizing the strings tables into smaller tables that map to user activities so that unnecessary strings aren\u2019t being loaded into memory Hi Muhammad, can you also file a feedback report about your specific use case so we can look into enhancement in this area too? Sounds great, I ll do that. The problem is really If I load Strings without .nocache, It will not load the updated strings even though the same source files .strings is overriden or even you force load main bundle again. That's right. The strings files are cached by bundle when bundle is created. Since there's no way to really \"unload\" a bundle, the cached resources remained cached Depending on the scope of your project, you can consider having a separate XPC service to load the strings, and kill and relaunch the service when you get a notification when the strings are updated, if such feedback is available via your middle ware Would there be any possibility for iOS in term of XPC service? Ah.. sorry I didn't ask about your environment first. Unfortunately I don't think so I thought may be you guys holding on to something :smile:","title":"Hello Devs,  We have localization Strings being delivered by Middle ware and get updated and stored in Application Directory on each app launch. Where we used to load them using \u2018Localizable. nocache\u2019 as mentioned on Apple Docs. However this slow down the Ul performance way too much. As it seems it would load whole strings map for each call to NSLocalizationString. Can you suggest a work around?  Thanks Fahied"},{"location":"wwdc22/localization-and-internationalization.html#not-sure-its-a-bug-bug-if-my-development-lanugage-is-english-but-if-i-dont-add-english-in-my-localization-it-going-to-display-other-language-the-work-around-i-did-now-is-add-empty-english-localization-file-for-each-file","text":"Can you clarify your project setup? In general, your development localization should be one of your app localizations. Prior to iOS 16/macOS Ventura, it was required that your app bundle also contain a corresponding lproj folder for the development language, but you should not need any empty files.","title":"Not sure it's a bug bug if my development lanugage is english but if I don't add English in my Localization it going to display other language. The work around I did now is add empty english localization file for each file?"},{"location":"wwdc22/template.html","text":"Template Lounge QAs by USER Question Answer","title":"in progress"},{"location":"wwdc22/template.html#template-lounge-qas","text":"","title":"Template Lounge QAs"},{"location":"wwdc22/template.html#by-user","text":"","title":"by USER"},{"location":"wwdc22/template.html#question","text":"Answer","title":"Question"}]}